<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NGÀY TỐT XẤU - By TIEN.TQN</title>
    <style id="dynamic-column-styles"></style>
    <style>
        body {
            font-family: "Times New Roman", Times, serif;
            font-size: 14px;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            width: 98%;
            max-width: 2400px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border: 2px solid #333;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        .header-container .main-title-group {
            text-align: left;
        }
        .header-container .action-buttons-group {
            text-align: right;
            white-space: nowrap;
        }
        .header-container .action-buttons-group button {
            padding: 5px 10px;
            font-size: 13px;
            margin-left: 10px;
            cursor: pointer;
        }
        h1, .slogan {
            margin: 0;
            padding: 0;
        }
        h1 {
            color: blue;
            font-size: 27px;
            font-weight: bold;
        }
        .slogan {
            color: red;
            font-size: 27px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-bottom: 10px;
            padding: 15px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
        }
        .control-group { display: flex; align-items: center; gap: 10px; }
        .control-group label { font-weight: bold; }
        .control-group input { padding: 5px; border: 1px solid #ccc; border-radius: 4px; width: 80px; }
        #event-check, #location-check { width: 150px; }
        .control-group .year-info { font-weight: normal; min-width: 200px; }
        .year-info .lac-thu-nap-am { font-weight: bold; color: red; }
        .year-info .luc-thap-nap-am { color: blue; font-size: 75%; }
        
        #column-toggle-controls {
            margin: 10px 0 20px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            font-size: 13px;
        }
        #column-toggle-controls label { cursor: pointer; user-select: none; }

        .table-container { overflow-x: auto; position: relative; max-height: 80vh; }
        #main-table { width: 100%; border-collapse: separate; border-spacing: 0; }
        #main-table th, #main-table td {
            border-right: 1px solid #ccc;
            border-bottom: 1px solid #ccc;
            padding: 5px 8px;
            text-align: center; /* Default alignment */
            vertical-align: middle;
            font-size: 13px;
            white-space: nowrap;
        }
        #main-table th { border-left: 1px solid #ccc; }
        #main-table td:first-child { border-left: 1px solid #ccc; }
        #main-table thead tr:first-child th { border-top: 1px solid #ccc; }

        #main-table thead { display: table-header-group; }
        #main-table thead th { background-color: #e9ecef; }
        #main-table thead .header-ngay { background-color: #e0f7ff; }
        #main-table thead .header-gio { background-color: #fff9e0; }

        #main-table thead th input.filter-input { width: 90%; margin-top: 5px; font-size: 12px; padding: 2px; border: 1px solid #aaa; }

        .hour-cell {
            text-align: justify !important;
            vertical-align: top !important;
            white-space: pre-wrap !important;
            min-width: 230px;
            cursor: pointer;
        }
        
        .detail-cell {
            text-align: justify !important;
            vertical-align: top !important;
            white-space: pre-wrap !important; 
            min-width: 250px;
        }
        .xung-cell, .huong-than-cell {
             min-width: 120px;
             text-align: center !important;
        }
        .detail-cell-content { /* Nội dung sẽ tự động giãn nở */ }
        
        .text-good, .highlight-good { color: blue; font-weight: bold; }
        .text-bad, .highlight-bad { color: red; font-weight: bold; }
        .text-bad-no-bold { color: red; }
        .text-good-no-bold { color: blue; }

        .manual-highlight { background-color: #d4edda !important; }
        .good-result { color: blue; }

        /* --- STYLES FOR HIDING ROWS --- */
        .row-hidden {
            background-color: #fff8e1 !important; /* Light yellow for marked rows */
        }
        body.hide-mode .row-hidden {
            display: none;
        }
        #btn-toggle-hidden-rows.active {
            background-color: red;
            color: white;
            font-weight: bold;
        }
        /* --- END STYLES --- */

        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 255, 255, 0.8); display: flex; justify-content: center; align-items: center; font-size: 20px; font-weight: bold; z-index: 1000; }
        
        #notes-container {
            display: none;
            position: fixed;
            top: 100px;
            right: 20px;
            width: 350px;
            max-height: 70vh;
            overflow-y: auto;
            background-color: #fff8e1;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1001;
            font-size: 13px;
            line-height: 1.5;
        }
        #notes-container h3 { margin-top: 0; }
        #notes-container ul { padding-left: 20px; }
        
        #print-note-khach { display: none; }
        #print-note-khach p {
            text-align: justify;
        }

        /* --- PRINT STYLES --- */
        @media print {
            body { 
                background-color: #fff; 
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .container { 
                box-shadow: none; 
                border: none; 
                width: 100%; 
                max-width: 100%; 
                padding: 0; 
            }
            
            /* Hide interactive elements for ALL print modes */
            .action-buttons-group, #column-toggle-controls, #filter-row, #notes-container { 
                display: none !important; 
            }
            
            .table-container { 
                max-height: none; 
                overflow: visible; 
            }

            /* --- PRINT MODE: FOR CLIENT ('In cho Khách') --- */
            
            /* Hide header/controls ONLY for client print */
            body.print-mode-khach .header-container,
            body.print-mode-khach .controls {
                display: none !important;
            }

            /* Show client note */
            body.print-mode-khach #print-note-khach {
                display: block;
                page-break-after: always;
                padding: 40px;
                border: 1px solid #333;
                margin: 20px;
                font-size: 16px;
                line-height: 1.5;
            }
            
            /* Client Print Table Optimizations */
            body.print-mode-khach #main-table {
                font-size: 7pt;
            }
            body.print-mode-khach #main-table th, 
            body.print-mode-khach #main-table td {
                height: 40px;
                padding: 3px 2px;
                vertical-align: top;
                white-space: normal !important;
                word-break: break-word;
                overflow-wrap: break-word;
            }
            body.print-mode-khach .hour-cell, 
            body.print-mode-khach .detail-cell, 
            body.print-mode-khach .xung-cell, 
            body.print-mode-khach .huong-than-cell {
                min-width: initial !important; 
            }
            
            /* Keep Duong Lich and Am Lich columns from shrinking */
            body.print-mode-khach [data-col-idx="1"],
            body.print-mode-khach [data-col-idx="2"] {
                white-space: nowrap !important;
            }

            /* Hide Hac Than in client print */
            body.print-mode-khach .huong-than-cell .text-bad {
                display: none !important;
            }
             
            /* Hide hour cell content, keeping background color */
            body.print-mode-khach .hour-cell {
                color: transparent !important;
                font-size: 0 !important;
                line-height: 0 !important;
            }

            /* Filter detail cell content for client */
            body.print-mode-khach .detail-cell .detail-cell-content > *:not(:has(> .highlight-good)) {
                 display: none !important;
            }
            body.print-mode-khach .detail-cell .detail-cell-content .highlight-good {
                display: inline !important;
                font-weight: bold !important;
                color: blue !important;
            }

            /* --- PRINT MODE: FOR VIEW ('In để xem') --- */
            /* No special rules are needed here. It will print "as-is" from the screen styles,
               allowing manual adjustment in the print dialog, as requested. */
        }
    </style>
</head>
<body>
    <!-- Ghi chú cho khách khi in -->
    <div id="print-note-khach">
	<h2>ĐẮC THIÊN KHÍ - VẠN SỰ AN</h2>
        <h2>Ghi chú từ Khầy Tiến</h2>
        <p>*   Đây là nội dung ngày giờ tốt đã được tìm kiếm và lựa chọn cẩn thận dựa trên nhiều phương pháp cổ học tinh hoa, kết hợp với các yếu tố Thiên - Địa - Nhân Khí để mang lại sự cát tường, hanh thông cho công việc của quý gia chủ.</p>
        <p>** Các giờ được tô màu xanh là những khung giờ tốt đã được chọn. Xin vui lòng tuân thủ để mọi việc được thuận lợi, viên mãn.</p>
	
	<p>Lưu ý:<p>
		<p>1. Ngày giờ tốt được đưa ra dưới đây là được lựa chọn theo tuổi, theo mục đích cụ thể ( những tuổi khác, những mục đích khác không sử dụng).<p>
		<p>2. Tùy vào vùng địa lý, thời gian trong năm mà thời gian mặt trời mọc, đứng bóng, lặn trong ngày sẽ khác nhau. Do đó khung thời gian chuẩn sẽ có sự thay đổi. Dựa vào mục "Chính Ngọ" để có thời gian chính xác nhất. Địa điểm người xem chọn là "TP. Hồ Chí Minh", nếu có thay đổi địa điểm xem vui lòng báo lại. Ví dụ: "Chính ngọ là 11:40" có nghĩa là thời gian mặt trời lên đứng bóng sẽ là lúc 11 giờ 40 phút nhanh hơn 20 phút so với giờ chuẩn là 12 giờ trưa, khi đó tất cả khung giờ sẽ dịch chuyển sớm hơn 20 phút so với giờ chuẩn, Giờ Ngọ chính xác sẽ là 10h40 - 12h40, tương tự Giờ Thìn sẽ là 6h40 - 8h40.</p>
		<p>3. Trong một số việc như xuất hành, đứng cúng,... để tối đa hiệu quả có thể chọn hướng "Tài thần" hoặc "Hỷ thần" để xuất phát, xoay mặt về hướng đó để cúng,...<p>
        <p>Trân trọng.</p>
    </div>

    <div class="container">
        <div class="header-container">
            <div class="main-title-group">
                <h2 class="slogan">ĐẮC THIÊN KHÍ - VẠN SỰ AN</h2>
                <h1>NGÀY TỐT XẤU - By TIEN.TQN</h1>
            </div>
            <div class="action-buttons-group">
                <button id="btn-notes">Ghi chú</button>
                <button id="btn-toggle-hidden-rows">Ẩn Dòng</button>
                <button id="btn-print-view">In để xem</button>
                <button id="btn-print-khach">In cho Khách</button>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="birth-year">TUỔI XEM:</label>
                <input type="number" id="birth-year" value="1993">
                <span id="birth-year-info" class="year-info"></span>
            </div>
            <div class="control-group">
                <label for="view-year">NĂM XEM (ÂL):</label>
                <input type="number" id="view-year">
                <span id="view-year-info" class="year-info"></span>
            </div>
            <div class="control-group">
                <label for="event-check">VIỆC CẦN XEM:</label>
                <input type="text" id="event-check" placeholder="cưới, động thổ...">
            </div>
            <div class="control-group">
                <label for="location-check">ĐỊA ĐIỂM XEM:</label>
                <input type="text" id="location-check" placeholder="Hà Nội, TPHCM...">
            </div>
        </div>

        <div id="column-toggle-controls">
            <span>Ẩn/Hiện Cột:</span>
        </div>

        <div class="table-container">
            <div id="loading-overlay" style="display: none;"><span>Đang tính toán, vui lòng chờ...</span></div>
            <table id="main-table">
                <thead>
                    <tr>
                        <th rowspan="2" data-col-idx="0">STT</th>
                        <th rowspan="2" data-col-idx="1">DƯƠNG LỊCH</th>
                        <th rowspan="2" data-col-idx="2">ÂM LỊCH</th>
                        <th rowspan="2" data-col-idx="3">NGÀY ÂL</th>
                        <th rowspan="2" data-col-idx="4">THÁNG ÂL</th>
                        <th rowspan="2" data-col-idx="5">NĂM ÂL</th>
                        <th rowspan="2" data-col-idx="6">NGÀY CAN CHI</th>
                        <th rowspan="2" data-col-idx="7">THÁNG CAN CHI</th>
                        <th rowspan="2" data-col-idx="8">NĂM CAN CHI</th>
                        <th rowspan="2" data-col-idx="9">TIẾT KHÍ</th>
                        <th rowspan="2" data-col-idx="10">THÁNG TIẾT KHÍ</th>
                        <th rowspan="2" data-col-idx="11" style="color: red; font-weight: bold;">CHÍNH NGỌ</th>
                        <th colspan="20" class="header-ngay">NGÀY</th>
                        <th colspan="12" class="header-gio">GIỜ</th>
                    </tr>
                    <tr>
                        <th class="header-ngay" data-col-idx="12">TAM NƯƠNG (1)</th>
                        <th class="header-ngay" data-col-idx="13">ĐẠI NGUYỆT KỴ (2)</th>
                        <th class="header-ngay" data-col-idx="14">TC - ĐC NGÀY (5)</th>
                        <th class="header-ngay" data-col-idx="15">NGÀY HĐ-HĐ (TK)*****</th>
                        <th class="header-ngay" data-col-idx="16">12 TRỰC (TK)**</th>
                        <th class="header-ngay" data-col-idx="17">ĐỔNG CÔNG (TK)*</th>
                        <th class="header-ngay" data-col-idx="18">ĐỔNG CÔNG +(TK)*</th>
                        <th class="header-ngay" data-col-idx="19">28 BÁT TÚ ****</th>
                        <th class="header-ngay" data-col-idx="20">SAO TỐT ***</th>
                        <th class="header-ngay" data-col-idx="21">SAO XẤU ***</th>
                        <th class="header-ngay" data-col-idx="22">NG. TẬN/LY/TUYỆT (3)</th>
                        <th class="header-ngay" data-col-idx="23">KTTS/SÁT CHỦ/THỌ TỬ (4)</th>
                        <th class="header-ngay" data-col-idx="24">TAM ĐẠI KIẾT TINH</th>
                        <th class="header-ngay" data-col-idx="25">KỴ ĐỘNG THỔ</th>
                        <th class="header-ngay" data-col-idx="26">KỴ CƯỚI HỎI</th>
                        <th class="header-ngay" data-col-idx="27">THỨ</th>
                        <th class="header-ngay" data-col-idx="28">CAN CHI NGÀY XUNG</th>
                        <th class="header-ngay" data-col-idx="29">NH NẠP ÂM NGÀY - CHỦ</th>
                        <th class="header-ngay" data-col-idx="30">CHI NGÀY - CHỦ</th>
                        <th class="header-ngay" data-col-idx="31">HƯỚNG TÀI/HỶ/HẠC</th>
                        <th class="header-gio" data-col-idx="32">TÝ (23H-1H)</th>
                        <th class="header-gio" data-col-idx="33">SỬU (1H-3H)</th>
                        <th class="header-gio" data-col-idx="34">DẦN (3H-5H)</th>
                        <th class="header-gio" data-col-idx="35">MÃO (5H-7H)</th>
                        <th class="header-gio" data-col-idx="36">THÌN (7H-9H)</th>
                        <th class="header-gio" data-col-idx="37">TỊ (9H-11H)</th>
                        <th class="header-gio" data-col-idx="38">NGỌ (11H-13H)</th>
                        <th class="header-gio" data-col-idx="39">MÙI (13H-15H)</th>
                        <th class="header-gio" data-col-idx="40">THÂN (15H-17H)</th>
                        <th class="header-gio" data-col-idx="41">DẬU (17H-19H)</th>
                        <th class="header-gio" data-col-idx="42">TUẤT (19H-21H)</th>
                        <th class="header-gio" data-col-idx="43">HỢI (21H-23H)</th>
                    </tr>
                    <tr id="filter-row"></tr>
                </thead>
                <tbody id="table-body"></tbody>
            </table>
        </div>
    </div>

    <!-- Khung ghi chú -->
    <div id="notes-container">
        <h2>Phương pháp chọn ngày - giờ tốt của Khầy Tiến</h2>
        <!-- Nội dung ghi chú đã được rút gọn, Thầy Tiến sẽ tự điền vào sau -->
<p>=========================================</p>
<h3>" Thà bỏ Cát (Tốt) nhỏ chứ không phạm Hung (Xấu) lớn" & " Tùy việc mà dụng pháp"</h3>
<h3>I. Chính - Phụ:</h3>
	<p>Hạng 1: Đổng Cổng (Tối cao - Bắt buộc) - Giữ tuyệt đối</p>
	<p>Hạng 2: 12 Trực (Cốt lõi - Định việc) - Giữ để định việc</p>
	<p>Hạng 3: Thần Sát ( Vote - Quyền phủ quyết) - Dùng để loại trừ</p>
	<p>Hạng 4: 28 Bát Tú (Điểm cộng) - Tham khảo</p>
	<p>Hạng 5: Hoàng Đạo/ Hắc Đạo (Hình thức) - Hạ thấp ưu tiên</p>
<h3>II. Bộ Lọc:</h3>
<p>Bước 1: Loại bỏ ngày xấu</p>
<p>Bước 2: Chọn khung xương ( Đổng Công và 12 Trực) - 80%</p>
<p>Bước 3: Gia giảm " Da thịt" ( Thần sát; 28 bát tú; Hoàng/ Hắc đạo)</p>
<p>=========================================</p>
        <p>*** Về phần ngày gồm các phương pháp</p>
	<p>Thiên khí:</p>
		<p>1. Tam nương</p>
		<p>2. Đại/ Nguyệt kỵ</p>
		<p>3. Thiên can - Địa chi ngày</p>
		<p>4. Nguyệt tận/ Tứ ly/ Tứ tuyệt</p>
		<p>5. Kim thần thất sát/ Sát chủ/ Thọ tử</p>
		<p>6. Hoàng đạo/ Hắc đạo</p>
		<p>7. Đổng công</p>
		<p>8. Thập nhị trực</p>
		<p>9. Nhị thập bát tú</p>
		<p>10. Sao tốt/ Sao xấu</p>
		<p>11. Một số nội dung bổ trợ như: Tam đại kiết tinh; Kỵ động thổ; Kỵ cưới hỏi; Thứ; Tiết khí, Giờ chính ngọ...</p>
	<p>Nhân khí:</p>
		<p>1. Can chi ngày xung</p>
		<p>2. Ngũ hành nạp âm Ngày - Chủ</p>
		<p>3. Chi Ngày - Chủ</p>
	<p>Địa khí:</p>
		<p>1. Hướng Tài thần/ Hỷ thần/ Hạc thần</p>
	<p>*** Về phần giờ gồm các phương pháp</p>
		<p>1. Lạc việt độn toán</p>
		<p>2. Kinh dịch - Mai hoa đổi chỗ Tốn Chấn</p>
		<p>3. Hoàng đạo/ Hắc đạo</p>
		<p>4. Sát chủ</p>
		<p>5. Thọ tử</p>
		<p>6. Thiên cẩu hạ thực</p>
		<p>7. Thiên ất quý nhân</p>
		<p>8. Xung tuổi</p>

    </div>

<script>
// --- KHAI BÁO HẰNG SỐ VÀ DỮ LIỆU ---
const TIME_ZONE = 7; const PI = Math.PI;
const NGAY_TRONG_TUAN = ["Chủ nhật", "Thứ 2", "Thứ 3", "Thứ 4", "Thứ 5", "Thứ 6", "Thứ 7"];
const THIEN_CAN = ["Giáp", "Ất", "Bính", "Đinh", "Mậu", "Kỷ", "Canh", "Tân", "Nhâm", "Quý"];
const DIA_CHI = ["Tý", "Sửu", "Dần", "Mão", "Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi"];
const TIET_KHI = ["Xuân phân", "Thanh minh", "Cốc vũ", "Lập hạ", "Tiểu mãn", "Mang chủng", "Hạ chí", "Tiểu thử", "Đại thử", "Lập thu", "Xử thử", "Bạch lộ", "Thu phân", "Hàn lộ", "Sương giáng", "Lập đông", "Tiểu tuyết", "Đại tuyết", "Đông chí", "Tiểu hàn", "Đại hàn", "Lập xuân", "Vũ thủy", "Kinh trập"];
const HOUR_TO_CHI = { 23: "Tý", 0: "Tý", 1: "Sửu", 2: "Sửu", 3: "Dần", 4: "Dần", 5: "Mão", 6: "Mão", 7: "Thìn", 8: "Thìn", 9: "Tị", 10: "Tị", 11: "Ngọ", 12: "Ngọ", 13: "Mùi", 14: "Mùi", 15: "Thân", 16: "Thân", 17: "Dậu", 18: "Dậu", 19: "Tuất", 20: "Tuất", 21: "Hợi", 22: "Hợi" };
const CHI_TO_INDEX = { "Tý": 0, "Sửu": 1, "Dần": 2, "Mão": 3, "Thìn": 4, "Tị": 5, "Ngọ": 6, "Mùi": 7, "Thân": 8, "Dậu": 9, "Tuất": 10, "Hợi": 11 };
const guaStructures = { 1: [1, 1, 1], 2: [1, 1, 0], 3: [1, 0, 1], 4: [0, 1, 1], 5: [1, 0, 0], 6: [0, 1, 0], 7: [0, 0, 1], 8: [0, 0, 0] };
const gua64Names = { "1_1": "Thuần Kiền", "1_2": "Lý", "1_3": "Đồng Nhân", "1_4": "Cấu", "1_5": "Vô Vọng", "1_6": "Tụng", "1_7": "Độn", "1_8": "Bỉ", "2_1": "Quải", "2_2": "Thuần Đoài", "2_3": "Cách", "2_4": "Đại Quá", "2_5": "Tùy", "2_6": "Khốn", "2_7": "Hàm", "2_8": "Tụy", "3_1": "Đại Hữu", "3_2": "Khuê", "3_3": "Thuần Ly", "3_4": "Đỉnh", "3_5": "Phệ Hạp", "3_6": "Vị Tế", "3_7": "Lữ", "3_8": "Tấn", "4_1": "Tiểu Súc", "4_2": "Trung Phu", "4_3": "Gia Nhân", "4_4": "Thuần Tốn", "4_5": "Ích", "4_6": "Hoán", "4_7": "Tiệm", "4_8": "Quan", "5_1": "Đại Tráng", "5_2": "Quy Muội", "5_3": "Phong", "5_4": "Hằng", "5_5": "Thuần Chấn", "5_6": "Giải", "5_7": "Tiểu Quá", "5_8": "Dự", "6_1": "Nhu", "6_2": "Tiết", "6_3": "Ký Tế", "6_4": "Tỉnh", "6_5": "Truân", "6_6": "Thuần Khảm", "6_7": "Kiển", "6_8": "Tỷ", "7_1": "Đại Súc", "7_2": "Tổn", "7_3": "Bí", "7_4": "Cổ", "7_5": "Di", "7_6": "Mông", "7_7": "Thuần Cấn", "7_8": "Bác", "8_1": "Thái", "8_2": "Lâm", "8_3": "Minh Di", "8_4": "Thăng", "8_5": "Phục", "8_6": "Sư", "8_7": "Khiêm", "8_8": "Thuần Khôn" };
const VONG_HOANG_DAO = [ { name: "Thanh Long", type: "Hoàng Đạo" }, { name: "Minh Đường", type: "Hoàng Đạo" }, { name: "Thiên Hình", type: "Hắc Đạo" }, { name: "Chu Tước", type: "Hắc Đạo" }, { name: "Kim Quỹ", type: "Hoàng Đạo" }, { name: "Kim Đường", type: "Hoàng Đạo" }, { name: "Bạch Hổ", type: "Hắc Đạo" }, { name: "Ngọc Đường", type: "Hoàng Đạo" }, { name: "Thiên Lao", type: "Hắc Đạo" }, { name: "Huyền Vũ", type: "Hắc Đạo" }, { name: "Tư Mệnh", type: "Hoàng Đạo" }, { name: "Câu Trận", type: "Hắc Đạo" }];
const HOANG_DAO_START_HOUR = { "Dần": "Tý", "Thân": "Tý", "Mão": "Dần", "Dậu": "Dần", "Thìn": "Thìn", "Tuất": "Thìn", "Tị": "Ngọ", "Hợi": "Ngọ", "Tý": "Thân", "Ngọ": "Thân", "Sửu": "Tuất", "Mùi": "Tuất" };
const LUC_THAP_NAP_AM_MAP = { "Giáp Tý": "Hải Trung Kim", "Ất Sửu": "Hải Trung Kim", "Bính Dần": "Lư Trung Hỏa", "Đinh Mão": "Lư Trung Hỏa", "Mậu Thìn": "Đại Lâm Mộc", "Kỷ Tị": "Đại Lâm Mộc", "Canh Ngọ": "Lộ Bàng Thổ", "Tân Mùi": "Lộ Bàng Thổ", "Nhâm Thân": "Kiếm Phong Kim", "Quý Dậu": "Kiếm Phong Kim", "Giáp Tuất": "Sơn Đầu Hỏa", "Ất Hợi": "Sơn Đầu Hỏa", "Bính Tý": "Giản Hạ Thủy", "Đinh Sửu": "Giản Hạ Thủy", "Mậu Dần": "Thành Đầu Thổ", "Kỷ Mão": "Thành Đầu Thổ", "Canh Thìn": "Bạch Lạp Kim", "Tân Tị": "Bạch Lạp Kim", "Nhâm Ngọ": "Dương Liễu Mộc", "Quý Mùi": "Dương Liễu Mộc", "Giáp Thân": "Tuyền Trung Thủy", "Ất Dậu": "Tuyền Trung Thủy", "Bính Tuất": "Ốc Thượng Thổ", "Đinh Hợi": "Ốc Thượng Thổ", "Mậu Tý": "Tích Lịch Hỏa", "Kỷ Sửu": "Tích Lịch Hỏa", "Canh Dần": "Tùng Bách Mộc", "Tân Mão": "Tùng Bách Mộc", "Nhâm Thìn": "Trường Lưu Thủy", "Quý Tị": "Trường Lưu Thủy", "Giáp Ngọ": "Sa Trung Kim", "Ất Mùi": "Sa Trung Kim", "Bính Thân": "Sơn Hạ Hỏa", "Đinh Dậu": "Sơn Hạ Hỏa", "Mậu Tuất": "Bình Địa Mộc", "Kỷ Hợi": "Bình Địa Mộc", "Canh Tý": "Bích Thượng Thổ", "Tân Sửu": "Bích Thượng Thổ", "Nhâm Dần": "Kim Bạch Kim", "Quý Mão": "Kim Bạch Kim", "Giáp Thìn": "Phúc Đăng Hỏa", "Ất Tị": "Phúc Đăng Hỏa", "Bính Ngọ": "Thiên Hà Thủy", "Đinh Mùi": "Thiên Hà Thủy", "Mậu Thân": "Đại Trạch Thổ", "Kỷ Dậu": "Đại Trạch Thổ", "Canh Tuất": "Thoa Xuyến Kim", "Tân Hợi": "Thoa Xuyến Kim", "Nhâm Tý": "Tang Đố Mộc", "Quý Sửu": "Tang Đố Mộc", "Giáp Dần": "Đại Khê Thủy", "Ất Mão": "Đại Khê Thủy", "Bính Thìn": "Sa Trung Thổ", "Đinh Tị": "Sa Trung Thổ", "Mậu Ngọ": "Thiên Thượng Hỏa", "Kỷ Mùi": "Thiên Thượng Hỏa", "Canh Thân": "Thạch Lựu Mộc", "Tân Dậu": "Thạch Lựu Mộc", "Nhâm Tuất": "Đại Hải Thủy", "Quý Hợi": "Đại Hải Thủy" };
const LAC_THU_NAP_AM_MAP = { "Giáp Tý": "Hải Trung Kim", "Ất Sửu": "Hải Trung Kim", "Bính Dần": "Giáng Hạ Thủy", "Đinh Mão": "Giáng Hạ Thủy", "Mậu Thìn": "Đại Lâm Mộc", "Kỷ Tị": "Đại Lâm Mộc", "Canh Ngọ": "Lộ Bàng Thổ", "Tân Mùi": "Lộ Bàng Thổ", "Nhâm Thân": "Kiếm Phong Kim", "Quý Dậu": "Kiếm Phong Kim", "Giáp Tuất": "Tuyền Trung Thủy", "Ất Hợi": "Tuyền Trung Thủy", "Bính Tý": "Lư Trung Hỏa", "Đinh Sửu": "Lư Trung Hỏa", "Mậu Dần": "Thành Đầu Thổ", "Kỷ Mão": "Thành Đầu Thổ", "Canh Thìn": "Bạch Lạp Kim", "Tân Tị": "Bạch Lạp Kim", "Nhâm Ngọ": "Dương Liễu Mộc", "Quý Mùi": "Dương Liễu Mộc", "Giáp Thân": "Sơn Đầu Hỏa", "Ất Dậu": "Sơn Đầu Hỏa", "Bính Tuất": "Ốc Thượng Thổ", "Đinh Hợi": "Ốc Thượng Thổ", "Mậu Tý": "Trường Lưu Thủy", "Kỷ Sửu": "Trường Lưu Thủy", "Canh Dần": "Tùng Bách Mộc", "Tân Mão": "Tùng Bách Mộc", "Nhâm Thìn": "Tích Lịch Hỏa", "Quý Tị": "Tích Lịch Hỏa", "Giáp Ngọ": "Sa Trung Kim", "Ất Mùi": "Sa Trung Kim", "Bính Thân": "Thiên Hà Thủy", "Đinh Dậu": "Thiên Hà Thủy", "Mậu Tuất": "Bình Địa Mộc", "Kỷ Hợi": "Bình Địa Mộc", "Canh Tý": "Bích Thượng Thổ", "Tân Sửu": "Bích Thượng Thổ", "Nhâm Dần": "Kim Bạch Kim", "Quý Mão": "Kim Bạch Kim", "Giáp Thìn": "Đại Khê Thủy", "Ất Tị": "Đại Khê Thủy", "Bính Ngọ": "Sơn Hạ Hỏa", "Đinh Mùi": "Sơn Hạ Hỏa", "Mậu Thân": "Đại Dịch Thổ", "Kỷ Dậu": "Đại Dịch Thổ", "Canh Tuất": "Thoa Xuyến Kim", "Tân Hợi": "Thoa Xuyến Kim", "Nhâm Tý": "Tang Đố Mộc", "Quý Sửu": "Tang Đố Mộc", "Giáp Dần": "Phúc Đăng Hỏa", "Ất Mão": "Phúc Đăng Hỏa", "Bính Thìn": "Sa Trung Thổ", "Đinh Tị": "Sa Trung Thổ", "Mậu Ngọ": "Đại Hải Thủy", "Kỷ Mùi": "Đại Hải Thủy", "Canh Thân": "Thạch Lựu Mộc", "Tân Dậu": "Thạch Lựu Mộc", "Nhâm Tuất": "Thiên Thượng Hỏa", "Quý Hợi": "Thiên Thượng Hỏa" };
const TIET_KHI_MONTH_MAP = { "Lập xuân": "1", "Vũ thủy": "1", "Kinh trập": "2", "Xuân phân": "2", "Thanh minh": "3", "Cốc vũ": "3", "Lập hạ": "4", "Tiểu mãn": "4", "Mang chủng": "5", "Hạ chí": "5", "Tiểu thử": "6", "Đại thử": "6", "Lập thu": "7", "Xử thử": "7", "Bạch lộ": "8", "Thu phân": "8", "Hàn lộ": "9", "Sương giáng": "9", "Lập đông": "10", "Tiểu tuyết": "10", "Đại tuyết": "11", "Đông chí": "11", "Tiểu hàn": "12", "Đại hàn": "12" };
const TIET_KHI_MONTH_CHI = { "1": "Dần", "2": "Mão", "3": "Thìn", "4": "Tị", "5": "Ngọ", "6": "Mùi", "7": "Thân", "8": "Dậu", "9": "Tuất", "10": "Hợi", "11": "Tý", "12": "Sửu" };
const GOOD_LVDT_QUE = new Set(["Sinh - Đại An", "Sinh - Tiểu Cát", "Đỗ - Tiểu Cát", "Đỗ - Đại An", "Đỗ - Tốc Hỷ", "Khai - Đại An", "Khai - Tốc Hỷ", "Khai - Tiểu Cát", "Cảnh - Tiểu Cát", "Cảnh - Đại An", "Cảnh - Tốc Hỷ", "Kinh - Đại An", "Kinh - Tốc Hỷ", "Hưu - Tiểu Cát", "Hưu - Đại An", "Thương - Tốc Hỷ", "Thương - Tiểu Cát", "Thương - Đại An"]);
const GOOD_MAIHOA_QUE = new Set(["Gia Nhân_Tiệm", "Tiệm_Gia Nhân", "Đại Hữu_Đỉnh", "Đỉnh_Đại Hữu", "Đại Hữu_Thuần Kiền", "Thuần Kiền_Đại Hữu", "Hàm_Tụy", "Thái_Lâm", "Lâm_Thái", "Bí_Gia Nhân", "Gia Nhân_Ích", "Thái_Nhu", "Nhu_Thái", "Thuần Kiền_Cấu", "Cấu_Thuần Kiền", "Sư_Thuần Khôn", "Thuần Khôn_Sư", "Trung Phu_Ích", "Trung Phu_Lý", "Lý_Trung Phu", "Thuần Kiền_Lý", "Lý_Thuần Kiền", "Sư_Giải", "Giải_Sư", "Thái_Thăng", "Hoán_Quan", "Quan_Hoán", "Cách_Phong", "Phong_Cách", "Cách_Hàm", "Hàm_Cách", "Độn_Đồng Nhân", "Đại Hữu_Khuê", "Đại Tráng_Hằng", "Phong_Thuần Chấn", "Bí_Di", "Tụy_Tỷ", "Dự_Tấn", "Tấn_Dự", "Tùy_Thuần Đoài", "Cấu_Đỉnh", "Đỉnh_Cấu"]);
const NGU_HANH_CAN = { "Giáp": "Mộc", "Ất": "Mộc", "Bính": "Hỏa", "Đinh": "Hỏa", "Mậu": "Thổ", "Kỷ": "Thổ", "Canh": "Kim", "Tân": "Kim", "Nhâm": "Thủy", "Quý": "Thủy" };
const NGU_HANH_CHI = { "Tý": "Thủy", "Sửu": "Thổ", "Dần": "Mộc", "Mão": "Mộc", "Thìn": "Thổ", "Tị": "Hỏa", "Ngọ": "Hỏa", "Mùi": "Thổ", "Thân": "Kim", "Dậu": "Kim", "Tuất": "Thổ", "Hợi": "Thủy" };
const NGU_HANH_RELATION = { "Kim": { sinh: "Thủy", khac: "Mộc" }, "Thủy": { sinh: "Mộc", khac: "Hỏa" }, "Mộc": { sinh: "Hỏa", khac: "Thổ" }, "Hỏa": { sinh: "Thổ", khac: "Kim" }, "Thổ": { sinh: "Kim", khac: "Thủy" } };

// *** DỮ LIỆU TƯƠNG TÁC ĐỊA CHI (MỚI) ***
const DIA_CHI_RELATIONS = {
    "Tý":   { nhiHop: "Sửu", tamHop: ["Thân", "Thìn"], lucXung: "Ngọ", tuongHinh: "Mão", lucHai: "Mùi" },
    "Sửu":  { nhiHop: "Tý", tamHop: ["Tị", "Dậu"], lucXung: "Mùi", tuongHinh: ["Tuất", "Mùi"], lucHai: "Ngọ" },
    "Dần":  { nhiHop: "Hợi", tamHop: ["Ngọ", "Tuất"], lucXung: "Thân", tuongHinh: ["Tị", "Thân"], lucHai: "Tị" },
    "Mão":  { nhiHop: "Tuất", tamHop: ["Hợi", "Mùi"], lucXung: "Dậu", tuongHinh: "Tý", lucHai: "Thìn" },
    "Thìn": { nhiHop: "Dậu", tamHop: ["Tý", "Thân"], lucXung: "Tuất", tuongHinh: "Thìn", lucHai: "Mão" }, // Tự Hình
    "Tị":   { nhiHop: "Thân", tamHop: ["Sửu", "Dậu"], lucXung: "Hợi", tuongHinh: ["Dần", "Thân"], lucHai: "Dần" },
    "Ngọ":  { nhiHop: "Mùi", tamHop: ["Dần", "Tuất"], lucXung: "Tý", tuongHinh: "Ngọ", lucHai: "Sửu" }, // Tự Hình
    "Mùi":  { nhiHop: "Ngọ", tamHop: ["Mão", "Hợi"], lucXung: "Sửu", tuongHinh: ["Sửu", "Tuất"], lucHai: "Tý" },
    "Thân": { nhiHop: "Tị", tamHop: ["Tý", "Thìn"], lucXung: "Dần", tuongHinh: ["Dần", "Tị"], lucHai: "Hợi" },
    "Dậu":  { nhiHop: "Thìn", tamHop: ["Tị", "Sửu"], lucXung: "Mão", tuongHinh: "Dậu", lucHai: "Tuất" }, // Tự Hình
    "Tuất": { nhiHop: "Mão", tamHop: ["Dần", "Ngọ"], lucXung: "Thìn", tuongHinh: ["Sửu", "Mùi"], lucHai: "Dậu" },
    "Hợi":  { nhiHop: "Dần", tamHop: ["Mão", "Mùi"], lucXung: "Tị", tuongHinh: "Hợi", lucHai: "Thân" }  // Tự Hình
};

const NGAY_HOANG_DAO_DATA = { "Thanh Long": { type: "Hoàng Đạo", nghi: "Mọi việc, đứng đầu bảng trong các giờ Hoàng Đạo.", ky: "" }, "Minh Đường": { type: "Hoàng Đạo", nghi: "Gặp các vị đại nhân, thăng quan tiến chức.", ky: "" }, "Kim Quỹ": { type: "Hoàng Đạo", nghi: "Cưới hỏi.", ky: "" }, "Kim Đường": { type: "Hoàng Đạo", nghi: "Hanh thông mọi việc.", ky: "" }, "Ngọc Đường": { type: "Hoàng Đạo", nghi: "Mọi việc, giấy tờ, công văn, học hành, khai bút.", ky: "" }, "Tư Mệnh": { type: "Hoàng Đạo", nghi: "Mọi việc đều tốt.", ky: "" }, "Thiên Hình": { type: "Hắc Đạo", nghi: "", ky: "Kiện tụng." }, "Chu Tước": { type: "Hắc Đạo", nghi: "", ky: "Tranh cãi, kiện tụng." }, "Bạch Hổ": { type: "Hắc Đạo", nghi: "Săn bắn, tế tự.", ky: "Mọi việc." }, "Thiên Lao": { type: "Hắc Đạo", nghi: "Trấn áp thần quỷ (trong tín ngưỡng, tôn giáo...).", ky: "Mọi việc bất lợi." }, "Huyền Vũ": { type: "Hắc Đạo", nghi: "", ky: "Kiện tụng, giao tiếp." }, "Câu Trận": { type: "Hắc Đạo", nghi: "", ky: "Dời nhà, làm nhà, tang lễ." } };
const NGAY_HOANG_DAO_LOOKUP = { "Tý": { "Thân": "Thanh Long", "Dậu": "Minh Đường", "Tuất": "Thiên Hình", "Hợi": "Chu Tước", "Tý": "Kim Quỹ", "Sửu": "Kim Đường", "Dần": "Bạch Hổ", "Mão": "Ngọc Đường", "Thìn": "Thiên Lao", "Tị": "Huyền Vũ", "Ngọ": "Tư Mệnh", "Mùi": "Câu Trận" }, "Sửu": { "Tuất": "Thanh Long", "Hợi": "Minh Đường", "Tý": "Thiên Hình", "Sửu": "Chu Tước", "Dần": "Kim Quỹ", "Mão": "Kim Đường", "Thìn": "Bạch Hổ", "Tị": "Ngọc Đường", "Ngọ": "Thiên Lao", "Mùi": "Huyền Vũ", "Thân": "Tư Mệnh", "Dậu": "Câu Trận" }, "Dần": { "Tý": "Thanh Long", "Sửu": "Minh Đường", "Dần": "Thiên Hình", "Mão": "Chu Tước", "Thìn": "Kim Quỹ", "Tị": "Kim Đường", "Ngọ": "Bạch Hổ", "Mùi": "Ngọc Đường", "Thân": "Thiên Lao", "Dậu": "Huyền Vũ", "Tuất": "Tư Mệnh", "Hợi": "Câu Trận" }, "Mão": { "Dần": "Thanh Long", "Mão": "Minh Đường", "Thìn": "Thiên Hình", "Tị": "Chu Tước", "Ngọ": "Kim Quỹ", "Mùi": "Kim Đường", "Thân": "Bạch Hổ", "Dậu": "Ngọc Đường", "Tuất": "Thiên Lao", "Hợi": "Huyền Vũ", "Tý": "Tư Mệnh", "Sửu": "Câu Trận" }, "Thìn": { "Thìn": "Thanh Long", "Tị": "Minh Đường", "Ngọ": "Thiên Hình", "Mùi": "Chu Tước", "Thân": "Kim Quỹ", "Dậu": "Kim Đường", "Tuất": "Bạch Hổ", "Hợi": "Ngọc Đường", "Tý": "Thiên Lao", "Sửu": "Huyền Vũ", "Dần": "Tư Mệnh", "Mão": "Câu Trận" }, "Tị": { "Ngọ": "Thanh Long", "Mùi": "Minh Đường", "Thân": "Thiên Hình", "Dậu": "Chu Tước", "Tuất": "Kim Quỹ", "Hợi": "Kim Đường", "Tý": "Bạch Hổ", "Sửu": "Ngọc Đường", "Dần": "Thiên Lao", "Mão": "Huyền Vũ", "Thìn": "Tư Mệnh", "Tị": "Câu Trận" }, "Ngọ": { "Thân": "Thanh Long", "Dậu": "Minh Đường", "Tuất": "Thiên Hình", "Hợi": "Chu Tước", "Tý": "Kim Quỹ", "Sửu": "Kim Đường", "Dần": "Bạch Hổ", "Mão": "Ngọc Đường", "Thìn": "Thiên Lao", "Tị": "Huyền Vũ", "Ngọ": "Tư Mệnh", "Mùi": "Câu Trận" }, "Mùi": { "Tuất": "Thanh Long", "Hợi": "Minh Đường", "Tý": "Thiên Hình", "Sửu": "Chu Tước", "Dần": "Kim Quỹ", "Mão": "Kim Đường", "Thìn": "Bạch Hổ", "Tị": "Ngọc Đường", "Ngọ": "Thiên Lao", "Mùi": "Huyền Vũ", "Thân": "Tư Mệnh", "Dậu": "Câu Trận" }, "Thân": { "Tý": "Thanh Long", "Sửu": "Minh Đường", "Dần": "Thiên Hình", "Mão": "Chu Tước", "Thìn": "Kim Quỹ", "Tị": "Kim Đường", "Ngọ": "Bạch Hổ", "Mùi": "Ngọc Đường", "Thân": "Thiên Lao", "Dậu": "Huyền Vũ", "Tuất": "Tư Mệnh", "Hợi": "Câu Trận" }, "Dậu": { "Dần": "Thanh Long", "Mão": "Minh Đường", "Thìn": "Thiên Hình", "Tị": "Chu Tước", "Ngọ": "Kim Quỹ", "Mùi": "Kim Đường", "Thân": "Bạch Hổ", "Dậu": "Ngọc Đường", "Tuất": "Thiên Lao", "Hợi": "Huyền Vũ", "Tý": "Tư Mệnh", "Sửu": "Câu Trận" }, "Tuất": { "Thìn": "Thanh Long", "Tị": "Minh Đường", "Ngọ": "Thiên Hình", "Mùi": "Chu Tước", "Thân": "Kim Quỹ", "Dậu": "Kim Đường", "Tuất": "Bạch Hổ", "Hợi": "Ngọc Đường", "Tý": "Thiên Lao", "Sửu": "Huyền Vũ", "Dần": "Tư Mệnh", "Mão": "Câu Trận" }, "Hợi": { "Ngọ": "Thanh Long", "Mùi": "Minh Đường", "Thân": "Thiên Hình", "Dậu": "Chu Tước", "Tuất": "Kim Quỹ", "Hợi": "Kim Đường", "Tý": "Bạch Hổ", "Sửu": "Ngọc Đường", "Dần": "Thiên Lao", "Mão": "Huyền Vũ", "Thìn": "Tư Mệnh", "Tị": "Câu Trận" } };

// *** DỮ LIỆU ĐỔNG CÔNG 2 (MỚI) ***
const DONG_CONG_2_DATA = {
    "1": {
        "Kiến": "NGÀY KIẾN (Dần): Ngày Vãng vong, không lợi cho việc khởi tạo, kết hôn nhân, lạp thái (ăn hỏi), chủ về gia trưởng bị bệnh, bị gọi vì việc quan, trong vòng 60 ngày và 120 ngày tổn tiểu khẩu, trong vòng một năm thấy trùng tang, trăm việc không nên dùng.",
        "Trừ": "NGÀY TRỪ (Mão): Không nên khởi tạo, hôn nhân, phạm vào cái đó thì trong vòng 60 ngày tổn gia trưởng, bị gọi vì việc quan, trong vòng 3-6 năm thấy xấu, lãnh thoái, chủ về huynh đệ bất nghĩa, mọi nghiệp chia tan, gặp phải người ác, sinh ly tử biệt.",
        "Mãn": "NGÀY MÃN (Thìn): Là Thiên phú, Thiên tặc, là Thiên la, lại nói: Giáp Thìn tuy có khí khích giống với Mậu Thìn, cung mà sát tập trung, trăm việc đều kị, phạm phải cái đó thì chủ về việc khởi đầu giết người, của bị giảm (thoái), rất hung. Trừ mà ở ngày Thìn cũng không tốt.",
        "Bình": "NGÀY BÌNH (Tị): Là Tiểu hồng sa, có Chu tước, Câu giảo đáo châu tinh, phạm vào cái đó chủ về bị gọi vì việc quan, tổn gia trưởng trạch, đàn bà, con gái trong vòng 3-5 năm lớp lớp bất lợi, phá của, rất hung, ruộng tằm không thu được sản vật, chết vì tự thắt cổ, bị người ác cướp bóc.",
        "Định": "NGÀY ĐỊNH (Ngọ): Là Hoàng sa, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân, Khố lâu, Điền đường, nguyệt tài khố trữ tinh che, chiếu, nên khởi tạo, an táng, dời chỗ ở, khai trương, xuất hành, trong vòng 60 ngày, 120 ngày, tiến hoành tài, hoặc nhân phụ ký thành gia (nhờ vả mà thành nghiệp), làm lớn thì phát lớn, làm nhỏ thì phát nhỏ, chủ về ruộng, tằm thu lớn, vàng bạc đầy kho.",
        "Chấp": "NGÀY CHẤP (Mùi): Là Thiên tặc, có Chu tước, Câu giảo, trong vòng 60 ngày, 100 ngày lục súc hại, lừa ngựa thành ác tật. Ất Mùi sát tập trung cung càng kị khởi tạo, nhập trạch (về nhận nhà mới), hôn nhân, khai trương, tu chỉnh.",
        "Phá": "NGÀY PHÁ (Thân): Có Chu tước, Câu giảo, bị gọi vì việc quan, khẩu thiệt, giảm gia súc và của, trong vòng 3-5 năm thấy mộ đàn bà, việc xấu. Ngày Canh Thân là chính tứ phế, càng xấu.",
        "Nguy": "NGÀY NGUY (Dậu): Tân Dậu ở tháng giêng, tư, bỏ, không nên dùng vào việc. Duy có ngày Đinh Dậu có Thiên đức, Phúc tinh che, chiếu, nên an táng, hoàn phúc nguyện, xuất hành, khai trương, vào việc quan gặp quý, tốt, chỉ không nên các việc khởi tạo, hôn nhân, giá thú, vẫn cái đó vào ngày đó. Ngoài ra, các ngày Dậu khác không nên dùng.",
        "Thành": "NGÀY THÀNH (Tuất): Có Thiên hỉ, nhưng lại là ngày Địa võng, mọi việc không nên phạm ngày đó, chủ về gia trưởng bệnh, nhân khẩu không có nghĩa, lạnh lùng mà lui (lãnh thoái). Lại nói Bính Tuất, Mậu Tuất, Canh Tuất, Nhâm Tuất là sát tập trung cung, phạm vào cái đó chủ về khởi đầu giết người, anh em bất nghĩa, tử biệt sinh ly, kị trước nhất là khởi tạo, hôn giá, nhập trạch, tu tác.",
        "Thâu": "NGÀY THÂU (Hợi): Có Câu giảo, không nên dùng vào việc, phạm cái đó tổn gia trưởng, hại con cháu, trong vòng 60 ngày, 120 ngày, chủ phương Nam Bạch y hình hại, nam nữ nhiều tai vạ, rất xấu. Duy có ngày bình địa chi với nguyệt kiến âm dương hợp đức, là tốt vừa phải (thứ cát).",
        "Khai": "NGÀY KHAI (Tý): Ngày Giáp Tý là kim tự chết, ngày ngũ hành âm kị. Nhâm Tý là mộc đả bảo bình chung (gỗ đánh vào bình quí cuối cùng), là phương Bắc, nơi tắm gội (mộc dục), không nên khởi tạo, hôn nhân, nhập trạch, khai trương. Chỉ có riêng ba ngày Mậu Tý, Bính Tý, Canh Tý duy thủy thổ sinh người, dùng cái đó rất tốt, trong có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân, tàng tài trữ, liên châu, chúng tinh che, chiếu. Trong vòng 60 ngày, 120 ngày được rất nhiều của, quý nhân tiếp dẫn, giữ chức lộc, mưu việc thì nhiều may mắn, vượng lục súc, thêm tài sản, cũng nên an táng.",
        "Bế": "NGÀY BẾ (Sửu): Không lợi cho hôn nhân, khởi tạo, phòng hổ và rắn làm hại, lừa ngựa đá phải thành ác tật, bần, bệnh, rất xấu."
    },
    "2": {
        "Kiến": "NGÀY KIẾN (Mão): Không nên dùng việc, phạm cái đó tổn gia trưởng, và con trai út (thiếu phòng), con cháu gặp ôn dịch, nghèo khổ, khóc lóc, lớp, lớp chồng chất, trong vòng 3-5 năm, xa hơn thì 9 năm, bị kiện ngang trái, bại vong. Tháng hai vào ngày Mão đều là ngày trời đất chuyển sát.",
        "Trừ": "NGÀY TRỪ (Thìn): Không lợi cho dời chỗ ở, về nhà mới, hôn nhân, khai trương các loại, mưu trù làm việc, phạm cái đó trong vòng 60 ngày, 120 ngày, chủ bị gọi vì việc quan, tốn của, bại ruộng vườn, tằm, mất sản nghiệp. Ngày Giáp Thìn, Mậu Thìn, sát tập trung cung càng xấu, trong ba năm mất người trưởng trạch, cái vật làm quái hỏa, trộm vào lừa.",
        "Mãn": "NGÀY MÃN (Tị): Vãng vong, Thiên không, không nên động thổ, nếu tu tạo trăm việc đều tốt. Nếu như ở hai cung Càn, Tốn khởi tạo đều tốt, xuất hành, khai trương, hôn nhân, nhập trạch, trong có Hoàng la, Tử đàn, Điền đường, Khố trữ tinh, che, chiếu, trong năm đó nhà sinh quý tử, ruộng, tằm hưng vượng, suốt đời tốt lành.",
        "Bình": "NGÀY BÌNH (Ngọ): Chỉ nên làm sinh cơ, như các việc hôn nhân, tu tạo, dùng cái đó trong 60 ngày, 120 ngày bị gọi vì việc quan, tổn nhân khẩu, 3-6-9 năm lạnh lùng mà lui. (Sinh cơ là thọ mộc (?) và sinh cơ - tức quan tài và gò mả làm trước, khi chủ còn sống).",
        "Định": "NGÀY ĐỊNH (Mùi): Không lợi việc hôn nhân, khởi tạo, hệ âm cung, chủ việc không nên hướng vào trong nhà, động làm nên nhất thiết sửa sang phía ngoài nhà thì sẽ không hại. Ất Mùi là Bạch hổ nhập trung cung, càng xấu, phạm cái đó tổn nhân khẩu. Là một tháng duy chỉ có một ngày Quý Mùi là thủy nhập Thái châu, do quý thủy gặp trường sinh tướng vượng việc đi (thương ?), trong đó có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng tinh, che, chiếu, lợi người sống lâu, thêm con cháu, tiến ruộng đất, rất tốt. Ngoài ra, mọi ngày Mùi đều bất lợi.",
        "Chấp": "NGÀY CHẤP (Thân): Có Thiên nguyệt nhị đức, nên tu tạo, động thổ, mai táng, hôn nhân, khai trương, nhập trạch, xuất hành, và có Hoàng la, Tử đàn, Kim ngân khố lâu, Bảo tàng tinh, che, chiếu, trong vòng 3-6-9 năm rất vượng, thêm nhân khẩu, sinh quý tử, tăng điền sản, rất tốt. Duy ngày Canh Thân là Xuân chính tứ phế, trăm việc phải tránh, kiêng.",
        "Phá": "NGÀY PHÁ (Dậu): Tiểu hồng sa, Thiên tặc, không lợi cho việc hôn nhân, tu tạo, phạm cái đó, trong vòng 60 ngày, 120 ngày bị gọi vì việc quan, khẩu thiệt, người âm trở lại, hao miệng nhỏ, tật bệnh. Tân Dậu chính tứ phế càng xấu, ngày đó là ngày Nguyệt phá, rất xấu.",
        "Nguy": "NGÀY NGUY (Tuất): Nên hợp phản (Ghép ván gỗ thành quan tài), làm sinh cơ. Nếu tu tạo, đi gặp cha mẹ, hôn nhân thì không lợi con trai trưởng, trước là thoái điền địa, lửa, trộm vào lừa. Lại nói Bính Tuất, Nhâm Tuất là Sát nhập trung cung, càng xấu.",
        "Thành": "NGÀY THÀNH (Hợi): Thiên hỉ, có Thiên hoàng, Địa hoàng, Hoàng la, Tử đàn, Ngọc đường, Tụ bảo tinh, che, chiếu, nên hôn nhân, khai trương, nhập trạch, xuất hành, khởi tạo, an táng, định tảng (đặt móng), buộc giàn, trong vòng 60 ngày, 120 ngày tiến hoành tài, quý nhân tiếp dẫn, mưu việc rất tốt. Là Tân Hợi, Quý Hợi trong tháng đó tốt trên hết.",
        "Thâu": "NGÀY THÂU (Tý): Kị hôn nhân, khởi tạo, nhập trạch, khai trương, phạm cái đó trong vòng ba năm tất thoái của, không tiến thêm, chủ về không kiện cáo thì sản nghiệp cũng hư hao.",
        "Khai": "NGÀY KHAI (Sửu): Không lợi về tạo tác, sửa sang, hôn nhân, gặp cha mẹ, phạm cái đó chủ về điền, tằm không có thu hoạch, trong nhà có người đẻ bị nguy, bị tai nạn về nước sôi và bỏng lửa. Đinh Sửu, Quý Sửu là sát nhập trung cung càng xấu, chủ về quan không, tổn nhân khẩu, tiểu nhân vào làm hại.",
        "Bế": "NGÀY BẾ (Dần): Hoàng sa, có Hoạt dược tinh nên ghép ván làm sinh cơ, nhưng bất lợi về tu tạo, động thổ, hôn nhân, nhập trạch, khai trương. Là ngày mà ngũ hành vô khí, bình thường mà dùng thì có thể, tuy không có hại lớn, không dùng là hay nhất."
    },
    "3": {
        "Kiến": "NGÀY KIẾN (Thìn): Có Địa võng, Câu giảo, không lợi về tu tạo, an táng, hôn nhân, khai trương, phạm cái đó chủ bị bỏng nước sôi, bỏng lửa, chim ác (chim thiu) làm hại, tự do sinh nam, sinh nữ nhưng đều rất xấu xí, có ác tật, vô ích. Ngày Giáp Thìn, Mậu Thìn, là Sát nhập trung cung, càng xấu, chủ về trong ba năm nhà bị phá, người mất.",
        "Trừ": "NGÀY TRỪ (Tị): Đinh Tị nên tu tạo, nhập trạch, di cư, động thổ, làm đồ dùng, hôn nhân, thì rất tốt. Kỷ Tị tạo tác, nhập trạch, cũng tốt. Nếu mai táng thì phạm trùng tang bất lợi dụng. Ất Tị có 10 thứ ác xấu. Tân Tị tuy có hỏa tinh, ngược lại có Xương quỷ (quỷ cuồng vọng), bại vong, lại là ngày thập ác phạt, không nên dùng. Quý Tị, Thiên thượng Không vong, lại phạm thổ quỷ cũng không nên dùng. Đây đều là tất ứng mọi việc.",
        "Mãn": "NGÀY MÃN (Ngọ): Thiên phú. Giáp Ngọ có thổ quỷ. Bính Ngọ bình thường, không thể thấy tốt. Mậu Ngọ có Xương quỷ, bại vong, và phạm trùng tang, tức là an táng cũng thuộc không nên. Canh Ngọ là ngày thập ác, không thể dùng. Nhâm Ngọ là Thiên đức, Nguyệt đức, dùng là tốt vừa (thứ cát).",
        "Bình": "NGÀY BÌNH (Mùi): Cũng giống như tháng giêng, tháng năm, không nên dùng, tức là mưu trù nho nhỏ (tiểu tiểu doanh) là cũng không lợi. Nếu như Ất Mùi càng thêm xấu, hiểm. Cái số trực Thiên cang, lại phạm Câu giảo, Chu tước.",
        "Định": "NGÀY ĐỊNH (Thân): Giáp Thân, Bính Thân nên phát chặt cây cỏ, phá đất, định tảng, buộc giàn, an táng rất tốt, trong 2-3 năm thêm con, cháu, tiến tài lộc. Nhâm Thân có Thiên đức, Nguyệt đức, Hoàng la, Tử đàn, Thiên tinh, Địa tinh, Kim ngân khố lâu tinh, che, chiếu, là ngày thập toàn rất tốt, rất lợi. Mậu Thân, Thiên cang, Không vong, Xương quỷ, bại vong, xấu. Canh Thân tháng giêng, tháng tư, bỏ, cũng xấu. Ngày Thân lại thuộc Vãng vong, xuất hành, xuất quân, phó nhậm (nhận việc đi trước) không lấy ngày này.",
        "Chấp": "NGÀY CHẤP (Dậu): Ất Dậu nên tu tạo, nhập trạch, hôn nhân, khai trương, xuất hành. Quý Dậu an táng thì rất tốt. Đinh Dậu an táng thì tốt vừa. Ất Dậu (Kỷ Dậu?) có cửu thổ quỷ. Tân Dậu ở Chính tứ phế, không nên dùng.",
        "Phá": "NGÀY PHÁ (Tuất): Trực với Nguyệt kiến xung phá mọi việc, không nên dùng. Bính Tuất, Nhâm Tuất là Sát nhập trung cung, càng xấu.",
        "Nguy": "NGÀY NGUY (Hợi): Thiên thành, có hung bạo. Kỷ Hợi có Hỏa tinh, có Văn Xương tinh, che, chiếu, học nên rất tốt, các việc còn lại tốt vừa. Ất Hợi dùng cũng tốt vừa. Tân Hợi đàn bà đó kim, \"âm phủ đã đến kỳ quyết điều khiển\", âm khí toàn thịnh, không có chỗ hợp ở dương gian. Đinh Hợi lại trực Hắc sát. Quý Hợi là ngày cuối cùng của lục giáp, ngũ hành không có khí, chủ về tuyệt nhân, lại là Thụ tử, việc không thể dùng.",
        "Thành": "NGÀY THÀNH (Tý): Hoàng sa, Thiên hỉ. Nhâm Tý tuy có Thiên đức, Nguyệt đức, là nhất bạch, chủ việc Mộc đả bảo bình chung (gỗ đánh vào bình quí cuối cùng), là nơi tắm gội ở phương Bắc, ngũ hành không có khí, phú lực nông, nhưng mưu trù nho nhỏ, làm thì có thể. Nếu như khai trương, xuất hành, nhập trạch, sửa sang, và hôn nhân, hạng (?), dùng ngày đó sẽ thấy xấu, bại, họa hại, tai thương. Ngày đó gọi là bình vỡ băng tiêu (phạn giải băng tiêu).",
        "Thâu": "NGÀY THÂU (Sửu): Tiểu hồng sa, Thiên tặc. Đinh Sửu, Quý Sửu là sát nhập trung cung, không lợi cho tu tạo, hôn nhân, nhập trạch, phạm cái đó chủ thoái tài, tật bệnh, tranh tụng phải trái, xấu. Còn lại Sửu là cũng không tốt, phòng tiểu nhân hình hại.",
        "Khai": "NGÀY KHAI (Dần): Thiên tặc. Mậu Dần là Thiên xá, dùng ngày đó lại tốt. Nhâm Dần có Thiên đức, Nguyệt đức, chỉ nên mai táng và ghép ván làm sinh cơ, dùng cái đó thêm con cháu, tiến điền địa, thăng quan chức, tốt trên hết. Ngoài đó ra, Dần là tốt vừa, nhưng có lục bất thành, lục bất hợp ở đó, ngưng dùng cái đó, cuối cùng là bất lợi, nên cẩn thận cái đó.",
        "Bế": "NGÀY BẾ (Mão): Không nên tạo tác, hôn nhân, mai táng, nhập trạch, phạm cái đó tổn thương, tật đau, lãnh thoái, xấu cho trăm việc, không nên dùng."
    },
    "4": {
        "Kiến": "NGÀY KIẾN (Tị): Tiểu hồng sa, không lợi cho xuất hành, giá thú, an táng, tạo tác, nhập trạch, khai trương, phạm cái đó chủ lãnh thoái, tật bệnh, ruộng, tằm không có thu hoạch, chết ở nơi xa không về, tài sản phá tán, ngày đó là ngày thụ tử.",
        "Trừ": "NGÀY TRỪ (Ngọ): Hoàng sa. Canh Ngọ là Nguyệt đức. Duy Giáp Ngọ, Nhâm Ngọ có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, các tinh che, chiếu, nên tu tạo, hôn nhân, khai trương, xuất hành, nhập trạch, trong vòng 60 ngày, 120 ngày, tăng điền địa, tiến nhân khẩu, sinh quý tử, rất vượng. Ngày Bính Ngọ, Mậu Ngọ là thiên địa chuyển sát, dùng cái đó xấu.",
        "Mãn": "NGÀY MÃN (Mùi): Thiên phú, Thiên tặc. Ngày Tân Mùi có Thiên đức, Nguyệt đức. Kỷ Mùi có Hỏa tinh, đều là tốt vừa, nên định tảng, tạo giàn, mai táng, nhưng hai việc hôn nhân, khởi tạo là không chịu được. Lại theo tu tạo lịch nói là ngày Bạch hổ nhập trung cung, dùng cái đó không thể là lợi, cần tra lại năm, tháng, ngày, nếu như có cát tinh, và mệnh cung cùng hợp phương thì được, nếu có dính với Nguyệt yếm, Thiên tặc, phạm những cái đó chủ về xấu, lãnh thoái.",
        "Bình": "NGÀY BÌNH (Thân): Chu tước, Câu giảo, không lợi cho xuất hành, an táng, hôn nhân, nhập trạch, chủ về bị gọi vì việc quan, khẩu thiệt, âm nhân, trẻ em sinh tai ách. Ngày Giáp Thân, Canh Thân là Sát nhập trung cung, càng xấu, tất chủ về tiểu nhân lôi kéo vào việc vạ, phá của, sinh con xấu như con quái, có tai nguy về thủy, hỏa.",
        "Định": "NGÀY ĐỊNH (Dậu): Tuy có Cửu thổ quỷ, không nên động thổ, mai táng, nếu mưu trù nho nhỏ là ở vào tháng tư. Ngày Dậu là ngày tốt vừa, như hôn nhân, nhập trạch, nên cấm không dùng, chủ về xấu.",
        "Chấp": "NGÀY CHẤP (Tuất): Có Câu giảo. Ngày Bính Tuất, Nhâm Tuất là Sát nhập trung cung, trăm việc đều rất xấu. Duy có ngày Giáp Tuất mưu trù nho nhỏ là tốt vừa, hai mươi bốn hướng mọi thứ Sát trầu trời đã có sửa sang, thì có thể hôn nhân, an táng, nhập trạch, khai trương, không có chỗ nào nên dùng, chủ về tổn trạch trưởng (người lớn nhất trong hộ), hại tay chân, hao tiền tài, rất xấu.",
        "Phá": "NGÀY PHÁ (Hợi): Vãng vong, Chu tước, Câu giảo, hại về bị gọi vì việc quan, tiểu nhân mùa thu thì tại đó chủ về tổn tiền tài, bị tạp bệnh. Quý Hợi ở tháng giêng, tư, bỏ, càng xấu. Là ngày Hợi trong tháng thì mọi việc đều kị.",
        "Nguy": "NGÀY NGUY (Tý): Canh Tý là Nguyệt đức. Bính Tý, Mậu Tý, khởi tạo, hôn nhân, hưng công, động thổ, xuất hành, khai trương, di đồ thì sẽ tiến nhân khẩu, thêm con cháu, vượng điền, tàm (tằm), tăng tài sản, làm lớn thì phát lớn, làm nhỏ thì phát nhỏ. Giáp Tý là kim tự tử, ngũ hành vô khí. Nhâm Tý là mộc đả bảo bình, nơi mà phương Bắc tắm gội, phúc lực mỏng, lại là Sát tứ phế, dùng cái đó tổn nhân khẩu, chủ lãnh thoái, rất xấu. Hai ngày Giáp Tý, Nhâm Tý là thấy ngay tiêu sách (xơ xác cô đơn), tổn phá.",
        "Thành": "NGÀY THÀNH (Sửu): Thiên hỉ, Thiên thành, ngược lại, phạm Chu tước, Câu giảo, dùng cái đó bị gọi việc quan, khẩu thiệt, tiểu nhân vu vạ bừa bãi, mất hỏng. Đinh Sửu, Quý Sửu là Sát nhập trung cung, càng xấu, số ngày đó phạm không vong, phá tài, tiểu nhân hãm hại.",
        "Thâu": "NGÀY THÂU (Dần): Giống như trên, ngày Tuất, Sửu, cũng không lợi.",
        "Khai": "NGÀY KHAI (Mão): Tân Mão là Thiên đức. Quý Mão, Ất Mão có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng tinh che, chiếu, xuất hành, hôn giá, tạo tác, khai trương, nhập trạch, mọi việc đều rất tốt, chủ về mưu việc được hanh thông, có quý nhân tiếp dẫn, tiến tài lộc. Ngoài đó ra các ngày Mão còn lại là tốt vừa.",
        "Bế": "NGÀY BẾ (Thìn): Mậu Thìn, Giáp Thìn là Sát nhập trung cung, không lợi cho tu tạo, khai trương, nhập trạch, an táng, phạm cái đó tổn nhân khẩu, lục súc không vượng, tài sản có bị mất. Ngày Canh Thìn tuy có trực Nguyệt đức, nhưng lại là Thiên địa chuyển sát chi ngưng. Bính Thìn, Nhâm Thìn, hỏa tinh, mưu trù nho nhỏ làm thì được, không nên khởi tạo, hôn nhân, dời đồ, khai trương, rất xấu."
    },
    "5": {
        "Kiến": "NGÀY KIẾN (Ngọ): Giáp Ngọ là Thiên xá, tuy hệ chuyển sát, nhưng dùng cái đó tốt vừa. Những ngày Ngọ còn lại mai táng cũng không lợi, nếu dùng chủ về bị gọi vì việc quan, khẩu thiệt, cô quả, cùng khổ, bệnh tật. Cái tháng năm gặp Ngọ đều hệ Thiên địa chuyển sát.",
        "Trừ": "NGÀY TRỪ (Mùi): Duy Ất Mùi là một ngày rất bất lợi, nếu lấy vợ, khai trương, nhập trạch, tu tạo, chủ về thoái nhân khẩu, sinh bệnh tật, tổn của. Ngoài ngày đó ra, những ngày Mùi còn lại, nếu làm việc nhỏ thì có thể dùng nhưng tốt vừa.",
        "Mãn": "NGÀY MÃN (Thân): Thiên phú, Thiên hỉ. Giáp Thân, Bính Thân, Mậu Thân, nên an táng, khởi tạo, hôn nhân, nhập trạch, khai trương xuất hành, thì tốt vừa, không nên động thổ. Canh Thân chỉ nên an táng, không nên tu tạo, nhập trạch, là ngày tây trầm, ngũ hành không có khí, không thể dùng, tuy là ngày táng, nhưng nguyệt lệnh không lợi.",
        "Bình": "NGÀY BÌNH (Dậu): Tiểu hồng sa, có Chu tước, Câu giảo, Đáo châu tinh, bị gọi vì việc quan, tổn trưởng, sơ, nhà xuống cảnh lênh đênh (linh đình), trăm việc không nên phạm cái đó, rất xấu.",
        "Định": "NGÀY ĐỊNH (Tuất): Giáp Tuất, Canh Tuất, Mậu Tuất, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân bảo tàng, Điền bồi tầng, Châu tụ thâm, Giá mã quy, Thánh du thuận, các tinh che, chiếu, rất tốt. Nếu khởi tạo, hưng công, động thổ, nhập trạch, khai trương, hôn nhân, mai táng, mọi việc thì được gia quan, tiến tài, sinh quý tử, thêm hoành tài. Duy Bính Tuất, Nhâm Tuất là hai ngày Sát nhập trung cung, tuy có cát tinh chiếu giải, nhưng cuối cùng thì khó được ích.",
        "Chấp": "NGÀY CHẤP (Hợi): Ngày Ất Hợi, nhỏ thì có thể tu sửa vì là tốt vừa. Đinh Hợi, Kỷ Hợi, cũng là tốt vừa. Tân Hợi là ngày âm phủ hỏa thoái. Quý Hợi là ngày cuối cùng của lục giáp, lại chính tứ phế, rất xấu.",
        "Phá": "NGÀY PHÁ (Tý): Thiên tặc, không nên cưới, đi gặp cha mẹ, tạo tác, an táng, nhập trạch, mọi việc phạm cái đó bị gọi về việc quan, tổn lục súc, điền sản không thu, rất xấu. Nhâm Tý là chính tứ phế, càng xấu, ngày đó trăm việc không lợi, phạm vào thụ tử.",
        "Nguy": "NGÀY NGUY (Sửu): Đinh Sửu, Quý Sửu không nên giá thú, đi gặp cha mẹ, tạo tác, an táng, nhập trạch, phạm cái đó thì điền sản không thu, tài vật thất thoát, hổ cắn, rắn hại, nhiều sự xấu. Những ngày Sửu còn lại cũng không tốt, tổn lục súc, bị gọi vì việc quan, trăm việc không lợi.",
        "Thành": "NGÀY THÀNH (Dần): Hoàng sa, thiên hỉ. Bính Dần là Thiên đức, Nguyệt đức. Canh Dần, Mậu Dần, Giáp Dần có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân khố lâu, Ngọc đường bảo tàng, là những cát tinh cùng chiếu, hưng công, động thổ, định tảng, buộc giàn, nhập trạch, khai trương, trong vòng 60 ngày, 120 ngày sẽ thêm của, tăng, nhà cửa từ đó giầu thịnh, đường đời thấy an khang, rất tốt. Cũng là Nhâm Dần của tháng tuy có sao tốt chiếu ở trong giữa, chỉ có Sát tinh tương khắc mà thành tốt vừa.",
        "Thâu": "NGÀY THÂU (Mão): Vãng vong, có Chu tước, Câu giảo, tiểu nhân hình hại, vạ nạn triền miên, bị gọi vì việc quan, khẩu thiệt, tổn lục súc, trăm việc không nên, rất xấu.",
        "Khai": "NGÀY KHAI (Thìn): Thiên thành. Bính Thìn có Nguyệt đức. Canh Thìn, Nhâm Thìn, có Hoàng la, Tử đàn, là những sao tốt che, chiếu, dùng ngày đó thì điền sản và lục súc hưng vượng, sinh quý tử, trăm việc rất tốt. Duy Mậu Thìn, Giáp Thìn là Sát tập trung cung, rất xấu.",
        "Bế": "NGÀY BẾ (Tị): Ất Tị, Tân Tị có Hoàng la, Tử đàn, che, chiếu, hưng công, tạo tác, động thổ, tu tạo đường trì, thương khố (làm hoặc sửa đường, ao, kho chứa), chuồng trại trâu, dê, hôn nhân, khai trương, xuất hành, nhiều ích lợi, nhà cửa, con cháu Xương (vượng) thịnh, điền sản bội thu, nhân khẩu an khang, rất tốt. Các ngày Tị còn lại không tốt."
    },
    "6": {
        "Kiến": "NGÀY KIẾN (Mùi): Ất Mùi là Sát nhập trung cung, không lợi cho những việc tu tạo, hôn nhân, nhập trạch, khai trương, lên quan, phạm cái đó không tốt, nhiễm ôn dịch, tổn nhân khẩu, mất của cải, rất xấu.",
        "Trừ": "NGÀY TRỪ (Thân): Giáp Thân có Thiên đức, Nguyệt đức, Hoàng la, Tử đàn tinh che, chiếu, lợi cho việc dựng cột, khởi tạo, an táng, động thổ, khai sơn, phạt cỏ, xuất hành, khai trương, trăm việc đều tốt. Các ngày Thân còn lại (Bính Thân, Nhâm Thân) cũng rất tốt. Duy có Bính Thân là một ngày ngũ hành không có khí, không thể dùng. Ngày Canh Thân dùng phải thận trọng.",
        "Mãn": "NGÀY MÃN (Dậu): Thiên hỉ, Thiên phú. Ất Dậu, Tân Dậu, phạt mộc, buộc giàn, đặt móng (định tảng), khởi tạo là tốt vừa. Ngày Kỷ Dậu là cửu thổ quỷ. Quý Dậu là ngày tiểu táng, lại phạm Hắc sát sở thuộc, cẩn thận có thể hung với việc cấp dùng. Ngày Đinh Dậu gặp ngày Mãn cũng bất lợi, đó là ngày hại, sợ rằng trong tốt có xấu, cuối cùng là không đẹp, dùng thì nên cẩn thận.",
        "Bình": "NGÀY BÌNH (Tuất): Có Chu tước, Câu giảo, lại phạm Đáo châu tinh, không lợi cho nhập trạch, hôn nhân, phạm vào cái đó chủ về bị gọi vì việc quan, không xấu nhiều. Duy ngày Giáp Tuất là một ngày Huyền nữ trộm sửa, tám hướng đều trắng, ngày đó ở 24 hướng chư thần chầu trời, có khí, có thể dùng.",
        "Định": "NGÀY ĐỊNH (Hợi): Kỷ Hợi là Hỏa tinh. Đinh Hợi có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, các tinh che, chiếu. Ất Hợi có Văn Xương trực nhật, nên xuất hành, nhập trạch, hôn nhân, nhập học, tu tạo, động thổ, tham quan (đi gặp quan), thấy quý, chiêu tài lộc (thu hút được tài lộc), sinh quý tử làm việc lớn thì phát lớn, làm việc nhỏ thì phát nhỏ. Lại nói Văn Xương Ất Hợi tại Ngọ, Văn Xương là Thái dương ở cung Ngọ, là ngôi của Thái dương, cho nên Có Văn Xương tinh trực nhật là đã rất tốt. Tân Hợi là phụ nhân chi kim, âm khí của kim thịnh. Quý Hợi là ngày cuối cùng của lục giáp, ngày ấy ngũ hành không có khí, hai ngày đó không nên dùng.",
        "Chấp": "NGÀY CHẤP (Tý): Hoàng sa. Bính Tý, Canh Tý lợi cho khởi tạo, hưng công, động thổ, làm kho chứa, nhập trạch, di đồ, khai trương, xuất hành. Mậu Tý là tốt vừa. Giáp Tý tuy là đầu của lục giáp, ở tháng giêng, tháng sáu, trực Thiên đức, Nguyệt đức nên không thể dùng Sát tự tử chi kim, ngũ hành không có khí, người bình thường không thể gặp được (bất năng dương), đó là Hắc sát ở phương Bắc, tướng quân chi khí. Nhâm Tý là mộc đả bảo bình, Bắc phương mộc dục chi địa, lại là chính tứ phế, càng kị dùng.",
        "Phá": "NGÀY PHÁ (Sửu): Tiểu hồng sa, ngày đó không có cát tinh (sao tốt), không thể mưu trù làm, là vạn bất đắc, khi đã cần chọn cẩn thận làm những việc nho nhỏ cấp dùng, nếu như khởi tạo, khai trương, xuất hành, hôn nhân, chủ về tổn lục súc, bị gọi vì việc quan. Đinh Sửu, Quý Sửu là Sát nhập trung cung, phạm cái đó sát nhân, xấu không thể nói.",
        "Nguy": "NGÀY NGUY (Dần): Mùa hạ là quỷ thần không vong. Giáp Dần Thiên đức, Nguyệt đức, Hoàng la, Tử đàn, Kim ngân khố lâu, Lộc bảo lâu, ích đế ngự tinh, che, chiếu, nhưng không lợi cho đi xa, định, tạo, nhập trạch, hôn nhân, cớ là Quỷ thần hung trạch chi ngưng, nếu khai sơn, mai táng, mưu trù trăm việc, trong vòng 60 ngày, 120 ngày sinh quý tử, gia nghiệp hưng vượng, có quý nhân tiếp dẫn, tiến sản nghiệp, rất tốt. Các ngày Dần còn lại tốt vừa.",
        "Thành": "NGÀY THÀNH (Mão): Thiên hỉ. Ất Mão, Tân Mão có Hoàng la, Tử đàn, Loan dữ (xe kiệu) bảo cái, Lộc âm, mã vãng, và Quỳnh ngọc Kim bảo, Thiên đế tụ bảo, mọi thứ sao tốt chiếu lâm, lợi cho nhập trạch, khai trương, xuất hành, hôn nhân, chủ về thêm con cháu, vượng điền sản, tiến hoành tài, tăng cư ốc (nhà ở), sinh quý tử, rất tốt. Các ngày Mão còn lại tốt vừa.",
        "Thâu": "NGÀY THÂU (Thìn): Giáp Thìn có Thiên đức, với Bính Thìn và Nhâm Thìn là ba ngày tốt vừa, lợi thâu mới sửa sang, chủ về thêm điền sản, vượng lục súc, cũng nên an táng, mưu trù. Là Canh Thìn làm Đằng sà (rắn biết bay), Chu tước. Không nên dùng Mậu Thìn vì cũng không tốt.",
        "Khai": "NGÀY KHAI (Tị): Thiên thành, Thiên tặc, Phúc sinh. Chỉ nên Ất Tị, Quý Tị thì hưng công, động thổ, nhập trạch, khai trương, là tốt vừa. Các ngày Tị còn lại bất lợi, phạm Nguyệt yếm, xấu.",
        "Bế": "NGÀY BẾ (Ngọ): Vãng vong. Giáp Ngọ là Thiên xá, không hệ chuyển sát, lại trực Nguyệt đức, sát, cũng chỉ có thể dùng việc nhỏ, bởi vì có Thụ tử, khí đó không chọn vẹn. Bính Ngọ là táng nhật, nếu mưu trù nho nhỏ thì cũng là tốt vừa. Nhâm Ngọ, Canh Ngọ táng nhỏ là tốt vừa, các việc còn lại khác thì không nên. Mậu Ngọ là trùng tang, không thể dùng."
    },
    "7": {
        "Kiến": "NGÀY KIẾN (Thân): Mậu Thân là Thiên xá (?). Giáp Thân, Nhâm Thân là ngày tỷ hòa, chỉ nên mai táng. Nhưng nguyệt kiến trên xấu, không thể dùng. Canh Thân là Sát nhập trung cung. Bính Thân là ngũ hành không có khí, càng xấu.",
        "Trừ": "NGÀY TRỪ (Dậu): Vãng vong. Ất Dậu không có sao xấu, khai sơn, phạt cỏ, an táng, hưng công, định tảng, buộc giàn, sửa mới, tạo tác, xuất hành, khai trương, nhập trạch, di cư là tốt vừa. Kỷ Dậu là Cửu thổ quỷ. Đinh Dậu xấu bại. Quý Dậu là Phục kiếm chi kim, Bắc phương Hắc sát tướng quân chi khí, tổn thương, xấu, ác. Tân Dậu là Thiên địa chuyển sát chính tứ phế, xấu.",
        "Mãn": "NGÀY MÃN (Tuất): Thiên phú, Thiên tặc. Bính Tuất, Nhâm Tuất là Chu tước, Câu giảo, Bạch hổ nhập trung cung, dùng ngày đó chủ về bị gọi vì việc quan, là không nhà cửa, suy bại, tổn nhân khẩu, tật bệnh triền miên, một lần dậy là một lần ngã, không rời giường chiếu, rất xấu, kị cái đó.",
        "Bình": "NGÀY BÌNH (Hợi): Đằng sà triền miên, tổn nhân khẩu, gặp việc quan, khẩu thiệt, vạ ngang, xấu.",
        "Định": "NGÀY ĐỊNH (Tý): Bính Tý là lúc nước sạch sẽ, lại gặp vượng địa, trực Hoàng la, Tử đàn tinh, che, chiếu, nên tu tạo, an táng, gặp gỡ người thân, khai trương, xuất hành, nhập trạch, hưng công, động thổ, rất tốt.",
        "Chấp": "NGÀY CHẤP (Sửu): Có Chu tước, Câu giảo, Đằng xà, Bạch hổ, chi sát, không nên dùng vào việc, phạm cái đó chủ thoái tài, hại nhân khẩu. Đinh Sửu, Quý Sửu là Sát nhập trung cung, đều không thể dùng, là ngày thụ mệnh.",
        "Phá": "NGÀY PHÁ (Dần): Giáp Dần là Chính tứ phế. Canh Dần, Mậu Dần, Bính Dần đều không tốt, mọi việc không nên, chủ có việc lên quan, thoái tài (giảm của), nhân khẩu thì nheo mắt nói nhỏ. Duy có 1 ngày Nhâm Dần có Nguyệt đức, chỉ lợi cho an táng.",
        "Nguy": "NGÀY NGUY (Mão): Ất Mão là chính tứ phế, xấu. Quý Mão, Đinh Mão, có Thiên đức, Hoàng la, Tử đàn, Kim ngân khố lâu, Ngọc đường tụ báu tinh, che, chiếu, nên khởi tạo, hôn nhân, giá thú, hưng công, động thổ, đặt móng, buộc giàn, khai trương, xuất hành, nhập trạch, thượng quan, làm kho chứa, chuồng trại trâu dê, chủ về gia nghiệp xương thịnh, nhân khẩu hưng vượng, sinh quý tử, tiến hoành tài, giàu sang lúa gạo. Các ngày Mão còn lại (Kỷ Mão, Tân Mão) là tốt vừa.",
        "Thành": "NGÀY THÀNH (Thìn): Thiên hỷ. Nhâm Thìn là Nguyệt đức, Canh Thìn, Bính Thìn là ba ngày táng, tốt vừa, không nên dùng vào việc lớn. Mậu Thìn, Giáp Thìn là Bạch hổ nhập trung cung, phạm cái đó trong 3-6-9 năm sách (?)gặp xấu.",
        "Thâu": "NGÀY THÂU (Tị): Tiểu hồng sa, có Chu tước, Câu giảo, Đằng xà, mọi việc bất lợi, phạm cái đó bị gọi vì việc quan, nhân khẩu rất xấu.",
        "Khai": "NGÀY KHAI (Ngọ): Hoàng sa. Nhâm Ngọ, Nguyệt đức, Bính Ngọ, Mậu Ngọ, là ba ngày lợi về gặp cha mẹ (thân), giá thú tu tạo, mai táng, khai trương, xuất hành, nhập trạch, động thổ, mọi việc đó trong vòng 60 ngày - 120 ngày tài tụ tập phúc dẫn về, quý nhân tiếp dẫn, điền sản hưng vượng, người thân thuộc (quyến nhân) an khang. Các ngày Ngọ còn lại (Giáp Ngọ) là tốt vừa. Riêng Canh Ngọ rất xấu.",
        "Bế": "NGÀY BẾ (Mùi): Thiên thành, Thiên tặc. Quý Mùi là Hỏa tinh, Thiên đức. Kỷ Mùi là Hỏa tinh, nên tu tạo nhập trạch, đặt móng, buộc giàn, xuất hành, khai trương, là tốt vừa. Tân Mùi, Đinh Mùi dùng vào việc nhỏ, cũng tốt vừa. Riêng Ất Mùi là Sát nhập trung cung, nếu như ở trong sân đóng đinh, gõ vật, ồn, ào, gọi to, kêu gào,v.v.., làm kinh động, Thần sát trừng phạt gia trưởng, tổn thương đầu, mặt, tay, chân, rất xấu, chủ về huyết quang (bị về chảy máu), tai nạn về nước sôi, lửa bỏng, không đến việc vạ, tiểu nhân chiếm hại, kiện cáo, cãi vã, liên miên. Phàm là Sát nhập trung cung, ngày đó đều nên phòng cái đó, chọn mà tránh."
    },
    "8": {
        "Kiến": "NGÀY KIẾN (Dậu): Tiểu hồng sa, Thiên thành, nhưng khi ngũ hành tự bại, trăm việc đều xấu, thêm phạm Thiên địa chuyển sát càng xấu, gặp việc quan, nguy khi đẻ, người con gái đẹp bị tai nạn về nước, con cháu bỏ trốn tan tác, bại gia không dứt.",
        "Trừ": "NGÀY TRỪ (Tuất): Ngày Canh Tuất là Thiên đức, Nguyệt đức. Mậu Tuất, Giáp Tuất nên hưng công, động thổ, nhập trạch, khai trương, hôn nhân, mọi việc dùng ngày đó là tốt vừa. Bính Tuất, Nhâm Tuất là Sát nhập trung cung, mọi việc không nên phạm, chủ về mất của, lãnh thoái, rất xấu.",
        "Mãn": "NGÀY MÃN (Hợi): Thiên phú. Ất Hợi là Văn Xương quý hiển tinh. Đinh Hợi, Kỷ Hợi có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Hoa thái, Thao trì, Lộc mã, là những tinh che, chiếu, lợi cho khởi tạo, hưng công, động thổ, buộc giàn, nhập trạch, hôn nhân, giá thú, khai trương, xuất hành, doanh (mưu trù), là mọi việc làm lớn thì phát lớn, làm nhỏ thì phát nhỏ, trong vòng 60 ngày, 120 ngày, chậm là đủ vòng năm lại thấy tài thành, nhà sinh con quý, vượng điền sản và lục súc. Tân Hợi là ngày âm phủ ương khiển (phóng thích hết), không phải là chỗ cho dương gian dùng. Quý Hợi là ngày tận cùng của lục giáp, ngũ hành không có khí, không thể dùng.",
        "Bình": "NGÀY BÌNH (Tý): Vãng vong, Chu tước, Câu giảo, bị gọi vì việc quan, tổn trạch trưởng (chủ trang trại). Bính Tý là khi nước trong sạch (khiết tinh). Canh Tý là hỏa tinh dựa vào Thiên đức, Nguyệt đức, và Mậu Tý nữa là ba ngày lợi cho khởi tạo, giá thú, nhập trạch, xuất hành, động thổ, dùng ngày đó rất tốt. Giáp Tý cũng có Hỏa tinh, nhưng là Bắc phương Hắc sát chi khí. Nhâm Tý là lúc thảo mộc điêu linh (tàn hại), ngũ hành không có khí, không thể dùng.",
        "Định": "NGÀY ĐỊNH (Sửu): Tân Sửu, Quý Sửu, Ất Sửu, Đinh Sửu là tốt vừa. Duy có Kỷ Sửu bất lợi cho mọi việc, không nên phạm cái đó, chủ về tật bệnh, sinh tai (vạ) xấu. Lưu ý: Có thuyết nói Đinh Sửu, Quý Sửu phạm Chu tước, Câu giảo, lại có Bạch hổ, Sát nhập trung cung, những cái đó xấu. Mà Tân Sửu thẳng mùa Thu là ngũ mộ, can chi không có khí, trăm việc kị dùng. Duy có Ất Sửu được cho là tốt.",
        "Chấp": "NGÀY CHẤP (Dần): Hoàng sa. Canh Dần là Thiên đức, Nguyệt đức, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân bảo tàng, Điền đường khố, Châu tụ, Lộc đới mã loan, và Cung Diệu chúng cát tinh chiếu lâm, nên khởi tạo, hôn nhân, động thổ, di cư, khai trương, xuất hành, vượng điền sản, tiến hoành tài, tăng lục súc, thêm nhân khẩu, và con cháu cải đổi nhà, sân, gia đạo hưng thịnh. Các ngày Dần còn lại cũng tốt vừa, có thể dùng. Riêng Giáp Dần là chính tứ phế, xấu.",
        "Phá": "NGÀY PHÁ (Mão): Thiên tặc. Quý Mão, Ất Mão, dùng vào việc thì tốt vừa. Các ngày Mão còn lại bất lợi, có Chu tước, Câu giảo, bị gọi vì việc quan, khẩu thiệt, kiêm phạm Nguyệt yếm là xấu. Ất Mão là chính tứ phế, cũng xấu.",
        "Nguy": "NGÀY NGUY (Thìn): Nhâm Thìn là lúc nước trong sạch. Bính Thìn nên phá đất, hưng công, khai trương, xuất hành, nhập trạch, hôn nhân, trăm việc thuận lợi, rất tốt. Mậu Thìn thảo mộc điêu linh. Canh Thìn là thiên địa cùng phế, không tốt. Giáp Thìn là Sát nhập trung cung, rất xấu.",
        "Thành": "NGÀY THÀNH (Tị): Thiên hỉ. Ất Tị, Kỷ Tị, có Tử đàn, Đới lộc, Dịch mã, tập tụ ở Khúc đường, mọi sao che, chiếu, nên hôn nhân, nhập trạch, hưng công, động thổ, khai trương, xuất hành, khởi tạo kho chứa, chuồng dê ngựa, đều rất tốt, trăm việc thuận lợi. Các ngày Tị còn lại là tốt vừa.",
        "Thâu": "NGÀY THÂU (Ngọ): Phúc tinh, có thể yên tĩnh. Kiến, Phá lại xung. Nhâm Ngọ là Hỏa tinh, dùng vào việc là tốt vừa. Duy Mậu Ngọ có Hỏa tinh, bất lợi. Canh Ngọ cũng bất lợi. Bính Ngọ động thổ, an táng, các loại mưu trù cũng là tốt vừa, phạm cái đó tổn con cháu, bị gọi vì việc quan, lãnh thoái, xấu.",
        "Khai": "NGÀY KHAI (Mùi): Đinh Mùi, Kỷ Mùi, Tân Mùi, Quý Mùi đều hệ tốt vừa, ngày đó chỉ nên phạt cỏ, mở núi (khai sơn), nhổ cây, an táng. Duy Ất Mùi trăm sự không lợi, xấu, phạm thì suy, bại, tử, tuyệt.",
        "Bế": "NGÀY BẾ (Thân): Mậu Thân là Thiên xá. Canh Thân, Bính Thân là Thiên đức, Nguyệt đức, nên xuất hành, sửa mới, động thổ, hưng công, đặt móng, buộc giàn, hôn nhân, nhập trạch, an táng, khai trương, làm kho chứa, chuồng trâu, dê, lợn, lợi con cháu, vượng điền sản, tiến hoành tài, nhà cửa phát đạt, tốt nhất (thượng cát). Giáp Thân, Nhâm Thân là tốt vừa."
    },
    "9": {
        "Kiến": "NGÀY KIẾN (Tuất): Bính Tuất là Thiên đức, Nguyệt đức, rất tốt. Các ngày Tuất còn lại bất lợi, nếu như dùng cái đó thì tổn của, bần cùng, rất xấu.",
        "Trừ": "NGÀY TRỪ (Hợi): Thiên thành. Ất Hợi, Đinh Hợi, nên khởi tạo, khai trương, giá thú, nhập trạch, xuất hành, động thổ, mọi việc rất tốt, con cháu hưng vượng, giàu sang mãi mãi. Quý Hợi là ngày cuối cùng của lục giáp, không thể dùng. Tân Hợi thuần là khí âm, không có chỗ dùng ở dương gian. Kỷ Hợi là Hỏa tinh, chỉ có khởi tạo, hôn thú là tốt.",
        "Mãn": "NGÀY MÃN (Tý): Hoàng sa, Thiên phú. Bính Tý là lúc nước trong sạch, kiêm có Thiên đức, Nguyệt đức, Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Tầng tiêu Liên châu (chuỗi nhọc trên tầng không), Lộc mã, là mọi sao tốt che, chiếu, nên hôn nhân, giá thú, khai trương, xuất hành, nhập trạch, hưng công, động thổ, đặt móng, buộc giàn, an táng, thêm nhà cửa, lợi con cháu, vượng điền sản, tiến lục súc, tăng hoành tài, trong vòng 60 ngày, 120 ngày sẽ thấy nghiệm. Nhâm Tý là Mộc đả bảo bình, thảo mộc (cây cỏ) điêu linh, rất xấu. Các ngày Tý còn lại không nên dùng việc. Giáp Tý có Hoàng la, Tử đàn là sao che, chiếu, có thể dùng.",
        "Bình": "NGÀY BÌNH (Sửu): Tiểu hồng sa, có Phúc tinh, bị Nguyệt kiến xung, phá, Chu tước, Câu giảo, bị gọi vì việc quan, kết chiếm mọi việc không lợi, nếu mưu trù nhỏ là trong đó có phúc sinh, cũng phải cẩn thận, có thể mượn dùng tạm, nhưng cuối cùng là không có lợi ích, dùng việc lớn vào cái đó thì thấy ngay là xấu. Đinh Sửu, Quý Sửu là sát nhập trung cung, càng xấu.",
        "Định": "NGÀY ĐỊNH (Dần): Bính Dần là Thiên đức, Nguyệt đức. Canh Dần, Mậu Dần có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, mọi sao tốt che, chiếu, nên khởi tạo, giá thú, xuất hành, nhập trạch, khai trương, nhất thiết mọi việc, chủ về tiến của, sinh quý tử, hưng gia đạo, vượng lục súc, rất tốt. Nhâm Dần phạm Nguyệt yếm, Thụ tử, không giải. Nhưng Bính Dần, Mậu Dần, Canh Dần, tuy 3 ngày đó phạm Nguyệt yếm nhưng trong đó có mọi sao tốt che, chiếu, cho nên rất tốt. Duy có Giáp Dần là chính tứ phế, xấu.",
        "Chấp": "NGÀY CHẤP (Mão): Tân Mão, Kỷ Mão có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, mọi sao tốt che, chiếu, nên giá thú, khai trương, xuất hành, nhập trạch, động thổ, sửa mới, khởi tạo, kho chứa, chủ về tiến của cải, tăng nhân khẩu, hưng gia đạo, vượng lục súc, rất tốt. Các ngày Mão còn lại là tốt vừa. Duy Ất Mão là chính tứ phế, xấu.",
        "Phá": "NGÀY PHÁ (Thìn): Vãng vong, Thiên đức, Nguyệt đức, tu tạo thì tốt ít, kị giá thú, khai trương, nhập trạch, đi ở (đồ cư), chủ về tổn lục súc, hao của, tụ tập khẩu thiệt. Những ngày Thìn còn lại càng không tốt. Mậu Thìn, Giáp Thìn là Sát nhập trung cung, rất xấu.",
        "Nguy": "NGÀY NGUY (Tị): Ất Tị nên phạt cỏ, an táng, hưng công, tạo tác, hôn thú, khai trương, nạp thái (nộp lễ vật xin cưới), di cư, xuất hành, nhập trạch, chủ về thêm con cháu, gia đạo hưng thịnh, phát tài, rất tốt. Những ngày Tị còn lại là tốt vừa, chỉ nên làm việc nhỏ thì có thể dùng, không lợi cho hôn nhân, chuyển chỗ ở, khai trương, xuất hành, phạm cái đó xấu, bại.",
        "Thành": "NGÀY THÀNH (Ngọ): Thiên hỷ. Bính Ngọ là Thiên đức, Nguyệt đức, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân khố lâu là các sao che, chiếu, nên khởi tạo, giá thú, nhập trạch, xuất hành, thương mại, khai trương, động thổ, an táng, tốt cả, nhất thiết phát tài, giàu sang, thêm đinh (đàn ông), người hầu (nô tỳ) tự đến, mưu vọng thì thắng, luôn luôn. Các ngày Ngọ còn lại là tốt vừa, đều có thể dùng.",
        "Thâu": "NGÀY THÂU (Mùi): Ất Mùi là ngày mộ. Tân Mùi, Quý Mùi là đặt móng, buộc giàn, là tốt vừa, nhưng không lợi cho khởi tạo, hôn nhân, xuất hành, nhập trạch, an táng, khai trương, thương khố (kho chứa), tổn, gặp ôn dịch. Ất Mùi là Chu tước, Câu giảo, Bạch hổ nhập trung cung. Đinh Mùi cũng xấu.",
        "Khai": "NGÀY KHAI (Thân): Thiên tặc. Mậu Thân là Thiên xá. Giáp Thân là khi nước trong sạch, có Hoàng la, Tử đàn, Tụ lộc đới mã, là những sao che, chiếu, nên an táng, làm sinh cơ. Nhưng ngày Tây trầm ngũ hành không có khí, huống hồ là đúng đêm mùa thu, khí hậu đó không nên khởi tạo, hôn nhân, nhập trạch, khai trương. Duy an táng thì rất tốt, thêm con cháu, nhà cửa phát đạt. Các ngày Thân còn lại là tốt vừa. Canh Thân là Bạch hổ nhập trung cung, phạm cái đó, sát nhân, càng xấu.",
        "Bế": "NGÀY BẾ (Dậu): Lúc đó là giao giới hai mùa thu và đông, đều là Sát thương. Kỷ Dậu là Cửu thổ quỷ. Ất Dậu là ngày an táng. Các ngày Dậu còn lại cũng nên dùng vào việc nhỏ, nhưng ngũ hành không có khí, tên là bạo tán sát trùng, ngày đó không nên khởi tạo, hôn nhân, nhập trạch, khai trương, dùng thì lãnh thoái, xấu."
    },
    "10": {
        "Kiến": "NGÀY KIẾN (Hợi): Không lợi cho khởi tạo, khai trương, hôn thú, nhập trạch, xuất hành, an táng, dùng cái đó bị gọi vì việc quan, tổn gia trưởng. Như Ất Hợi, Kỷ Hợi cũng chỉ nên làm nhỏ, mưu trù là có lộc. Tháng 10 ngày Kiến Hợi là không lợi.",
        "Trừ": "NGÀY TRỪ (Tý): Tuy là ngũ hành vượng tướng, nhưng giao giới giữa hai mùa thu và đông, thoạt đầu có chuyển sát là xấu. Ngạn ngữ nói rằng \"Chuyển Sát nhi thương vị khả khinh dụng\", nghĩa là Chuyển Sát mà hại chưa thể coi nhẹ mà dùng. Giáp Tý là Thiên xá, không phải là Chuyển Sát, dùng cái đó không hại.",
        "Mãn": "NGÀY MÃN (Sửu): Thiên phú, Thiên thành, Thiên tặc. Đinh Sửu, Quý Sửu là Sát nhập trung cung, không lợi cho khởi tạo, giá thú, cổ nhạc (trống khua nhạc cử) ồn ào, và cả tới việc các cách đóng đinh vào cửa (đinh môn các cách), làm kinh động thần Sát, tổn nhân đinh, hại lục súc. Những ngày Sửu còn lại cũng không nên dùng, chỉ có thể thanh hồn, nhập mộ. Phàm kim nhập cung Sửu là ngũ hành không có khí và phạm Nguyệt sát, Thiên tặc, xấu.",
        "Bình": "NGÀY BÌNH (Dần): Thiên phú, Thiên thành, có Đáo châu tinh, việc đến phủ quan mà sau đó tán. Duy có Giáp Dần là tốt trên hết. Nhâm Dần, Canh Dần là tốt vừa, sửa nho nhỏ thì có thể, làm lớn thì không nên. Những ngày Dần còn lại xấu.",
        "Định": "NGÀY ĐỊNH (Mão): Ất Mão là Thiên đức. Tân Mão, Kỷ Mão nên động thổ, hưng công, định tảng (đặt móng), đặt nóc (thượng lương), giá thú, nhập trạch, xuất hành, khai trương, dùng các ngày đó tốt, có cát diệu chiếu lâm. Những ngày Mão còn lại là xấu.",
        "Chấp": "NGÀY CHẤP (Thìn): Giáp Thìn là Thiên đức, Nguyệt đức, chỉ có thể sửa trộm, nếu khởi tạo, hưng công, giá thú, nhập trạch thì không lợi. Duy Bính Thìn có thể mở núi, phạt cỏ, an táng là tốt vừa. Mậu Thìn là Sát nhập trung cung, rất xấu.",
        "Phá": "NGÀY PHÁ (Tị): Tiểu hồng sa, lại phạm Chu tước, Câu giảo, mọi việc không nên. Duy Ất Tị có Thiên đức, mưu trù việc nho nhỏ thì có thể dùng, là tốt vừa. Đinh Tị là chính tứ phế, phạm cái đó thì lôi đình tan bại, việc ngang trái, mất của.",
        "Nguy": "NGÀY NGUY (Ngọ): Hoàng sa. Giáp Ngọ là Nguyệt đức, có Hoàng la, Tử đàn, Kim ngân khố lâu, mọi sao tốt che, chiếu, giá thú, khai trương, khởi tạo, động thổ, xuất hành, nhập trạch, an táng, rất tốt. Những ngày Ngọ còn lại là tốt vừa. Bính Ngọ là chính tứ phế, xấu.",
        "Thành": "NGÀY THÀNH (Mùi): Là tam hợp tích của nguyệt kiến. Ất Mùi là Sát nhập trung cung, kị xuất hành, an táng, giá thú, nhập trạch, khai trương, tu tạo. Duy Quý Mùi, hỏa tinh, Thủy nhập Tần châu, là quý nhân tinh, trực với Hoàng la, Tử đàn, Kim ngân Liên châu tinh, che, chiếu, nên khởi tạo, giá thú, nạp thái (nạp lễ vật khi xin cưới), vấn danh (lễ ăn hỏi), xuất hành, gặp quý nhân, gia trạch an ninh mãi mãi, chủ về cả năm, 100 ngày được quý nhân tiếp dẫn, tiến điền sản, sinh quý tử, phát phúc, tốt trên hết. Các ngày Mùi còn lại tốt vừa.",
        "Thâu": "NGÀY THÂU (Thân): Ngược lại phạm Đáo châu tinh (?), dùng cái đó bị gọi vì việc quan, tổn nhân khẩu. Duy Giáp Thân là khi nước trong sạch, thủy thổ trường sinh cư Thân (?), lợi cho an táng, hôn thú, xuất hành, nhập trạch, động thổ, khai trương, khởi tạo, mưu trù việc làm, chủ về trong vòng một năm, 100 ngày, quý nhân tự đến dẫn dậy, mọi việc toại ý. Canh Thân là Thụ tử, không có khí, lại là Sát nhập trung cung, phạm cái đó chủ sát nhân rất xấu.",
        "Khai": "NGÀY KHAI (Dậu): Ất Dậu là Thiên đức, là ngày táng, nên giá thú, gặp cha mẹ, nhập trạch, khởi tạo, khai trương, dùng các ngày đó là tốt nhất, chủ về tăng điền trạch, thụ chức, lộc, sáng cửa nhà (rạng rỡ), nô tỳ, nghĩa bộc tự đến xin làm công, mọi việc thuận toại ý. Kỷ Dậu là cửu thổ quỷ, an táng thì được, không nên dùng vào việc lớn. Các ngày Dậu còn lại là tốt vừa.",
        "Bế": "NGÀY BẾ (Tuất): Hỏa tinh. Giáp Tuất là Nguyệt đức, nên giá thú, khai trương, xuất hành, nhập trạch. Nhưng không lợi cho động thổ, khởi tạo, mai táng, di cư. Bính Tuất, Mậu Tuất, trăm việc đều xấu, bại."
    },
    "11": {
        "Kiến": "NGÀY KIẾN (Tý): Hỏa tinh. Giáp Tý là Thiên xá, là ngày tiến thần ích, bị Nguyệt Kiến xung phá, dùng cái đó chủ việc quan, phá bại, thỉnh Thiên xá không hợp với ngày đó. Bính Tý tuy trực lúc thủy vượng, Tiến thần làm địa chuyển, cũng cùng với Nguyệt Kiến tương xung, lúc đó thủy đoạn (nước hết), sức suối chảy cũng rất giảm, cuối cùng trong tốt có dấu hiệu xấu, chủ về Trước là có ích, sau là hại, nước hết bình vỡ.",
        "Trừ": "NGÀY TRỪ (Sửu): Thiên ôn. Ất Sửu là quê hương kim mộ, nên tụ họp với cha mẹ, khởi tạo, xuất hành, khai trương, động thổ, phạt mộc, khai sơn, có cát tinh che, chiếu, chủ quý nhân tiếp dẫn, mưu vọng toại ý. Những ngày Sửu còn lại là tốt vừa.",
        "Mãn": "NGÀY MÃN (Dần): Hoàng sa, Thiên phú, là thổ ôn, nhưng không nên động thổ. Vì có phúc tinh và Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, là các sao che, chiếu, nên hôn nhân, nhập trạch, khởi tạo, an táng, xuất hành, khai trương, trăm sự thuận toại ý. Nhâm Dần, Mậu Dần tốt trên hết. Bính Dần, Canh Dần tốt vừa. Giáp Dần là tốt vừa.",
        "Bình": "NGÀY BÌNH (Mão): Thiên tặc. Tân Mão, Hỏa tinh, lại phạm Chu tước, Câu giảo, dùng cái đó bị gọi vì việc quan, tổn tài vật, khởi việc tranh nhà cửa, thương tình nghĩa, lắm ác tật, xấu. Duy có một ngày Ất Mão là tốt vừa. Những ngày Mão còn lại chủ Phụ tử, huynh đệ bất nghĩa, tranh nhà cửa, tự thắt cổ, người ác cướp hại, phá tán, rất xấu.",
        "Định": "NGÀY ĐỊNH (Thìn): Tuy nói tốt, lại có Thiên la, Địa võng, là hung họa, quý nhân không gặp, mưu trù việc làm không lợi, Sát nhập trung cung, phạm cái đó sát nhân, xấu. Duy chỉ có Nhâm Thìn tuy phạm Quan phù, nhưng trong có Thiên đức, Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, là những sao che, chiếu, chỉ nên an táng, an môn (đặt cửa), giá thú, nhập trạch, những việc còn lại là ngày dùng thận trọng, nhưng vẫn là ngày Tử khí, phạm Quan phù, Kiếp sát, không phải cung Quan phù cùng đến phương đó, cho nên không lợi.",
        "Chấp": "NGÀY CHẤP (Tị): Ất Tị, Quý Tị, Kỷ Tị, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng là những sao che, chiếu, nên an táng, đặt cửa, hưng công, động thổ, giá thú, nhập trạch, xuất hành, khai trương, mưu trù làm mọi việc dùng ngày đó thêm nhân khẩu, vượng gia đạo, sinh quý tử, tăng điền địa, rất tốt. Tân Tị là tốt vừa. Đinh Tị là chính tứ phế, xấu.",
        "Phá": "NGÀY PHÁ (Ngọ): Thiên tặc. Nhâm Ngọ là Hỏa tinh, cạnh Nguyệt đức, cẩn thận, có thể nho nhỏ mà gấp thì dùng. Các ngày Ngọ còn lại thì dẫn đến ôn dịch, hại lục súc, và là ngày Nguyệt Kiến xung phá, xấu. Bính Ngọ là chính tứ phế, xấu.",
        "Nguy": "NGÀY NGUY (Mùi): Đinh Mùi là khi nước đại hải trong sạch, dùng cái đó trăm việc tốt hết. Kỷ Mùi mai táng là tốt vừa. Những ngày Mùi còn lại cũng tốt. Hai ngày đó (?) dùng việc chủ về tiến nhân khẩu, tăng điền sản, được tài ngang (hoành tài). Tân Mùi, Quý Mùi mọi việc bất lợi. Ất Mùi là Sát nhập trung cung, càng xấu.",
        "Thành": "NGÀY THÀNH (Thân): Thiên hỷ. Nhâm Thân là Thiên đức, Nguyệt đức. Giáp Thân, Mậu Thân là lúc ngũ hành không có khí, trực Hoàng la, Tử đàn, Kim ngân Bảo tàng khố lâu, là mọi sao tốt che, chiếu, nhất thiết làm là trăm phúc cùng đến (biền trăm), mọi việc thuận theo, sinh quý tử, vượng tài lộc. Ngày Canh Thân chỉ nên an táng và tu tạo nho nhỏ phía ngoài nhà chính thì có thể được, nếu như khởi tạo công lớn và hôn nhân, nhập trạch, khai trương thì thấy ngay vạ hung (xấu), chủ tổn gia trưởng, hại đàn bà và trẻ con, vì cái đó là ngũ hành không có khí, Sát thần tụ vào trung cung, Thiện nhân không thể giáng phúc. Ngày Bính Thân dùng việc thì sợ phạm quỷ khốc, hiệu như thần, càng nên cẩn thận cái đó.",
        "Thâu": "NGÀY THÂU (Dậu): Tiểu hồng sa, có Đáo châu tinh, việc đến quan mà sau đó tán, chỉ nên mai táng là tốt vừa, kị khởi tạo, khai trương, xuất hành, nhập trạch, giá thú, những việc trên phạm vào cung đó không lãnh thoái cũng tổn thương tài vật, xấu. Các ngày Dậu còn lại(?) cũng bất lợi.",
        "Khai": "NGÀY KHAI (Tuất): Vãng vong, tiểu táng cũng phải chuẩn bị đầy đủ và có vì cấp thì dùng ngày đó cũng chỉ tốt vừa. Như Bính Tuất, Nhâm Tuất là Sát nhập trung cung, mọi việc kị dùng. Giáp Tuất tám phương đều trắng, 24 hướng mọi thần trầu trời Nguyên nữ, trộm sửa ngày đó có thể dùng.",
        "Bế": "NGÀY BẾ (Hợi): Ất Hợi, Kỷ Hợi là những sao Văn Xương, Quý hiển, Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Bài châu (thẻ bằng ngọc), Thiên đăng, Tụ lộc Đới mã, Kim ngân khố lâu, Bảo tàng là những sao tốt che, chiếu, nên khởi tạo, mưu trù là trăm việc đều tốt, tám phương, 24 hướng đều lợi dụng cái đó, gia đạo phong dinh (nhiều thừa), sinh quý tử, tiến tài lộc, vượng lục súc. Đinh Hợi là ngày tốt vừa. Quý Hợi là ngày cuối cùng của lục giáp. Tân Hợi là ngày phụ nhân chi kim (vợ của kim), âm phủ quyết quán chi kỳ (kỳ ở âm phủ quyết trốn tránh). Một năm có bốn mùa, duy chỉ tháng hai là có ngày Tân Hợi tốt. Các ngày Hợi còn lại đều không thể dùng."
    },
    "12": {
        "Kiến": "NGÀY KIẾN (Sửu): Vãng vong, Hồng sa. Ất Sửu, Kỷ Sửu, nên khai sơn, phạt cỏ, hưng công, động thổ, giá thú, khai trương, xuất hành, nhập trạch, là ngày tốt vừa. Đinh Sửu là Sát nhập trung cung, không nên khua nhạc, trống, làm ồn ào, hôn nhân, mọi việc đó hại gia trưởng, trạch mẫu. Quý Sửu tuy vượng nhưng lục sát nhập trung cung, tổn thương nhân khẩu, xấu.",
        "Trừ": "NGÀY TRỪ (Dần): Canh Dần là Hỏa tinh, Thiên đức, Nguyệt đức. Giáp Dần, Bính Dần, Nhâm Dần, đều có Hỏa tinh, và Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Bảo liễu (xe ngọc quý), Khố châu phúc lộc, Văn Xương, Lộc mã quan ích là những sao tốt chiếu lâm, nên khởi tạo, hôn nhân, an táng, nhập trạch, khai trương, xuất hành, trăm việc thuận lợi, dùng ngày đó gia môn phát đạt, động thổ thấy tiến tài sản, tên là \"Đăng hổ bảng\". Mậu Dần cũng có Hỏa tinh nhưng là tốt vừa, ngày đó có thể dùng. Lưu ý: Theo \"Thích kỷ biện phương\", Dần ở tháng chạp là thiên tặc.",
        "Mãn": "NGÀY MÃN (Mão): Thiên phú, Thổ ôn, không nên động thổ, Thiên ôn một năm. Nếu dùng ngày Mão vào việc cưới, gặp cha mẹ, ăn hỏi, cũng tốt nhỏ nhưng có lục bất thành, lục bất hợp, cái đó ngừng. Duy có Tân Mão, tạo tác, hưng công, nhưng là tốt vừa.",
        "Bình": "NGÀY BÌNH (Thìn): Có Đáo châu tinh, việc đến quan mà sau đó tán. Duy có Nhâm Thìn nên mai táng, cưới vợ, gặp cha mẹ, hưng công, động thổ, xuất hành, nhập trạch là tốt vừa. Canh Thìn là Thiên đức, Nguyệt đức, nên làm nhỏ cũng tốt vừa. Mậu Thìn thảo mộc điêu linh, lúc đó ngũ hành không có khí, và là thoái tinh, lại kiêm Sát nhập trung cung, mọi việc bất lợi, xấu.",
        "Định": "NGÀY ĐỊNH (Tị): Thiên thành. Một thuyết nói là Quan phù tinh phi, nhưng nói là ngày Tử khí, nếu phương tu tạo trực với Phi cung Châu bách, Quan phù, thấy ngay, nếu như phương đó hợp với cát thần tụ tập sẽ cầu cái đó xấu dùng cũng được. Quý Tị tuy trực kim thủy trong sạch lúc đó. Hoặc có thể khai sơn, phạt cỏ, nhưng ngày đó tốt vừa, nếu cưới vợ chồng hoặc khai trương, xuất hành, nhập trạch, đặt móng, buộc giàn, lại là thiên thượng đại không vong nạp âm Tị, tuyệt không nên dùng. Đinh Tị là Chính tứ phế, xấu, một năm bốn mùa (quý), dùng ngày Tị chủ khẩu thiệt, tuy có Hỷ thần hoá giải cũng thuộc khó thoát. Như tốt thì vượng, xấu thì suy, tất cần xét rõ mệnh tuổi và sơn hướng không phạm xung khắc thì mới có thể dùng.",
        "Chấp": "NGÀY CHẤP (Ngọ): Canh Ngọ là Thiên đức, Nguyệt đức. Ngày đó có dùng giờ Canh Thìn, giờ đó gặp tam hợp chiếu Thân, Canh diện Canh lộc, cư Thân, Thìn mã trực Nhâm Thân đó sinh thành lộc mã nhật, sẽ là mã gặp lộc tinh, Thánh nhân nam diện tinh, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân bảo lâu, là những sao tốt che, chiếu, chủ về thêm con cháu, vượng gia môn, tiến điền sản, đạt lộc vị. Nhâm Ngọ cũng tốt. Các ngày Ngọ còn lại là tốt vừa. Bính Ngọ là chính tứ phế, xấu.",
        "Phá": "NGÀY PHÁ (Mùi): Đinh Mùi là \"Thủy cư cự mẫn\". Quý Mùi là \"Thủy nhập Tần châu nội\", \"Văn Xương quý hiển tinh\", động thổ, hưng công, xuất hành, nhập trạch, cưới vợ, khai trương, trăm việc rất tốt. Kỷ Mùi, Tân Mùi là Sát nhập trung cung, xấu. Ất Mùi cũng không lợi.",
        "Nguy": "NGÀY NGUY (Thân): Canh Thân là Thiên đức, Nguyệt đức, nên sửa chôn (?), an táng, mưu trù làm việc nho nhỏ là thứ cát (tốt vừa), nếu nhà to, có hàng nghìn, hàng trăm thợ trở lên, thì những việc khởi tạo, khai trương, nhập trạch, hôn nhân, lại không nên, vì là ngày Sát nhập trung cung, không lợi cho người gia trưởng. Mùa xuân tuy có Thiên đức, Nguyệt đức cũng không có tác dụng gì, tổn thương tay, chân, người thợ phá mất, tổn hoại khí huyết, làm lớn thì nhanh thấy, làm nhỏ thì ứng chậm. Nếu làm chuồng trâu, dê, lợn, thì trong 60 ngày, 120 ngày sẽ thấy hổ lang làm bị thương, lại sinh ôn dịch thời khí. Giáp Thân, khởi tạo, an táng tốt. Bính Thân, Nhâm Thân, chỉ nên mai táng.",
        "Thành": "NGÀY THÀNH (Dậu): Thiên hỉ. Ất Dậu, Quý Dậu là khi kim vượng. Ất Dậu là lúc nước trong sạch, có Hoàng la, Tử đàn, Kim ngân khố lâu, Tụ lộc đới mã, là những tinh che, chiếu, lợi cho việc cưới vợ, khởi tạo, khai trương, nhập trạch, an táng, là ngày tốt chọn vẹn, chủ về con cháu hưng vượng, trăm việc vừa lòng (xứng tâm). Đinh Dậu cũng thuộc kim vượng, chỉ có mai táng là tốt nhất, những việc còn lại là tốt vừa. Tân Dậu là Kim loan (nhạc ngựa bằng vàng), tốt vừa.",
        "Thâu": "NGÀY THÂU (Tuất): Có Đáo châu tinh, việc đến công đường mà sau đó tán. Canh Tuất có Thiên đức, Nguyệt đức, tám vị Kim tinh, có \"Nam tử chi hoan\" (cái hang của con trai), trước hết bị khẩu thiệt mà sau đó thì rất tốt. Giáp Tuất tám phương đều trắng, ở 24 hướng mọi thần đều chầu trời Nguyên nữ, ngày đó trộm sửa có thể dùng. Bính Tuất, Nhâm Tuất là Sát nhập trung cung, trăm việc đều kị. Ngày Mậu Tuất cũng không thể dùng.",
        "Khai": "NGÀY KHAI (Hợi): Thiên tặc, Nguyệt yếm. Ất Hợi có Văn Xương tinh. Kỷ Hợi có Hỏa tinh, có Văn Xương hiển quý tinh, nên đặt móng, buộc giàn, hôn nhân, khai trương, nhập trạch, xuất hành, trù mưu làm mọi việc, đều tốt trọn vẹn. Nên dùng giờ Mậu Thìn. Là ngày tuy phạm Thiên tặc nhưng lại có Thiên cẩu huyên, cho nên không hại vì thế là tốt trên hết. Đinh Hợi cũng nên dùng việc. Ngày Tân Hợi âm khí rất bạo, không phải là chỗ dùng của dương gian. Quý Hợi là ngày cùng của lục giáp, không thể dùng. Mà Kỷ Hợi vì có Hỏa tinh nên mọi việc có thể dùng.",
        "Bế": "NGÀY BẾ (Tý): Hoàng sa. Canh Tý tuy có Thiên đức, Nguyệt đức nhưng lại là lúc Thiên Địa chuyển Sát. Nhâm Tý, Bính Tý là Thiên địa chuyển trục, không nên hưng công, động thổ, phạm cái đó rất xấu. Giáp Tý là Thiên xá, là Tiến thần. Và Mậu Tý nên việc nhỏ thì có thể sửa là tốt, nếu dùng việc lớn thì xấu, vạ triền miên, chẳng lành, không biết Đại mã nạp âm, hung sát và Bắc phương tạo độc chi thần, thuần âm hắc sát chi khí, không phải là rất quý, không cảm thấy đáng dùng, phải cẩn thận."
    }
};


// *** DỮ LIỆU SAO TỐT (RÚT GỌN) ***
const DU_LIEU_SAO = [
  { id: 1, ten: "Thiên đức", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Đinh", "Thân", "Nhâm", "Tân", "Hợi", "Giáp", "Quý", "Dần", "Bính", "Ất", "Tị", "Canh"] },
  { id: 2, ten: "Thiên đức hợp", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Nhâm", "Tị", "Đinh", "Bính", "Dần", "Kỷ", "Mậu", "Hợi", "Tân", "Canh", "Thân", "Ất"] },
  { id: 3, ten: "Nguyệt đức", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Bính", "Giáp", "Nhâm", "Canh", "Bính", "Giáp", "Nhâm", "Canh", "Bính", "Giáp", "Nhâm", "Canh"] },
  { id: 4, ten: "Nguyệt đức hợp", yNghia: "Tốt mọi việc, kỵ tố tụng", loai: "mapping_thang", map: ["Tân", "Kỷ", "Đinh", "Ất", "Tân", "Kỷ", "Đinh", "Ất", "Tân", "Kỷ", "Đinh", "Ất"] },
  { id: 5, ten: "Thiên quý", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Giáp,Ất", "Giáp,Ất", "Giáp,Ất", "Bính,Đinh", "Bính,Đinh", "Bính,Đinh", "Canh,Tân", "Canh,Tân", "Canh,Tân", "Nhâm,Quý", "Nhâm,Quý", "Nhâm,Quý"] },
  { id: 6, ten: "Thiên phú", yNghia: "Tốt mọi việc, nhất là xây dựng, khai trương, an táng", loai: "mapping_thang", map: ["Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão"] },
  { id: 7, ten: "Sinh khí", yNghia: "Tốt mọi việc, nhất là làm nhà, động thổ, trồng cây", loai: "mapping_thang", map: ["Tý", "Sửu", "Dần", "Mão", "Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi"] },
  { id: 8, ten: "Thiên phúc", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Kỷ", "Mậu", null, "Tân,Quý", "Canh,Nhâm", null, "Ất", "Giáp", null, "Đinh", "Bính", null] },
  { id: 9, ten: "Thiên thành", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị"] },
  { id: 10, ten: "Thiên quan", yNghia: "Tốt mọi việc (Trùng Tư mệnh Hoàng đạo)", loai: "mapping_thang", map: ["Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân"] },
  { id: 11, ten: "Nguyệt Ân", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Bính", "Đinh", "Canh", "Kỷ", "Mậu", "Tân", "Nhâm", "Quý", "Canh", "Ất", "Giáp", "Tân"] },
  { id: 12, ten: "Nguyệt không", yNghia: "Tốt cho việc sửa nhà, làm giường", loai: "mapping_thang", map: ["Nhâm", "Canh", "Bính", "Giáp", "Nhâm", "Canh", "Bính", "Giáp", "Nhâm", "Canh", "Bính", "Giáp"] },
  { id: 13, ten: "Minh tinh", yNghia: "Tốt mọi việc (Trùng Thiên lao - Hắc đạo)", loai: "mapping_thang", map: ["Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ"] },
  { id: 14, ten: "Thành Tâm", yNghia: "Tốt mọi việc, nhất là cầu phúc, tế tự", loai: "mapping_thang", map: ["Hợi", "Tị", "Tý", "Ngọ", "Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất"] },
  { id: 15, ten: "Ngũ phú", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Hợi", "Dần", "Tị", "Thân", "Hợi", "Dần", "Tị", "Thân", "Hợi", "Dần", "Tị", "Thân"] },
  { id: 16, ten: "Phúc sinh", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Dậu", "Mão", "Tuất", "Thìn", "Hợi", "Tị", "Tý", "Ngọ", "Sửu", "Mùi", "Dần", "Thân"] },
  { id: 17, ten: "Cát Khánh", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Dậu", "Dần", "Hợi", "Thìn", "Sửu", "Ngọ", "Mão", "Thân", "Tị", "Tuất", "Mùi", "Tý"] },
  { id: 18, ten: "Âm đức", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Dậu", "Mùi", "Tị", "Mão", "Sửu", "Hợi", "Dậu", "Mùi", "Tị", "Mão", "Sửu", "Hợi"] },
  { id: 19, ten: "U vi tinh", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Hợi", "Thìn", "Sửu", "Ngọ", "Mão", "Thân", "Tị", "Tuất", "Mùi", "Tý", "Dậu", "Dần"] },
  { id: 20, ten: "Mãn đức tinh", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Dần", "Mùi", "Thìn", "Dậu", "Ngọ", "Hợi", "Thân", "Sửu", "Tuất", "Mão", "Tý", "Tị"] },
  { id: 21, ten: "Tuế hợp", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Sửu", "Tý", "Hợi", "Tuất", "Dậu", "Thân", "Mùi", "Ngọ", "Tị", "Thìn", "Mão", "Dần"] },
  { id: 22, ten: "Nguyệt giải", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Thân", "Thân", "Dậu", "Dậu", "Tuất", "Tuất", "Hợi", "Hợi", "Ngọ", "Ngọ", "Mùi", "Mùi"] },
  { id: 23, ten: "Quan nhậu", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: [null, "Mão", null, null, "Ngọ", null, null, "Dậu", null, null, "Tý", null] },
  { id: 24, ten: "Tam hợp", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Ngọ,Tuất", "Mùi,Hợi", "Thân,Tý", "Dậu,Sửu", "Tuất,Dần", "Hợi,Mão", "Tý,Thìn", "Sửu,Tị", "Dần,Ngọ", "Mão,Mùi", "Thìn,Thân", "Tị,Dậu"] },
  { id: 25, ten: "Lục hợp", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Hợi", "Tuất", "Dậu", "Thân", "Mùi", "Ngọ", "Tị", "Thìn", "Mão", "Dần", "Sửu", "Tý"] },
  { id: 26, ten: "Đại hồng sa", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Tý,Sửu", "Tý,Sửu", "Tý,Sửu", "Thìn,Tị", "Thìn,Tị", "Thìn,Tị", "Ngọ,Mùi", "Ngọ,Mùi", "Ngọ,Mùi", "Thân,Tuất", "Thân,Tuất", "Thân,Tuất"] },
  { id: 27, ten: "Dân nhật, Thời đức", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Ngọ", "Ngọ", "Ngọ", "Dậu", "Dậu", "Dậu", "Tý", "Tý", "Tý", "Mão", "Mão", "Mão"] },
  { id: 28, ten: "Hoàng ân", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Tuất", "Sửu", "Dần", "Tị", "Dậu", "Mão", "Tý", "Ngọ", "Hợi", "Thìn", "Thân", "Mùi"] },
  { id: 29, ten: "Thanh Long", yNghia: "Hoàng đạo tốt mọi việc", loai: "mapping_thang", map: ["Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất"] },
  { id: 30, ten: "Minh đường", yNghia: "Hoàng đạo tốt mọi việc", loai: "mapping_thang", map: ["Sửu", "Mão", "Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị", "Mùi", "Dậu", "Hợi"] },
  { id: 31, ten: "Kim đường", yNghia: "Hoàng đạo tốt mọi việc", loai: "mapping_thang", map: ["Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão"] },
  { id: 32, ten: "Ngọc đường", yNghia: "Hoàng đạo tốt mọi việc", loai: "mapping_thang", map: ["Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị"] },
  { id: 33, ten: "Thiên hỷ", yNghia: "Tốt mọi việc, nhất là hôn thú", loai: "mapping_thang", map: ["Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu"] },
  { id: 34, ten: "Ích hậu", yNghia: "Tốt mọi việc, nhất là giá thú", loai: "mapping_thang", map: ["Tý", "Ngọ", "Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất", "Tị", "Hợi"] },
  { id: 35, ten: "Tục thế", yNghia: "Tốt mọi việc, nhất là giá thú", loai: "mapping_thang", map: ["Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất", "Tị", "Hợi", "Ngọ", "Tý"] },
  { id: 36, ten: "Yếu yên (Thiên quý)", yNghia: "Tốt mọi việc, nhất là giá thú", loai: "mapping_thang", map: ["Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất", "Tị", "Hợi", "Ngọ", "Tý", "Mùi", "Sửu"] },
  { id: 37, ten: "Dịch mã", yNghia: "Tốt mọi việc, nhất là xuất hành", loai: "mapping_thang", map: ["Thân", "Tị", "Dần", "Hợi", "Thân", "Tị", "Dần", "Hợi", "Thân", "Tị", "Dần", "Hợi"] },
  { id: 38, ten: "Thiên xá", yNghia: "Tốt cho tế tự, giải oan, trừ được các sao xấu. Chỉ kiêng kỵ động thổ", loai: "mapping_thang", map: ["Mậu Dần", "Mậu Dần", "Mậu Dần", "Giáp Ngọ", null, "Giáp Ngọ", "Mậu Thân", "Mậu Thân", "Mậu Thân", "Giáp Tý", null, "Giáp Tý"] },
  { id: 39, ten: "Thiên mã (Lộc mã)", yNghia: "Tốt cho việc xuất hành, giao dịch, cầu tài lộc (Trùng với Bạch hổ - xấu)", loai: "mapping_thang", map: ["Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn"] },
  { id: 40, ten: "Thiên tài", yNghia: "Tốt cho việc cầu tài lộc, khai trương (Trùng với Kim quỹ Hoàng đạo)", loai: "mapping_thang", map: ["Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần"] },
  { id: 41, ten: "Địa tài", yNghia: "Tốt cho việc cầu tài lộc, khai trương (Trùng ngày Bảo Quang Hoàng đạo)", loai: "mapping_thang", map: ["Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão"] },
  { id: 42, ten: "Nguyệt tài", yNghia: "Tốt cho việc cầu tài lộc, khai trương, xuất hành, di chuyển, giao dịch", loai: "mapping_thang", map: ["Ngọ", "Tị", "Tị", "Mùi", "Dậu", "Hợi", "Ngọ", "Tị", "Tị", "Mùi", "Dậu", "Hợi"] },
  { id: 43, ten: "Lộc khố, Thiên phú", yNghia: "Tốt cho việc cầu tài lộc, khai trương, giao dịch", loai: "mapping_thang", map: ["Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão"] },
  { id: 44, ten: "Kinh tâm", yNghia: "Tốt với tang tế", loai: "mapping_thang", map: ["Mùi", "Sửu", "Thân", "Dần", "Dậu", "Mão", "Tuất", "Thìn", "Hợi", "Tị", "Tý", "Ngọ"] },
  { id: 45, ten: "Hoạt điệu", yNghia: "Tốt, nhưng gặp Thụ tử thì xấu", loai: "mapping_thang", map: ["Tị", "Tuất", "Mùi", "Tý", "Dậu", "Dần", "Hợi", "Thìn", "Sửu", "Ngọ", "Mão", "Thân"] },
  { id: 46, ten: "Giải thần", yNghia: "Tốt cho việc tế tự, tố tụng, giải oan (trừ được các sao xấu)", loai: "mapping_thang", map: ["Thân", "Thân", "Tuất", "Tuất", "Tý", "Tý", "Dần", "Dần", "Thìn", "Thìn", "Ngọ", "Ngọ"] },
  { id: 47, ten: "Phổ hộ", yNghia: "Tốt cho việc làm phúc, giá thú, xuất hành", loai: "mapping_thang", map: ["Thân", "Dần", "Dậu", "Mão", "Tuất", "Thìn", "Hợi", "Tị", "Tý", "Ngọ", "Sửu", "Mùi"] },
  { id: 48, ten: "Mẫu thương", yNghia: "Tốt về cầu tài lộc, khai trương", loai: "mapping_thang", map: ["Hợi,Tý", "Hợi,Tý", "Hợi,Tý", "Dần,Mão", "Dần,Mão", "Dần,Mão", "Thìn,Sửu", "Thìn,Sửu", "Thìn,Sửu", "Thân,Dậu", "Thân,Dậu", "Thân,Dậu"] },
  { id: 49, ten: "Phúc hậu", yNghia: "Tốt về cầu tài lộc, khai trương", loai: "mapping_thang", map: ["Dần", "Dần", "Dần", "Tị", "Tị", "Tị", "Thân", "Thân", "Thân", "Hợi", "Hợi", "Hợi"] },
  { id: 50, ten: "Thiên ân", yNghia: "Tốt mọi việc", loai: "co_dinh", ngay: ["Giáp Tý", "Ất Sửu", "Bính Dần", "Đinh Mão", "Mậu Thìn", "Kỷ Mão", "Canh Thìn", "Canh Tuất", "Tân Tị", "Tân Hợi", "Nhâm Ngọ", "Nhâm Thân", "Quý Sửu", "Quý Mùi"] },
  { id: 51, ten: "Thiên Thụy", yNghia: "Tốt mọi việc", loai: "co_dinh", ngay: ["Mậu Dần", "Kỷ Mão", "Canh Dần", "Tân Tị", "Nhâm Tý"] },
  { id: 52, ten: "Ngũ hợp", yNghia: "Tốt mọi việc", loai: "co_dinh", ngay: ["Mậu Ngọ", "Kỷ Mùi", "Tân Dậu", "Quý Hợi"] },
  { id: 53, ten: "Sát cống", yNghia: "Đại cát, giải được sao xấu (trừ Kim thần sát)", loai: "nhom_thang", duLieu: { nhom_1_4_7_10: ["Đinh Mão", "Bính Tý", "Ất Dậu", "Giáp Ngọ", "Quý Mão", "Nhâm Tý", "Tân Dậu"], nhom_2_5_8_11: ["Bính Dần", "Ất Hợi", "Giáp Thân", "Quý Tị", "Nhâm Dần", "Tân Hợi", "Canh Thân"], nhom_3_6_9_12: ["Ất Sửu", "Giáp Tuất", "Quý Mùi", "Nhâm Thìn", "Tân Sửu", "Canh Tuất", "Kỷ Mùi"] }},
  { id: 54, ten: "Trực tinh", yNghia: "Đại cát, giải được sao xấu (trừ Kim thần sát)", loai: "nhom_thang", duLieu: { nhom_1_4_7_10: ["Mậu Thìn", "Đinh Sửu", "Bính Tuất", "Ất Mùi", "Giáp Thìn", "Quý Sửu", "Nhâm Tuất"], nhom_2_5_8_11: ["Đinh Mão", "Bính Tý", "Ất Dậu", "Giáp Ngọ", "Quý Mão", "Nhâm Tý", "Tân Dậu"], nhom_3_6_9_12: ["Bính Dần", "Ất Hợi", "Giáp Thân", "Quý Tị", "Nhâm Dần", "Tân Hợi", "Canh Thân"] }},
  { id: 55, ten: "Nhơn chuyên", yNghia: "Đại cát, giải được sao xấu (trừ Kim thần sát)", loai: "nhom_thang", duLieu: { nhom_1_4_7_10: ["Tân Mùi", "Canh Thìn", "Kỷ Sửu", "Mậu Tuất", "Đinh Mùi", "Bính Thìn"], nhom_2_5_8_11: ["Canh Ngọ", "Kỷ Mão", "Mậu Tý", "Đinh Dậu", "Bính Ngọ", "Ất Mão"], nhom_3_6_9_12: ["Kỷ Tị", "Mậu Dần", "Đinh Hợi", "Bính Thân", "Ất Tị", "Giáp Dần", "Quý Hợi"] }}
];

// *** DỮ LIỆU SAO XẤU (RÚT GỌN) ***
const DU_LIEU_SAO_XAU = [
  { id: 1, ten: "Địa phá", yNghia: "Kỵ xây dựng", loai: "mapping_thang", map: ["Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất"] },
  { id: 2, ten: "Thổ phủ", yNghia: "Kỵ xây dựng, động thổ", loai: "mapping_thang", map: ["Dần", "Mão", "Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu"] },
  { id: 3, ten: "Thổ ôn (Thiên cẩu)", yNghia: "Kỵ xây dựng, đào ao giếng, tế tự", loai: "mapping_thang", map: ["Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão"] },
  { id: 4, ten: "Thiên ôn", yNghia: "Kỵ xây dựng", loai: "mapping_thang", map: ["Mùi", "Tuất", "Thìn", "Dần", "Ngọ", "Tý", "Dậu", "Thân", "Tị", "Hợi", "Sửu", "Mão"] },
  { id: 5, ten: "Thụ tử", yNghia: "Xấu mọi việc, trừ săn bắn", loai: "mapping_thang", map: ["Tuất", "Thìn", "Hợi", "Tị", "Tý", "Ngọ", "Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu"] },
  { id: 6, ten: "Kiếp sát", yNghia: "Kỵ xây dựng, xuất hành, giá thú, an táng", loai: "mapping_thang", map: ["Hợi", "Thân", "Tị", "Dần", "Hợi", "Thân", "Tị", "Dần", "Hợi", "Thân", "Tị", "Dần"] },
  { id: 7, ten: "Hà Khôi, Cẩu Giảo", yNghia: "Kỵ khởi công, xấu mọi việc", loai: "mapping_thang", map: ["Hợi", "Ngọ", "Sửu", "Thân", "Mão", "Tuất", "Tị", "Tý", "Mùi", "Dần", "Dậu", "Thìn"] },
  { id: 8, ten: "Vãng Vong (Thổ kỵ)", yNghia: "Kỵ động thổ, xuất hành, giá thú, cầu tài", loai: "mapping_thang", map: ["Dần", "Tị", "Thân", "Hợi", "Mão", "Ngọ", "Dậu", "Tý", "Thìn", "Mùi", "Tuất", "Sửu"] },
  { id: 9, ten: "Trùng tang", yNghia: "Kỵ khởi công, giá thú, an táng", loai: "mapping_thang", map: ["Giáp", "Ất", "Kỷ", "Bính", "Đinh", "Kỷ", "Canh", "Tân", "Kỷ", "Nhâm", "Quý", "Kỷ"] },
  { id: 10, ten: "Thiên địa chính chuyển", yNghia: "Kỵ động thổ", loai: "mapping_thang", map: ["Quý Mão", "Quý Mão", "Quý Mão", "Bính Ngọ", "Bính Ngọ", "Bính Ngọ", "Đinh Dậu", "Đinh Dậu", "Đinh Dậu", "Canh Tý", "Canh Tý", "Canh Tý"] },
  { id: 11, ten: "Thiên địa chuyển sát", yNghia: "Kỵ động thổ", loai: "mapping_thang", map: ["Ất Mão,Tân Mão", "Ất Mão,Tân Mão", "Ất Mão,Tân Mão", "Bính Ngọ,Mậu Ngọ", "Bính Ngọ,Mậu Ngọ", "Bính Ngọ,Mậu Ngọ", "Tân Dậu,Quý Dậu", "Tân Dậu,Quý Dậu", "Tân Dậu,Quý Dậu", "Nhâm Tý,Bính Tý", "Nhâm Tý,Bính Tý", "Nhâm Tý,Bính Tý"] },
  { id: 12, ten: "Thổ cẩm", yNghia: "Kỵ xây dựng, an táng", loai: "mapping_thang", map: ["Hợi", "Hợi", "Hợi", "Dần", "Dần", "Dần", "Tị", "Tị", "Tị", "Thân", "Thân", "Thân"] },
  { id: 13, ten: "Nguyệt kiến chuyển sát", yNghia: "Kỵ động thổ", loai: "mapping_thang", map: ["Mão", "Mão", "Mão", "Ngọ", "Ngọ", "Ngọ", "Dậu", "Dậu", "Dậu", "Tý", "Tý", "Tý"] },
  { id: 14, ten: "Thiên cương (Diệt môn)", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tị", "Tý", "Mùi", "Dần", "Dậu", "Thìn", "Hợi", "Ngọ", "Sửu", "Thân", "Mão", "Tuất"] },
  { id: 15, ten: "Thiên tại", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Dậu", "Ngọ", "Mão", "Tý", "Dậu", "Ngọ", "Mão", "Tý", "Dậu", "Ngọ", "Mão", "Tý"] },
  { id: 16, ten: "Thiên ngục, Thiên hỏa", yNghia: "Xấu mọi việc, xấu về lợp nhà", loai: "mapping_thang", map: ["Tý", "Mão", "Ngọ", "Dậu", "Tý", "Mão", "Ngọ", "Dậu", "Tý", "Mão", "Ngọ", "Dậu"] },
  { id: 17, ten: "Tiểu hồng sa", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tị", "Dậu", "Sửu", "Tị", "Dậu", "Sửu", "Tị", "Dậu", "Sửu", "Tị", "Dậu", "Sửu"] },
  { id: 18, ten: "Đại hao (Tử khí)", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tị"] },
  { id: 19, ten: "Hoang vu", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tị,Dậu,Sửu", "Tị,Dậu,Sửu", "Tị,Dậu,Sửu", "Thân,Tý,Thìn", "Thân,Tý,Thìn", "Thân,Tý,Thìn", "Hợi,Mão,Mùi", "Hợi,Mão,Mùi", "Hợi,Mão,Mùi", "Dần,Ngọ,Tuất", "Dần,Ngọ,Tuất", "Dần,Ngọ,Tuất"] },
  { id: 20, ten: "Băng tiêu ngọa hãm", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tị", "Tý", "Sửu", "Dần", "Mão", "Tuất", "Hợi", "Ngọ", "Mùi", "Thân", "Dậu", "Thìn"] },
  { id: 21, ten: "Sát chủ", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tị", "Tý", "Mùi", "Mão", "Thân", "Tuất", "Sửu", "Hợi", "Ngọ", "Dậu", "Dần", "Thìn"] },
  { id: 22, ten: "Nguyệt hình", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tị", "Tý", "Thìn", "Thân", "Ngọ", "Sửu", "Dần", "Dậu", "Mùi", "Hợi", "Mão", "Tuất"] },
  { id: 23, ten: "Tội chỉ", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Ngọ", "Tý", "Mùi", "Sửu", "Thân", "Dần", "Dậu", "Mão", "Tuất", "Thìn", "Hợi", "Tị"] },
  { id: 24, ten: "Nguyệt phá", yNghia: "Xấu về xây dựng nhà", loai: "mapping_thang", map: ["Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tị", "Ngọ", "Mùi"] },
  { id: 25, ten: "Lôi công", yNghia: "Xấu về xây dựng nhà", loai: "mapping_thang", map: ["Dần", "Hợi", "Tị", "Thân", "Dần", "Hợi", "Tị", "Thân", "Dần", "Hợi", "Tị", "Thân"] },
  { id: 26, ten: "Phi ma sát", yNghia: "Kỵ giá thú, nhập trạch", loai: "mapping_thang", map: ["Tý", "Dậu", "Ngọ", "Mão", "Tý", "Dậu", "Ngọ", "Mão", "Tý", "Dậu", "Ngọ", "Mão"] },
  { id: 27, ten: "Chu tước hắc đạo", yNghia: "Kỵ nhập trạch, khai trương", loai: "mapping_thang", map: ["Mão", "Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị", "Mùi", "Dậu", "Hợi", "Sửu"] },
  { id: 28, ten: "Lỗ ban sát", yNghia: "Kỵ khởi tạo", loai: "mapping_thang", map: ["Tý", "Tý", "Tý", "Mão", "Mão", "Mão", "Ngọ", "Ngọ", "Ngọ", "Dậu", "Dậu", "Dậu"] },
  { id: 29, ten: "Phủ đầu sát", yNghia: "Kỵ khởi tạo", loai: "mapping_thang", map: ["Thìn", "Thìn", "Thìn", "Mùi", "Mùi", "Mùi", "Dậu", "Dậu", "Dậu", "Tý", "Tý", "Tý"] },
  { id: 30, ten: "Tam tang", yNghia: "Kỵ khởi tạo, giá thú, an táng", loai: "mapping_thang", map: ["Thìn", "Thìn", "Thìn", "Mùi", "Mùi", "Mùi", "Tuất", "Tuất", "Tuất", "Sửu", "Sửu", "Sửu"] },
  { id: 31, ten: "Ngũ hư", yNghia: "Kỵ khởi tạo, giá thú, an táng", loai: "mapping_thang", map: ["Tị", "Dậu", "Sửu", "Thân", "Tý", "Thìn", "Hợi", "Mão", "Mùi", "Dần", "Ngọ", "Tuất"] },
  { id: 32, ten: "Thiên tặc", yNghia: "Xấu khởi tạo, động thổ, nhập trạch, khai trương", loai: "mapping_thang", map: ["Thìn", "Dậu", "Dần", "Mùi", "Tý", "Tị", "Tuất", "Mão", "Thân", "Sửu", "Ngọ", "Hợi"] },
  { id: 33, ten: "Địa tặc", yNghia: "Xấu khởi tạo, an táng, động thổ, xuất hành", loai: "mapping_thang", map: ["Sửu", "Tý", "Hợi", "Tuất", "Dậu", "Thân", "Mùi", "Ngọ", "Tị", "Thìn", "Mão", "Dần"] },
  { id: 34, ten: "Hỏa tai", yNghia: "Xấu làm nhà, lợp nhà", loai: "mapping_thang", map: ["Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất", "Tị", "Hợi", "Ngọ", "Tý"] },
  { id: 35, ten: "Lục bất thành", yNghia: "Xấu xây dựng", loai: "mapping_thang", map: ["Dần", "Ngọ", "Tuất", "Tị", "Dậu", "Sửu", "Thân", "Tý", "Thìn", "Hợi", "Mão", "Mùi"] },
  { id: 36, ten: "Nguyệt hỏa độc hỏa", yNghia: "Xấu lợp nhà, làm bếp", loai: "mapping_thang", map: ["Tị", "Thìn", "Mão", "Dần", "Sửu", "Tý", "Hợi", "Tuất", "Dậu", "Thân", "Mùi", "Ngọ"] },
  { id: 37, ten: "Tiểu hao", yNghia: "Xấu kinh doanh, cầu tài", loai: "mapping_thang", map: ["Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn"] },
  { id: 38, ten: "Nguyệt yếm đại họa", yNghia: "Xấu xuất hành, giá thú", loai: "mapping_thang", map: ["Tuất", "Dậu", "Thân", "Mùi", "Ngọ", "Tị", "Thìn", "Mão", "Dần", "Sửu", "Tý", "Hợi"] },
  { id: 39, ten: "Nguyệt hư (Nguyệt sát)", yNghia: "Xấu giá thú, mở cửa hàng", loai: "mapping_thang", map: ["Sửu", "Tuất", "Mùi", "Thìn", "Sửu", "Tuất", "Mùi", "Thìn", "Sửu", "Tuất", "Mùi", "Thìn"] },
  { id: 40, ten: "Hoàng sa", yNghia: "Xấu xuất hành", loai: "mapping_thang", map: ["Ngọ", "Dần", "Tý", "Ngọ", "Dần", "Tý", "Ngọ", "Dần", "Tý", "Ngọ", "Dần", "Tý"] },
  { id: 41, ten: "Nhân cách", yNghia: "Xấu giá thú, khởi tạo", loai: "mapping_thang", map: ["Dậu", "Mùi", "Tị", "Mão", "Sửu", "Hợi", "Dậu", "Mùi", "Tị", "Mão", "Sửu", "Hợi"] },
  { id: 42, ten: "Thần cách", yNghia: "Kỵ tế tự", loai: "mapping_thang", map: ["Tị", "Mão", "Sửu", "Hợi", "Dậu", "Mùi", "Tị", "Mão", "Sửu", "Hợi", "Dậu", "Mùi"] },
  { id: 43, ten: "Ngũ quỷ", yNghia: "Kỵ xuất hành", loai: "mapping_thang", map: ["Ngọ", "Dần", "Thìn", "Dậu", "Mão", "Thân", "Sửu", "Tị", "Tý", "Hợi", "Mùi", "Tuất"] },
  { id: 44, ten: "Cửu không", yNghia: "Kỵ xuất hành, cầu tài, khai trương", loai: "mapping_thang", map: ["Thìn", "Sửu", "Tuất", "Mùi", "Mão", "Tý", "Dậu", "Ngọ", "Dần", "Hợi", "Thân", "Tị"] },
  { id: 45, ten: "Trùng phục", yNghia: "Kỵ giá thú, an táng", loai: "mapping_thang", map: ["Canh", "Tân", "Kỷ", "Nhâm", "Quý", "Mậu", "Giáp", "Ất", "Kỷ", "Nhâm", "Quý", "Mậu"] },
  { id: 46, ten: "Bạch hổ", yNghia: "Kỵ mai táng (Trùng ngày Thiên giải)", loai: "mapping_thang", map: ["Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn"] },
  { id: 47, ten: "Huyền vũ", yNghia: "Kỵ mai táng", loai: "mapping_thang", map: ["Dậu", "Hợi", "Sửu", "Mão", "Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị", "Mùi"] },
  { id: 48, ten: "Câu trận", yNghia: "Kỵ mai táng", loai: "mapping_thang", map: ["Hợi", "Sửu", "Mão", "Tị", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tị", "Mùi", "Dậu"] },
  { id: 49, ten: "Cô thần", yNghia: "Xấu với giá thú", loai: "mapping_thang", map: ["Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu"] },
  { id: 50, ten: "Quả tú", yNghia: "Xấu với giá thú", loai: "mapping_thang", map: ["Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão"] },
  { id: 51, ten: "Tứ thời đại mộ", yNghia: "Kỵ an táng", loai: "mapping_thang", map: ["Ất Mùi", "Ất Mùi", "Ất Mùi", "Bính Tuất", "Bính Tuất", "Bính Tuất", "Tân Sửu", "Tân Sửu", "Tân Sửu", "Nhâm Thìn", "Nhâm Thìn", "Nhâm Thìn"] },
  { id: 52, ten: "Ly sàng", yNghia: "Kỵ giá thú", loai: "mapping_thang", map: ["Dậu", "Dậu", "Dậu", "Dần,Ngọ", "Dần,Ngọ", "Dần,Ngọ", "Tuất", "Tuất", "Tuất", "Tị", "Tị", "Tị"] },
  { id: 53, ten: "Tứ thời cô quả", yNghia: "Kỵ giá thú", loai: "mapping_thang", map: ["Sửu", "Sửu", "Sửu", "Thìn", "Thìn", "Thìn", "Mùi", "Mùi", "Mùi", "Tuất", "Tuất", "Tuất"] },
  { id: 54, ten: "Không phòng", yNghia: "Kỵ giá thú", loai: "mapping_thang", map: ["Thìn", "Tị", "Tý", "Tuất", "Hợi", "Mùi", "Dần", "Mão", "Ngọ", "Thân", "Dậu", "Sửu"] },
  { id: 55, ten: "Âm thác", yNghia: "Kỵ xuất hành, giá thú, an táng", loai: "mapping_thang", map: ["Canh Tuất", "Tân Dậu", "Canh Thân", "Đinh Mùi", "Bính Ngọ", "Đinh Tị", "Giáp Thìn", "Ất Mão", "Giáp Dần", "Quý Sửu", "Nhâm Tý", "Quý Hợi"] },
  { id: 56, ten: "Dương thác", yNghia: "Kỵ xuất hành, giá thú, an táng", loai: "mapping_thang", map: ["Giáp Dần", "Ất Mão", "Giáp Thìn", "Đinh Tị", "Bính Ngọ", "Đinh Mùi", "Canh Thân", "Tân Dậu", "Canh Tuất", "Quý Hợi", "Nhâm Tý", "Quý Sửu"] },
  { id: 57, ten: "Quỷ khốc", yNghia: "Xấu tế tự, mai táng", loai: "mapping_thang", map: ["Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất"] },
  { id: 58, ten: "Xích khẩu", yNghia: "Kỵ giá thú, giao dịch, yến tiệc", loai: "ngay_theo_thang", map: [ [3, 9, 15, 21, 27], [2, 8, 14, 20, 26], [1, 7, 13, 19, 25], [6, 12, 18, 24, 30], [5, 11, 17, 23, 29], [4, 10, 16, 22, 28], [3, 9, 15, 21, 27], [2, 8, 14, 20, 26], [1, 7, 13, 19, 25], [6, 12, 14, 24, 30], [5, 11, 17, 23, 29], [4, 10, 16, 22, 28] ] },
  { id: 59, ten: "Đại không vong", yNghia: "Kỵ xuất hành, giao dịch, giao tài vật", loai: "ngay_theo_thang", map: [ [6, 14, 22, 30], [5, 13, 21, 29], [4, 12, 20, 28], [3, 11, 19, 27], [2, 10, 18, 26], [1, 17, 24], [8, 16, 24], [7, 15, 23], [6, 14, 22, 30], [5, 13, 21, 29], [4, 12, 20, 28], [3, 11, 19, 27] ] },
  { id: 60, ten: "Tiểu không vong", yNghia: "Kỵ xuất hành, giao dịch, giao tài vật", loai: "ngay_theo_thang", map: [ [2, 10, 18, 26], [1, 9, 17, 25], [8, 16, 24], [7, 15, 23], [6, 14, 22, 30], [5, 13, 21, 29], [4, 12, 20, 28], [3, 11, 19, 27], [2, 10, 18, 26], [1, 9, 17, 25], [8, 16, 24], [7, 15, 23] ] },
  { id: 61, ten: "Dương công kỵ", yNghia: "Xấu mọi việc", loai: "ngay_theo_thang", map: [ [13], [11], [9], [7], [5], [3], [2, 29], [27], [25], [23], [21], [19] ] },
  { id: 62, ten: "Cửu thổ quỷ", yNghia: "Xấu động thổ, khởi tạo, xuất hành, giao dịch, thượng quan", loai: "co_dinh", ngay: ["Ất Dậu", "Quý Tị", "Giáp Ngọ", "Tân Sửu", "Nhâm Dần", "Kỷ Dậu", "Canh Tuất", "Đinh Sửu", "Mậu Ngọ"] },
  { id: 63, ten: "Ly sào", yNghia: "Xấu nhập trạch, giá thú", loai: "co_dinh", ngay: ["Mậu Tý", "Mậu Dần", "Mậu Thìn", "Mậu Ngọ", "Mậu Thân", "Mậu Tuất", "Kỷ Sửu", "Kỷ Tị", "Kỷ Dậu", "Tân Sửu", "Tân Mão", "Tân Tị", "Nhâm Tuất", "Quý Tị"] },
  { id: 64, ten: "Hỏa tinh", yNghia: "Xấu lợp nhà, làm bếp", loai: "nhom_thang", duLieu: { nhom_1_4_7_10: ["Ất Sửu", "Giáp Tuất", "Quý Mùi", "Nhâm Thìn", "Tân Sửu", "Canh Tuất", "Kỷ Mùi"], nhom_2_5_8_11: ["Giáp Tý", "Quý Dậu", "Nhâm Ngọ", "Tân Mão", "Canh Tý", "Kỷ Dậu", "Mậu Ngọ"], nhom_3_6_9_12: ["Nhâm Thân", "Tân Tị", "Canh Dần", "Kỷ Hợi", "Mậu Thân", "Quý Hợi"] }}
];

// --- DỮ LIỆU RÚT GỌN THEO YÊU CẦU ---
const CAN_CHI_XUNG_DATA = { 
"Giáp Tý": ["Mậu Ngọ", "Canh Ngọ"],
 "Ất Sửu": ["Kỷ Mùi", "Tân Mùi"],
 "Bính Dần": ["Canh Thân", "Nhâm Thân"],
 "Đinh Mão": ["Tân Dậu", "Quý Dậu"],
 "Mậu Thìn": ["Nhâm Tuất", "Giáp Tuất"],
 "Kỷ Tị": ["Quý Hợi", "Ất Hợi"],
 "Canh Ngọ": ["Giáp Tý", "Bính Tý"],
 "Tân Mùi": ["Ất Sửu", "Đinh Sửu"],
 "Nhâm Thân": ["Bính Dần", "Mậu Dần"],
 "Quý Dậu": ["Đinh Mão", "Kỷ Mão"],
 "Giáp Tuất": ["Mậu Thìn", "Canh Thìn"],
 "Ất Hợi": ["Kỷ Tị", "Tân Tị"],
 "Bính Tý": ["Canh Ngọ", "Nhâm Ngọ"],
 "Đinh Sửu": ["Tân Mùi", "Quý Mùi"],
 "Mậu Dần": ["Nhâm Thân", "Giáp Thân"],
 "Kỷ Mão": ["Quý Dậu", "Ất Dậu"],
 "Canh Thìn": ["Giáp Tuất", "Bính Tuất"],
 "Tân Tị": ["Ất Hợi", "Đinh Hợi"],
 "Nhâm Ngọ": ["Bính Tý", "Mậu Tý"],
 "Quý Mùi": ["Đinh Sửu", "Kỷ Sửu"],
 "Giáp Thân": ["Mậu Dần", "Canh Dần"],
 "Ất Dậu": ["Kỷ Mão", "Tân Mão"],
 "Bính Tuất": ["Canh Thìn", "Nhâm Thìn"],
 "Đinh Hợi": ["Tân Tị", "Quý Tị"],
 "Mậu Tý": ["Nhâm Ngọ", "Giáp Ngọ"],
 "Kỷ Sửu": ["Quý Mùi", "Ất Mùi"],
 "Canh Dần": ["Giáp Thân", "Bính Thân"],
 "Tân Mão": ["Ất Dậu", "Đinh Dậu"],
 "Nhâm Thìn": ["Bính Tuất", "Mậu Tuất"],
 "Quý Tị": ["Đinh Hợi", "Kỷ Hợi"],
 "Giáp Ngọ": ["Mậu Tý", "Canh Tý"],
 "Ất Mùi": ["Kỷ Sửu", "Tân Sửu"],
 "Bính Thân": ["Canh Dần", "Nhâm Dần"],
 "Đinh Dậu": ["Tân Mão", "Quý Mão"],
 "Mậu Tuất": ["Nhâm Thìn", "Giáp Thìn"],
 "Kỷ Hợi": ["Quý Tị", "Ất Tị"],
 "Canh Tý": ["Giáp Ngọ", "Bính Ngọ"],
 "Tân Sửu": ["Ất Mùi", "Đinh Mùi"],
 "Nhâm Dần": ["Bính Thân", "Mậu Thân"],
 "Quý Mão": ["Đinh Dậu", "Kỷ Dậu"],
 "Giáp Thìn": ["Mậu Tuất", "Canh Tuất"],
 "Ất Tị": ["Kỷ Hợi", "Tân Hợi"],
 "Bính Ngọ": ["Canh Tý", "Nhâm Tý"],
 "Đinh Mùi": ["Tân Sửu", "Quý Sửu"],
 "Mậu Thân": ["Nhâm Dần", "Giáp Dần"],
 "Kỷ Dậu": ["Quý Mão", "Ất Mão"],
 "Canh Tuất": ["Giáp Thìn", "Bính Thìn"],
 "Tân Hợi": ["Ất Tị", "Đinh Tị"],
 "Nhâm Tý": ["Bính Ngọ", "Mậu Ngọ"],
 "Quý Sửu": ["Đinh Mùi", "Kỷ Mùi"],
 "Giáp Dần": ["Mậu Thân", "Canh Thân"],
 "Ất Mão": ["Kỷ Dậu", "Tân Dậu"],
 "Bính Thìn": ["Canh Tuất", "Nhâm Tuất"],
 "Đinh Tị": ["Tân Hợi", "Quý Hợi"],
 "Mậu Ngọ": ["Nhâm Tý", "Giáp Tý"],
 "Kỷ Mùi": ["Quý Sửu", "Ất Sửu"],
 "Canh Thân": ["Giáp Dần", "Bính Dần"],
 "Tân Dậu": ["Ất Mão", "Đinh Mão"],
 "Nhâm Tuất": ["Bính Thìn", "Mậu Thìn"],
 "Quý Hợi": ["Đinh Tị", "Kỷ Tị"] };

const TU_LY_TERMS = new Set(["Xuân phân", "Thu phân", "Hạ chí", "Đông chí"]);
const TU_TUYET_TERMS = new Set(["Lập xuân", "Lập hạ", "Lập thu", "Lập đông"]);
const TAI_THAN_DIRECTION = { "Giáp": "ĐN", "Ất": "ĐN", "Bính": "Đông", "Đinh": "Đông", "Mậu": "Bắc", "Kỷ": "Nam", "Canh": "TN", "Tân": "TN", "Nhâm": "Tây", "Quý": "TB" };
const HY_THAN_DIRECTION = { "Giáp": "ĐB", "Ất": "TB", "Bính": "TN", "Đinh": "Nam", "Mậu": "ĐN", "Kỷ": "ĐB", "Canh": "TB", "Tân": "TN", "Nhâm": "Nam", "Quý": "ĐN" };
const HAC_THAN_DIRECTION = { "Giáp Tý": "ĐN", "Ất Sửu": "ĐN", "Bính Dần": "Nam", "Đinh Mão": "Nam", "Mậu Thìn": "Nam", "Kỷ Tị": "Nam", "Canh Ngọ": "Nam", "Tân Mùi": "TN", "Đinh Sửu": "Tây", "Mậu Dần": "Tây", "Kỷ Mão": "Tây", "Canh Thìn": "Tây", "Tân Tị": "Tây", "Nhâm Ngọ": "TB", "Quý Mùi": "TB", "Giáp Thân": "TB", "Ất Dậu": "TB", "Bính Tuất": "TB", "Đinh Hợi": "Tây", "Mậu Tý": "Bắc", "Kỷ Sửu": "Bắc", "Canh Dần": "Bắc", "Tân Mão": "Bắc", "Nhâm Thìn": "Bắc", "Quý Tị": "Tại Thiên", "Giáp Ngọ": "Tại Thiên", "Ất Mùi": "Tại Thiên", "Bính Thân": "Tại Thiên", "Đinh Dậu": "Tại Thiên", "Mậu Tuất": "Tại Thiên", "Kỷ Hợi": "Tại Thiên", "Canh Tý": "Tại Thiên", "Tân Sửu": "Tại Thiên", "Nhâm Dần": "Tại Thiên", "Quý Mão": "Tại Thiên", "Giáp Thìn": "Tại Thiên", "Ất Tị": "Tại Thiên", "Bính Ngọ": "Tại Thiên", "Đinh Mùi": "Tại Thiên", "Mậu Thân": "Tại Thiên", "Kỷ Dậu": "ĐB", "Canh Tuất": "ĐB", "Tân Hợi": "ĐB", "Nhâm Tý": "ĐB", "Quý Sửu": "ĐB", "Giáp Dần": "Đông", "Ất Mão": "Đông", "Bính Thìn": "Đông", "Đinh Tị": "Đông", "Mậu Ngọ": "Đông", "Kỷ Mùi": "Đông", "Canh Thân": "ĐN", "Tân Dậu": "ĐN", "Nhâm Tuất": "ĐN", "Quý Hợi": "ĐN", "Nhâm Thân": "TN", "Quý Dậu": "TN", "Giáp Tuất": "TN", "Ất Hợi": "TN", "Bính Tý": "TN" };
const KIM_THAN_THAT_SAT_DATA = { "Giáp": ["Ngọ", "Mùi"], "Kỷ": ["Ngọ", "Mùi"], "Ất": ["Thìn", "Tị"], "Canh": ["Thìn", "Tị"], "Bính": ["Tý", "Sửu", "Dần", "Mão"], "Tân": ["Tý", "Sửu", "Dần", "Mão"], "Đinh": ["Tuất", "Hợi"], "Nhâm": ["Tuất", "Hợi"], "Mậu": ["Thân", "Dậu"], "Quý": ["Thân", "Dậu"] };
const SAT_CHU_DUONG_DATA = { 1: "Tý", 2: "Sửu", 3: "Sửu", 7: "Sửu", 9: "Sửu", 4: "Tuất", 11: "Mùi", 5: "Thìn", 6: "Thìn", 8: "Thìn", 12: "Thìn" };
const SAT_CHU_AM_DATA = { 1: "Tị", 2: "Tý", 3: "Mùi", 4: "Mão", 5: "Thân", 6: "Tuất", 7: "Sửu", 8: "Hợi", 9: "Ngọ", 10: "Dậu", 11: "Dần", 12: "Thìn" };
const SAT_CHU_MUA_DATA = { "Ngọ": [1, 2, 3], "Tý": [4, 5, 6], "Dậu": [7, 8, 9], "Mão": [10, 11, 12] };
const SAT_CHU_THANG_DATA = { "Tý": [1, 5, 9], "Mão": [2, 8, 10], "Ngọ": [3, 7, 11], "Dậu": [4, 6, 12] };
const THO_TU_DATA = { 1: "Bính Tuất", 2: "Nhâm Thìn", 3: "Tân Hợi", 4: "Đinh Tị", 5: "Mậu Tý", 6: "Bính Ngọ", 7: "Ất Sửu", 8: "Quý Mùi", 9: "Giáp Dần", 10: "Mậu Thân", 11: "Tân Mão", 12: "Tân Dậu" };
const TAM_DAI_KIET_TINH_DATA = { "Sát Cống": { "Tứ Mạnh": new Set(["Giáp Ngọ", "Ất Dậu", "Bính Tý", "Đinh Mão", "Tân Dậu", "Nhâm Tý", "Quý Mão"]), "Tứ Trọng": new Set(["Giáp Thân", "Ất Hợi", "Bính Dần", "Canh Thân", "Tân Hợi", "Nhâm Dần", "Quý Tị"]), "Tứ Quý": new Set(["Giáp Tuất", "Kỷ Sửu", "Kỷ Mùi", "Canh Tuất", "Tân Sửu", "Nhâm Thìn", "Quý Mùi"]) }, "Trực Tinh": { "Tứ Mạnh": new Set(["Giáp Thìn", "Ất Mùi", "Bính Tuất", "Đinh Sửu", "Mậu Thìn", "Nhâm Tuất", "Quý Sửu"]), "Tứ Trọng": new Set(["Giáp Ngọ", "Ất Dậu", "Bính Tý", "Đinh Mão", "Tân Dậu", "Nhâm Tý", "Quý Mão"]), "Tứ Quý": new Set(["Giáp Thân", "Ất Hợi", "Bính Dần", "Canh Thân", "Tân Mão", "Nhâm Dần", "Quý Tị"]) }, "Nhơn Chuyên": { "Tứ Mạnh": new Set(["Bính Thìn", "Đinh Mùi", "Mậu Tuất", "Kỷ Sửu", "Canh Thìn", "Tân Mùi"]), "Tứ Trọng": new Set(["Ất Mão", "Bính Ngọ", "Đinh Dậu", "Mậu Tý", "Kỷ Mão", "Canh Ngọ"]), "Tứ Quý": new Set(["Giáp Dần", "Ất Tị", "Bính Thân", "Mậu Dần", "Kỷ Tị", "Kỷ Hợi", "Quý Hợi"]) } };
const SAO_THANG_CATEGORY = { 1: "Tứ Mạnh", 4: "Tứ Mạnh", 7: "Tứ Mạnh", 10: "Tứ Mạnh", 2: "Tứ Trọng", 5: "Tứ Trọng", 8: "Tứ Trọng", 11: "Tứ Trọng", 3: "Tứ Quý", 6: "Tứ Quý", 9: "Tứ Quý", 12: "Tứ Quý" };
const GIO_SAT_CHU = { 1: 'Dần', 7: 'Dần', 2: 'Tị', 8: 'Tị', 3: 'Thân', 9: 'Thân', 4: 'Thìn', 10: 'Thìn', 5: 'Dậu', 11: 'Dậu', 6: 'Mão', 12: 'Mão' };
const GIO_THO_TU = { "Tý": "Sửu", "Sửu": "Ngọ", "Dần": "Ngọ", "Tị": "Ngọ", "Mùi": "Ngọ", "Hợi": "Ngọ", "Mão": "Tị", "Thìn": "Tị", "Dậu": "Tị", "Ngọ": "Mùi", "Tuất": "Mùi", "Thân": "Mão" };
const GIO_THIEN_CAU = { 1: { "Tý": "Hợi" }, 2: { "Sửu": "Tý" }, 3: { "Dần": "Sửu" }, 4: { "Mão": "Dần" }, 5: { "Thìn": "Mão" }, 6: { "Tị": "Thìn" }, 7: { "Ngọ": "Tị" }, 8: { "Mùi": "Ngọ" }, 9: { "Thân": "Mùi" }, 10: { "Dậu": "Thân" }, 11: { "Tuất": "Dậu" }, 12: { "Hợi": "Tuất" } };

const QUY_NHAN_DATA = { "Giáp": { "Vũ thủy": { "Mão": "Dương QN", "Dậu": "Âm QN" },
 "Thu phân": { "Dần": "Âm QN", "Thân": "Dương QN" },
 "Sương giáng": { "Sửu": "Âm QN", "Mùi": "Dương QN" },
 "Tiểu tuyết": { "Tý": "Âm QN", "Ngọ": "Dương QN" },
 "Đông chí": { "Tị": "Dương QN", "Hợi": "Âm QN" },
 "Đại hàn": { "Thìn": "Dương QN", "Tuất": "Âm QN" } },
 "Ất": { "Vũ thủy": { "Tuất": "Âm QN" },
 "Xuân phân": { "Dậu": "Âm QN" },
 "Hạ chí": { "Tuất": "Âm QN" },
 "Đại Thử": { "Dậu": "Âm QN" },
 "Xử thử": { "Thân": "Dương QN"},
 "Thu phân": { "Mùi": "Dương QN"},
 "Sương giáng": { "Ngọ": "Dương QN", "Dần": "Âm QN" },
 "Tiểu tuyết": { "Tị": "Dương QN", "Sửu": "Âm QN" },
 "Đông chí": { "Thìn": "Dương QN", "Tý": "Âm QN" },
 "Đại hàn": { "Mão": "Dương QN", "Hợi": "Âm QN" } },
 "Bính": { "Vũ thủy": { "Hợi": "Âm QN" },
 "Xuân phân": { "Tuất": "Âm QN" },
 "Tiểu mãn": { "Hợi": "Âm QN" },
 "Hạ chí": { "Dậu": "Âm QN" },
 "Đại Thử": { "Thân": "Dương QN" },
 "Xử thử": { "Mùi": "Dương QN" },
 "Thu phân": { "Ngọ": "Dương QN" },
 "Sương giáng": { "Tị": "Dương QN" },
 "Tiểu tuyết": { "Thìn": "Dương QN", "Dần": "Âm QN" },
 "Đông chí": { "Sửu": "Âm QN" },
 "Đại hàn": { "Tý": "Âm QN" } },
 "Đinh": { "Vũ thủy": { "Sửu": "Âm QN" },
 "Cốc vũ": { "Hợi": "Âm QN" },
 "Tiểu mãn": { "Thân": "Dương QN" },
 "Hạ chí": { "Mùi": "Dương QN" },
 "Đại Thử": { "Ngọ": "Dương QN" },
 "Xử thử": { "Tị": "Dương QN" },
 "Thu phân": { "Thìn": "Dương QN" },
 "Sương giáng": { "Mão": "Dương QN" },
 "Đông chí": { "Mão": "Dương QN" },
 "Đại hàn": { "Dần": "Âm QN" } },
 "Mậu": { "Vũ thủy": { "Mão": "Dương QN", "Dậu": "Âm QN" },
 "Xuân phân": { "Thân": "Dương QN", "Dần": "Âm QN" },
 "Cốc vũ": { "Sửu": "Âm QN", "Mùi": "Dương QN" },
 "Tiểu mãn": { "Tý": "Âm QN", "Ngọ": "Dương QN" },
 "Hạ chí": { "Tị": "Dương QN", "Hợi": "Âm QN" },
 "Đại Thử": { "Thìn": "Dương QN", "Tuất": "Âm QN" },
 "Xử thử": { "Mão": "Dương QN", "Dậu": "Âm QN" } },
 "Kỷ": { "Vũ thủy": { "Dần": "Âm QN" },
 "Xuân phân": { "Sửu": "Âm QN" },
 "Cốc vũ": { "Tý": "Âm QN", "Thân": "Dương QN" },
 "Tiểu mãn": { "Hợi": "Âm QN", "Mùi": "Dương QN" },
 "Hạ chí": { "Tuất": "Âm QN", "Ngọ": "Dương QN" },
 "Đại Thử": { "Tị": "Dương QN" },
 "Xử thử": { "Ngọ": "Dương QN" },
 "Thu phân": { "Mão": "Dương QN" } },
 "Canh": { "Vũ thủy": { "Mão": "Dương QN", "Dậu": "Âm QN" },
 "Xuân phân": { "Thân": "Dương QN", "Dần": "Âm QN" },
 "Cốc vũ": { "Sửu": "Âm QN", "Mùi": "Dương QN" },
 "Tiểu mãn": { "Tý": "Âm QN", "Ngọ": "Dương QN" },
 "Hạ chí": { "Tị": "Dương QN", "Hợi": "Âm QN" },
 "Đại Thử": { "Thìn": "Dương QN", "Tuất": "Âm QN" },
 "Xử thử": { "Mão": "Dương QN", "Dậu": "Âm QN" } },
 "Tân": { "Vũ thủy": { "Thân": "Dương QN" },
 "Xuân phân": {"Mùi": "Dương QN" },
 "Cốc vũ": { "Dần": "Âm QN", "Ngọ": "Dương QN" },
 "Tiểu mãn": { "Sửu": "Âm QN", "Tị": "Dương QN" },
 "Hạ chí": { "Tý": "Âm QN", "Thìn": "Dương QN" },
 "Đại Thử": { "Mão": "Dương QN", "Hợi": "Âm QN" },
 "Xử thử": { "Tuất": "Âm QN" },
 "Thu phân": { "Dậu": "Âm QN" } },
 "Nhâm": { "Vũ thủy": { "Mùi": "Dương QN" },
 "Xuân phân": { "Ngọ": "Dương QN" },
 "Cốc vũ": { "Tị": "Dương QN" },
 "Tiểu mãn": { "Thìn": "Dương QN", "Dần": "Âm QN" },
 "Hạ chí": { "Mão": "Dương QN", "Sửu": "Âm QN" },
 "Đại Thử": { "Tý": "Âm QN" },
 "Xử thử": { "Hợi": "Âm QN" },
 "Thu phân": { "Tuất": "Âm QN" },
 "Sương giáng": { "Dậu": "Âm QN" },
 "Đại hàn": { "Thân": "Dương QN" } },
 "Quý": { "Vũ thủy": { "Tị": "Dương QN" },
 "Xuân phân": { "Thìn": "Dương QN" },
 "Cốc vũ": { "Mão": "Dương QN" },
 "Tiểu mãn": { "Dần": "Âm QN" },
 "Đại Thử": { "Dần": "Âm QN" },
 "Xử thử": { "Sửu": "Âm QN" },
 "Thu phân": { "Tý": "Âm QN" },
 "Sương giáng": { "Hợi": "Âm QN" },
 "Tiểu tuyết": { "Thân": "Dương QN", "Tuất": "Âm QN" },
 "Đông chí": { "Mùi": "Dương QN", "Dậu": "Âm QN" },
 "Đại hàn": { "Ngọ": "Dương QN" } } };


// *** DỮ LIỆU MỚI: KỴ CƯỚI HỎI ***
const THIEN_DA_DATA = { 1: new Set(["Dần", "Sửu", "Tuất"]), 2: new Set(["Dần", "Sửu", "Tuất"]), 3: new Set(["Dần", "Sửu", "Tuất"]), 4: new Set(["Tị", "Thìn", "Hợi"]), 5: new Set(["Tị", "Thìn", "Hợi"]), 6: new Set(["Tị", "Thìn", "Hợi"]), 7: new Set(["Ngọ", "Mão", "Tý"]), 8: new Set(["Ngọ", "Mão", "Tý"]), 9: new Set(["Ngọ", "Mão", "Tý"]), 10: new Set(["Mùi", "Thìn", "Dậu"]), 11: new Set(["Mùi", "Thìn", "Dậu"]), 12: new Set(["Mùi", "Thìn", "Dậu"]) };
const THIEN_LOI_DATA = { 1: "Tý", 7: "Tý", 4: "Ngọ", 10: "Ngọ", 5: "Thân", 11: "Thân", 6: "Tuất", 12: "Tuất" };
const THIEN_MA_DATA = { 1: new Set(["Mùi", "Tuất", "Hợi"]), 2: new Set(["Mùi", "Tuất", "Hợi"]), 3: new Set(["Mùi", "Tuất", "Hợi"]), 4: new Set(["Thìn", "Tị", "Tý"]), 5: new Set(["Thìn", "Tị", "Tý"]), 6: new Set(["Thìn", "Tị", "Tý"]), 7: new Set(["Thân", "Dậu", "Sửu"]), 8: new Set(["Thân", "Dậu", "Sửu"]), 9: new Set(["Thân", "Dậu", "Sửu"]), 10: new Set(["Dậu", "Mão", "Ngọ"]), 11: new Set(["Dậu", "Mão", "Ngọ"]), 12: new Set(["Dậu", "Mão", "Ngọ"]) };
const TAM_CUONG_DAYS = new Set([8, 18, 28]);


// --- DỮ LIỆU RÚT GỌN & ĐỒNG BỘ ---
const TRUC_NAMES = ["Kiến", "Trừ", "Mãn", "Bình", "Định", "Chấp", "Phá", "Nguy", "Thành", "Thâu", "Khai", "Bế"];

const TRUC_INFO = {
  "Kiến": {
    name: "Trực Kiến (Khởi đầu)",
    rating: "Tốt (Tiểu Cát đến Trung Cát)",
    nghi: "Xuất hành, nhậm chức, cầu quan lộc, thăm hỏi, nộp đơn từ, nhập học, mưu sự nghiệp, tế tự.",
    ky: "Động thổ, phá thổ, an táng, sửa mộ (vì ngày Kiến là ngày “tụ khí” của tháng, vượng quá thì hóa hư).",
    ngoaitru: "Trùng ngày Nguyệt Kiến (ngày Địa chi giống tháng) thì càng mạnh cho quan lộc, nhưng càng kỵ động thổ & chôn cất."
  },
  "Trừ": {
    name: "Trực Trừ (Tẩy uế)",
    rating: "Tốt (Trung Cát)",
    nghi: "Tắm gội, dọn nhà, chữa bệnh, cắt tóc, nhổ răng, phẫu thuật, trừ tà, xả xui, bắt trộm, ly hôn.",
    ky: "Cưới hỏi, nhậm chức lâu dài, ký hợp đồng lớn, xuất hành xa (dễ chia ly, bãi miễn).",
    ngoaitru: "Nếu gặp Thiên Đức, Nguyệt Đức, Thiên Ân thì có thể cưới hỏi (các sách đều cho phép)."
  },
  "Mãn": {
    name: "Trực Mãn (Đầy đủ)",
    rating: "Rất Tốt (Đại Cát)",
    nghi: "Khai trương, mở kho xuất hàng, thu tiền, cầu tài lộc, cưới hỏi, động thổ, dựng nhà, cúng tế, nhận người.",
    ky: "An táng, chôn cất (sợ mộ đầy nước, mục nát), kiện tụng (dây dưa), uống thuốc lâu ngày (bệnh ứ tắc).",
    ngoaitru: "Không nên cho vay tiền ngày này (khó đòi lại)."
  },
  "Bình": {
    name: "Trực Bình (Bình hòa)",
    rating: "Tốt (Tiểu Cát đến Trung Cát)",
    nghi: "Định việc, ký kết hợp đồng bình đẳng, tu sửa nhà cửa, dựng cột, làm đường, di chuyển, hòa giải, nhập trạch nhẹ.",
    ky: "Đào giếng, đào mương, trổ cửa thông (phá vỡ sự bình), kiện tụng (hòa thì không thắng).",
    ngoaitru: "Gặp Chu Tước, Bạch Hổ thì kỵ tranh cãi, cưới xin."
  },
  "Định": {
    name: "Trực Định (Yên định)",
    rating: "Rất Tốt (Đại Cát)",
    nghi: "Cưới hỏi, động thổ, đổ mái, nhập trạch, nhậm chức lâu dài, ký hợp đồng lớn, kết nghĩa anh em, chăn nuôi.",
    ky: "Xuất hành xa, thưa kiện, cầu y (việc gì cũng “định” không chuyển động).",
    ngoaitru: "Đặc biệt kỵ đi thuyền, vượt suối ngày Định (dễ bị “đóng băng” giữa đường)."
  },
  "Chấp": {
    name: "Trực Chấp (Nắm giữ)",
    rating: "Xấu (Tiểu Hung – bán cát bán hung)",
    nghi: "Tu sửa nhà cũ, xây tường, đắp đê, lấp hố, đòi nợ, bắt kẻ trộm, tích trữ hàng hóa.",
    ky: "Khai trương, khởi sự mới, xuất hành, dời nhà, mở kho xuất tiền.",
    ngoaitru: "Gặp Giải Thần thì hóa giải được tính bảo thủ, có thể làm việc mới."
  },
  "Phá": {
    name: "Trực Phá (Phá bỏ)",
    rating: "Rất Xấu (Đại Hung – chính là Nguyệt Phá)",
    nghi: "Phá dỡ nhà cũ, đập tường, lấp ao, trị bệnh kinh nguyệt, ly hôn, trừng trị tội nhân.",
    ky: "Tuyệt đối kỵ cưới hỏi, động thổ, khai trương, ký kết, xuất hành, mua bán tài sản lớn.",
    ngoaitru: "Không có ngoại lệ tốt – ngày này chỉ dùng để phá, không dùng để xây."
  },
  "Nguy": {
    name: "Trực Nguy (Nguy hiểm)",
    rating: "Xấu (Đại Hung)",
    nghi: "Cầu phúc, lễ thần, bái Phật, làm việc thiện, giải oan, an giường (theo một số sách).",
    ky: "Leo núi cao, đi thuyền xa, xuất hành đường dài, xây dựng cao tầng, mọi việc mạo hiểm.",
    ngoaitru: "Gặp sao Thất (Trong 28 tú) thì hóa giải được hung tính, có thể khởi công (Đổng Công cho phép)."
  },
  "Thành": {
    name: "Trực Thành (Thành công)",
    rating: "Rất Tốt (Đại Cát – ngày Thiên Hỷ)",
    nghi: "Mọi việc lớn: khai trương, cưới hỏi, nhập trạch, động thổ, xuất hành, ký kết, cầu tài, thi cử, nhậm chức.",
    ky: "Kiện tụng, tranh chấp (cả hai bên đều mạnh, khó phân thắng thua).",
    ngoaitru: "Gặp Tam Nương, Nguyệt Kỵ, Sát Chủ thì dù Thành cũng không dùng (hung khắc cát)."
  },
  "Thâu": {
    name: "Trực Thu (Thu vào)",
    rating: "Tốt (Trung Cát)",
    nghi: "Thu tiền, đòi nợ, thu hoạch mùa màng, mua đất đai, mua súc vật, xây kho chứa, tích trữ.",
    ky: "Khởi công việc mới, xuất tiền lớn, an táng, xuất hành xa, chữa bệnh.",
    ngoaitru: "Khí thế co lại, không thích hợp cho việc mở mang."
  },
  "Khai": {
    name: "Trực Khai (Mở ra)",
    rating: "Rất Tốt (Đại Cát – ngày sinh khí mạnh)",
    nghi: "Động thổ, khai trương, cưới hỏi, nhập trạch, xuất hành, cầu tài, thi cử, mở cửa hàng, nhuộm vải.",
    ky: "An táng, chôn cất (mở ra thì không đóng được cửa mả).",
    ngoaitru: "Gặp Thọ Tử, Sát Chủ, Nguyệt Kỵ thì mất tác dụng tốt, trở thành ngày xấu."
  },
  "Bế": {
    name: "Trực Bế (Đóng lại)",
    rating: "Xấu (Tiểu Hung) nhưng đặc biệt tốt cho tang lễ",
    nghi: "An táng, chôn cất (đóng cửa mả vĩnh viễn), xây tường rào, đắp đê, lấp hang hốc, đặt biển hiệu.",
    ky: "Khai trương, động thổ, cưới hỏi, xuất hành, chữa bệnh (đặc biệt bệnh mắt), châm cứu.",
    ngoaitru: "Ngày này là ngày tốt nhất trong 12 trực để làm tang lễ."
  }
};

const BAT_TU_NAMES = ["Giác", "Cang", "Đê", "Phòng", "Tâm", "Vĩ", "Cơ", "Đẩu", "Ngưu", "Nữ", "Hư", "Nguy", "Thất", "Bích", "Khuê", "Lâu", "Vị", "Mão", "Tất", "Chủy", "Sâm", "Tỉnh", "Quỷ", "Liễu", "Tinh", "Trương", "Dực", "Chẩn"];
const BAT_TU_EPOCH = { jdn: 2451545, index: 16 };
const BAT_TU_INFO = {
    "Giác": {
        name: "Sao Giác (Giác Mộc Giao) - Con Giao Long",
        rating: "Tốt (Kiết)",
        nghi: "Tạo tác mọi việc đều đặng vinh xương, tấn lợi. Hôn nhân cưới gã sanh con quý. Công danh khoa cử cao thăng, đỗ đạt.",
        ky: "Chôn cất hoạn nạn 3 năm. Sửa chữa hay xây đắp mộ phần ắt có người chết. Sanh con nhằm ngày có Sao Giác khó nuôi, nên lấy tên Sao mà đặt tên cho nó mới an toàn. Dùng tên sao của năm hay của tháng cũng được.",
        ngoaitru: "Sao Giác trúng ngày Dần là Đăng Viên được ngôi cao cả, mọi sự tốt đẹp. Sao Giác trúng ngày Ngọ là Phục Đoạn Sát: rất Kỵ chôn cất, xuất hành, thừa kế, chia lãnh gia tài, khởi công lò nhuộm lò gốm. NHƯNG Nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại. Sao Giác trúng ngày Sóc là Diệt Một Nhật: Đại Kỵ đi thuyền, và cũng chẳng nên làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, thừa kế."
    },
    "Cang": {
        name: "Sao Cang (Can Kim Long) - Con Rồng",
        rating: "Xấu (Hung)",
        nghi: "Cắt may áo màn (sẽ có lộc ăn).",
        ky: "Chôn cất bị Trùng tang. Cưới gã e phòng không giá lạnh. Tranh đấu kiện tụng lâm bại. Khởi dựng nhà cửa chết con đầu. 10 hoặc 100 ngày sau thì gặp họa, rồi lần lần tiêu hết ruộng đất, nếu làm quan bị cách chức. Sao Cang thuộc Thất Sát Tinh, sanh con nhằm ngày này ắt khó nuôi, nên lấy tên của Sao mà đặt cho nó thì yên lành.",
        ngoaitru: "Sao Cang ở nhằm ngày Rằm là Diệt Một Nhật: Cử làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, thừa kế sự nghiệp, thứ nhất đi thuyền chẳng khỏi nguy hại ( vì Diệt Một có nghĩa là chìm mất ). Sao Cang tại Hợi, Mẹo, Mùi trăm việc đều tốt. Thứ nhất tại Mùi."
    },
    "Đê": {
        name: "Sao Đê (Đê Thổ Lạc) - Con Lạc Đà",
        rating: "Xấu (Hung)",
        nghi: "Sao Đê Đại Hung, không có việc chi hạp với nó.",
        ky: "Khởi công xây dựng, chôn cất, cưới gã, xuất hành kỵ nhất là đường thủy, sanh con chẳng phải điềm lành nên làm Âm Đức cho nó. Đó chỉ là các việc Đại Kỵ, các việc khác vẫn kiêng cử.",
        ngoaitru: "Tại Thân, Tý, Thìn trăm việc đều tốt, nhưng Thìn là tốt hơn hết vì Sao Đê Đăng Viên tại Thìn."
    },
    "Phòng": {
        name: "Sao Phòng (Phòng Nhựt Thố) - Con Thỏ",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác mọi việc đều tốt, thứ nhất là xây dựng nhà, chôn cất, cưới gã, xuất hành, đi thuyền, mưu sự, chặt cỏ phá đất, cắt áo.",
        ky: "Sao Phòng là Đại Kiết Tinh, không kỵ việc chi cả.",
        ngoaitru: "Tại Đinh Sửu và Tân Sửu đều tốt, tại Dậu càng tốt hơn, vì Sao Phòng Đăng Viên tại Dậu. Trong 6 ngày Kỷ Tị, Đinh Tị, Kỷ Dậu, Quý Dậu, Đinh Sửu, Tân Sửu thì Sao Phòng vẫn tốt với các việc khác, ngoại trừ chôn cất là rất kỵ. Sao Phòng nhằm ngày Tị là Phục Đoạn Sát: chẳng nên chôn cất, xuất hành, các vụ thừa kế, chia lãnh gia tài, khởi công làm lò nhuộm lò gốm. NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại."
    },
    "Tâm": {
        name: "Sao Tâm (Tâm Nguyệt Hồ) - Con Chồn Cáo",
        rating: "Xấu (Hung)",
        nghi: "Tạo tác việc chi cũng không hạp với Hung tú này.",
        ky: "Khởi công tạo tác việc chi cũng không khỏi hại, thứ nhất là xây cất, cưới gã, chôn cất, đóng giường, lót giường, tranh tụng.",
        ngoaitru: "Ngày Dần Sao Tâm Đăng Viên, có thể dùng các việc nhỏ."
    },
    "Vĩ": {
        name: "Sao Vĩ (Vĩ Hoả Hổ) - Con Cọp",
        rating: "Tốt (Kiết)",
        nghi: "Mọi việc đều tốt, tốt nhất là các vụ khởi tạo, chôn cất, cưới gã, xây cất, trổ cửa, đào ao giếng, khai mương rạch, các vụ thủy lợi, khai trương, chặt cỏ phá đất.",
        ky: "Đóng giường, lót giường, đi thuyền.",
        ngoaitru: "Tại Hợi, Mẹo, Mùi Kỵ chôn cất. Tại Mùi là vị trí Hãm Địa của Sao Vỹ. Tại Kỷ Mẹo rất Hung, còn các ngày Mẹo khác có thể tạm dùng được."
    },
    "Cơ": {
        name: "Sao Cơ (Cơ Thuỷ Báo) - Con Beo",
        rating: "Tốt (Kiết)",
        nghi: "Khởi tạo trăm việc đều tốt, tốt nhất là chôn cất, tu bổ mồ mã, trổ cửa, khai trương, xuất hành, các vụ thủy lợi ( như tháo nước, đào kinh, khai thông mương rảnh...).",
        ky: "Đóng giường, lót giường, đi thuyền.",
        ngoaitru: "Tại Thân, Tý, Thìn trăm việc kỵ, duy tại Tý có thể tạm dùng. Ngày Thìn Sao Cơ Đăng Viên lẽ ra rất tốt nhưng lại phạm Phục Đoạn. Phạm Phục Đoạn thì kỵ chôn cất, xuất hành, các vụ thừa kế, chia lãnh gia tài, khởi công làm lò nhuộm lò gốm ; NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại."
    },
    "Đẩu": {
        name: "Sao Đẩu (Đẩu Mộc Giải) - Con Cua",
        rating: "Tốt (Kiết)",
        nghi: "Khởi tạo trăm việc đều tốt, tốt nhất là xây đắp hay sửa chữa phần mộ, trổ cửa, tháo nước, các vụ thủy lợi, chặt cỏ phá đất, may cắt áo mão, kinh doanh, giao dịch, mưu cầu công danh.",
        ky: "Rất kỵ đi thuyền. Con mới sanh đặt tên nó là Đẩu, Giải, Trại hoặc lấy tên Sao của năm hay tháng hiện tại mà đặt tên cho nó dễ nuôi.",
        ngoaitru: "Tại Tị mất sức. Tại Dậu tốt. Ngày Sửu Đăng Viên rất tốt nhưng lại phạm Phục Đoạn. Phạm Phục Đoạn thì kỵ chôn cất, xuất hành, thừa kế, chia lãnh gia tài, khởi công làm lò nhuộm lò gốm ; NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại."
    },
    "Ngưu": {
        name: "Sao Ngưu (Ngưu Kim Ngưu) - Con Trâu",
        rating: "Xấu (Hung)",
        nghi: "Đi thuyền, cắt may áo mão.",
        ky: "Khởi công tạo tác việc chi cũng hung hại. Nhất là xây cất nhà, dựng trại, cưới gã, trổ cửa, làm thủy lợi, nuôi tằm, gieo cấy, khai khẩn, khai trương, xuất hành đường bộ. Sao Ngưu là 1 trong Thất sát Tinh, sanh con khó nuôi, nên lấy tên Sao của năm, tháng hay ngày mà đặt tên cho trẻ và làm việc Âm Đức ngay trong tháng sanh nó mới mong nuôi khôn lớn được.",
        ngoaitru: "Ngày Ngọ Đăng Viên rất tốt. Ngày Tuất yên lành. Ngày Dần là Tuyệt Nhật, chớ động tác việc chi, riêng ngày Nhâm Dần dùng được. Trúng ngày 14 ÂL là Diệt Một Sát, cử: làm rượu, lập lò nhuộm lò gốm, vào làm hành chánh, thừa kế sự nghiệp, kỵ nhất là đi thuyền chẳng khỏi rủi ro."
    },
    "Nữ": {
        name: "Sao Nữ (Nữ Thổ Bức) - Con Dơi",
        rating: "Xấu (Hung)",
        nghi: "Kết màn, may áo.",
        ky: "Khởi công tạo tác trăm việc đều có hại, hung hại nhất là trổ cửa, khơi đường tháo nước, chôn cất, đầu đơn kiện cáo.",
        ngoaitru: "Tại Hợi Mẹo Mùi đều gọi là đường cùng. Ngày Quý Hợi cùng cực đúng mức vì là ngày chót của 60 Hoa giáp. Ngày Hợi tuy Sao Nữ Đăng Viên song cũng chẳng nên dùng. Ngày Mẹo là Phục Đoạn Sát, rất kỵ chôn cất, xuất hành, thừa kế sự nghiệp, chia lãnh gia tài, khởi công làm lò nhuộm lò gốm ; NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại."
    },
    "Hư": {
        name: "Sao Hư (Hư Nhựt Thử) - Con Chuột",
        rating: "Xấu (Hung)",
        nghi: "Hư có nghĩa là hư hoại, không có việc chi hợp với Sao Hư.",
        ky: "Khởi công tạo tác trăm việc đều không may, thứ nhất là xây cất nhà cửa, cưới gã, khai trương, trổ cửa, tháo nước, đào kinh rạch.",
        ngoaitru: "Gặp Thân, Tý, Thìn đều tốt, tại Thìn Đắc Địa tốt hơn hết. Hạp với 6 ngày Giáp Tý, Canh Tý, Mậu Thân, Canh Thân, Bính Thìn, Mậu Thìn có thể động sự. Trừ ngày Mậu Thìn ra, còn 5 ngày kia kỵ chôn cất. Gặp ngày Tý thì Sao Hư Đăng Viên rất tốt, nhưng lại phạm Phục Đoạn Sát: Kỵ chôn cất, xuất hành, thừa kế, chia lãnh gia tài sự nghiệp, khởi công làm lò nhuộm lò gốm, NHƯNg nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại. Gặp Huyền Nhật là những ngày 7, 8, 22, 23 ÂL thì Sao Hư phạm Diệt Một: Cử làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, thừa kế, thứ nhất là đi thuyền ắt chẳng khỏi rủi ro."
    },
    "Nguy": {
        name: "Sao Nguy (Nguy Nguyệt Yến) - Con Chim Én",
        rating: "Xấu (Hung)",
        nghi: "Chôn cất rất tốt, lót giường bình yên.",
        ky: "Dựng nhà, trổ cửa, gác đòn đông, tháo nước, đào mương rạch, đi thuyền.",
        ngoaitru: "Tại Tị, Dậu, Sửu trăm việc đều tốt, tại Dậu tốt nhất. Ngày Sửu Sao Nguy Đăng Viên: tạo tác sự việc được quý hiển."
    },
    "Thất": {
        name: "Sao Thất (Thất Hoả Trư) - Con Heo",
        rating: "Xấu (Hung)",
        nghi: "Khởi công trăm việc đều tốt. Tốt nhất là xây cất nhà cửa, cưới gã, chôn cất, trổ cửa, tháo nước, các việc thủy lợi, đi thuyền, chặt cỏ phá đất.",
        ky: "Sao thất Đại Kiết không có việc chi phải cử.",
        ngoaitru: "Tại Dần, Ngọ, Tuất nói chung đều tốt, ngày Ngọ Đăng viên rất hiển đạt. Ba ngày Bính Dần, Nhâm Dần, Giáp Ngọ rất nên xây dựng và chôn cất, song những ngày Dần khác không tốt. Vì sao Thất gặp ngày Dần là phạm Phục Đoạn Sát (kiêng cữ như trên)."
    },
    "Bích": {
        name: "Sao Bích (Bích Thuỷ Du) - Con Rái Cá",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác việc chi cũng tốt. Tốt nhất là xây cất nhà, cưới gã, chôn cất, trổ cửa, dựng cửa, tháo nước, các vụ thuỷ lợi, chặt cỏ phá đất, cắt áo thêu áo, khai trương, xuất hành, làm việc thiện ắt Thiện quả tới mau hơn.",
        ky: "Sao Bích toàn kiết, không có việc chi phải kiêng cử.",
        ngoaitru: "Tại Hợi Mẹo Mùi trăm việc kỵ, thứ nhất trong Mùa Đông. Riêng ngày Hợi Sao Bích Đăng Viên nhưng phạm Phục Đọan Sát ( Kiêng cữ như trên )."
    },
    "Khuê": {
        name: "Sao Khuê (Khuê Mộc Lang) - Con Chó Sói",
        rating: "Xấu (Hung)",
        nghi: "Tạo dựng nhà phòng, nhập học, ra đi cầu công danh, cắt áo.",
        ky: "Chôn cất, khai trương, trổ cửa dựng cửa, khai thông đường nước, đào ao móc giếng, thưa kiện, đóng giường lót giường. Sao Khuê là 1 trong Thất Sát Tinh, nếu đẻ con nhằm ngày này thì nên lấy tên Sao Khuê hay lấy tên Sao của năm tháng mà đặt cho trẻ dễ nuôi.",
        ngoaitru: "Sao Khuê Hãm Địa tại Thân: Văn Khoa thất bại. Tại Ngọ là chỗ Tuyệt gặp Sanh, mưu sự đắc lợi, thứ nhất gặp Canh Ngọ. Tại Thìn tốt vừa vừa. Ngày Thân Sao Khuê Đăng Viên: Tiến thân danh."
    },
    "Lâu": {
        name: "Sao Lâu (Lâu Kim Cẩu) - Con Chó",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công mọi việc đều tốt. Tốt nhất là dựng cột, cất lầu, làm dàn gác, cưới gã, trổ cửa dựng cửa, tháo nước hay các vụ thủy lợi, cắt áo.",
        ky: "Đóng giường, lót giường, đi đường thủy.",
        ngoaitru: "Tại Ngày Dậu Đăng Viên : Tạo tác đại lợi. Tại Tị gọi là Nhập Trù rất tốt. Tại Sửu tốt vừa vừa. Gặp ngày cuối tháng thì Sao Lâu phạm Diệt Một: rất kỵ đi thuyền, cữ làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, thừa kế sự nghiệp."
    },
    "Vị": {
        name: "Sao Vị (Vị Thổ Trĩ) - Con Chim Trĩ",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác việc chi cũng lợi. Tốt nhất là xây cất, cưới gã, chôn cất, chặt cỏ phá đất, gieo trồng, lấy giống.",
        ky: "Đi thuyền.",
        ngoaitru: "Sao Vị mất chí khí tại Dần, thứ nhất tại Mậu Dần, rất là Hung, chẳng nên cưới gã, xây cất nhà cửa. Tại Tuất Sao Vị Đăng Viên nên mưu cầu công danh, nhưng cũng phạm Phục Đoạn ( kiêng cữ như các mục trên )."
    },
    "Mão": {
        name: "Sao Mão (Mão Nhựt Kê) - Con Gà",
        rating: "Tốt (Kiết)",
        nghi: "Xây dựng, tạo tác.",
        ky: "Chôn Cất ( ĐẠI KỴ ), cưới gã, trổ cửa dựng cửa, khai ngòi phóng thủy, khai trương, xuất hành, đóng giường lót giường. Các việc khác cũng không hay.",
        ngoaitru: "Tại Mùi mất chí khí. Tại Ất Mẹo và Đinh Mẹo tốt, Ngày Mẹo Đăng Viên cưới gã tốt, nhưng ngày Quý Mẹo tạo tác mất tiền của. Hạp với 8 ngày: Ất Mẹo, Đinh Mẹo, Tân Mẹo, Ất Mùi, Đinh Mùi, Tân Mùi, Ất Hợi, Tân Hợi."
    },
    "Tất": {
        name: "Sao Tất (Tất Nguyệt Ô) - Con Quạ",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác việc chi cũng tốt. Tốt nhất là chôn cất, cưới gã, trổ cửa dựng cửa, đào kinh, tháo nước, khai mương, móc giếng, chặt cỏ phá đất. Những việc khác cũng tốt như làm ruộng, nuôi tằm, khai trương, xuất hành, nhập học.",
        ky: "Đi thuyền.",
        ngoaitru: "Tại Thân, Tý, Thìn đều tốt. Tại Thân hiệu là Nguyệt Quải Khôn Sơn, trăng treo đầu núi Tây Nam, rất là tốt. Lại thên Sao tất Đăng Viên ở ngày Thân, cưới gã và chôn cất là 2 điều ĐẠI KIẾT."
    },
    "Chủy": {
        name: "Sao Chủy (Chuỷ Hoả Hầu) - Con Khỉ",
        rating: "Xấu (Hung)",
        nghi: "Không có sự việc chi hợp với Sao Chủy.",
        ky: "Khởi công tạo tác việc chi cũng không tốt. KỴ NHẤT là chôn cất và các vụ thuộc về chết chôn như sửa đắp mồ mả, làm sanh phần (làm mồ mã để sẵn), đóng thọ đường (đóng hòm để sẵn).",
        ngoaitru: "Tại tị bị đoạt khí, Hung càng thêm hung. Tại dậu rất tốt, vì Sao Chủy Đăng Viên ở Dậu, khởi động thăng tiến. Nhưng cũng phạm Phục Đoạn Sát. Tại Sửu là Đắc Địa, ắt nên. Rất hợp với ngày Đinh sửu và Tân Sửu, tạo tác Đại Lợi, chôn cất Phú Quý song toàn."
    },
    "Sâm": {
        name: "Sao Sâm (Sâm Thuỷ Viên) - Con Vượn",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác nhiều việc tốt như : xây cất nhà, dựng cửa trổ cửa, nhập học, đi thuyền, làm thủy lợi, tháo nước đào mương.",
        ky: "Cưới gã, chôn cất, đóng giường lót giường, kết bạn.",
        ngoaitru: "Ngày Tuất Sao sâm Đăng Viên, nên phó nhậm, cầu công danh hiển hách."
    },
    "Tỉnh": {
        name: "Sao Tĩnh (Tĩnh Mộc Cang) - Con Chim Cú",
        rating: "Tốt (Kiết)",
        nghi: "Tạo tác nhiều việc tốt như xây cất, trổ cửa dựng cửa, mở thông đường nước, đào mương móc giếng, nhậm chức, nhập học, đi thuyền.",
        ky: "Chôn cất, tu bổ phần mộ, làm sanh phần, đóng thọ đường.",
        ngoaitru: "Tại Hợi, Mẹo, Mùi trăm việc tốt. Tại Mùi là Nhập Miếu, khởi động vinh quang."
    },
    "Quỷ": {
        name: "Sao Quỷ (Quỷ Kim Dương) - Con Dê",
        rating: "Xấu (Hung)",
        nghi: "Chôn cất, chặt cỏ phá đất, cắt áo.",
        ky: "Khởi tạo việc chi cũng hại. Hại nhất là xây cất nhà, cưới gã, trổ cửa dựng cửa, tháo nước, đào ao giếng, động đất, xây tường, dựng cột.",
        ngoaitru: "Ngày Tý Đăng Viên thừa kế tước phong tốt, phó nhiệm may mắn. Ngày Thân là Phục Đoạn Sát kỵ chôn cất, xuất hành, thừa kế, chia lãnh gia tài, khởi công lập lò gốm lò nhuộm; NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại. Nhằm ngày 16 ÂL là ngày Diệt Một kỵ làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, kỵ nhất đi thuyền."
    },
    "Liễu": {
        name: "Sao Liễu (Liễu Thổ Chướng) - Con Gấu Ngựa",
        rating: "Xấu (Hung)",
        nghi: "Không có việc chi hạp với Sao Liễu.",
        ky: "Khởi công tạo tác việc chi cũng hung hại. Hung hại nhất là chôn cất, xây đắp, trổ cửa dựng cửa, tháo nước, đào ao lũy, làm thủy lợi.",
        ngoaitru: "Tại Ngọ trăm việc tốt. Tại Tị Đăng Viên: thừa kế và lên quan lãnh chức là 2 điều tốt nhất. Tại Dần, Tuất rất kỵ xây cất và chôn cất : Rất suy vi."
    },
    "Tinh": {
        name: "Sao Tinh (Tinh Nhựt Mã) - Con Ngựa",
        rating: "Xấu (Hung)",
        nghi: "Xây dựng phòng mới.",
        ky: "Chôn cất, cưới gã, mở thông đường nước. Sao Tinh là 1 trong Thất Sát Tinh, nếu sanh con nhằm ngày này nên lấy tên Sao đặt tên cho trẻ để dễ nuôi, có thể lấy tên sao của năm, hay sao của tháng cũng được.",
        ngoaitru: "Tại Dần Ngọ Tuất đều tốt, tại Ngọ là Nhập Miếu, tạo tác được tôn trọng. Tại Thân là Đăng Giá ( lên xe ): xây cất tốt mà chôn cất nguy. Hạp với 7 ngày: Giáp Dần, Nhâm Dần, Giáp Ngọ, Bính Ngọ, Mậu Ngọ, Bính Tuất, Canh Tuất."
    },
    "Trương": {
        name: "Sao Trương (Trương Nguyệt Lộc) - Con Nai",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác trăm việc tốt, tốt nhất là xây cất nhà, che mái dựng hiên, trổ cửa dựng cửa, cưới gã, chôn cất, làm ruộng, nuôi tằm, đặt táng kê gác, chặt cỏ phá đất, cắt áo, làm thuỷ lợi.",
        ky: "Sửa hoặc làm thuyền chèo, đẩy thuyền mới xuống nước.",
        ngoaitru: "Tại Hợi, Mẹo, Mùi đều tốt. Tại Mùi Đăng viên rất tốt nhưng phạm Phục Đoạn."
    },
    "Dực": {
        name: "Sao Dực (Dực Hoả Xà) - Con Rắn",
        rating: "Xấu (Hung)",
        nghi: "Cắt áo sẽ đước tiền tài.",
        ky: "Chôn cất, cưới gã, xây cất nhà, đặt táng kê gác, gác đòn dông, trổ cửa gắn cửa, các vụ thủy lợi.",
        ngoaitru: "Tại Thân, Tý, Thìn mọi việc tốt. Tại Thìn Vượng Địa tốt hơn hết. Tại Tý Đăng Viên nên thừa kế sự nghiệp, lên quan lãnh chức."
    },
    "Chẩn": {
        name: "Sao Chẩn (Chẩn Thuỷ Dẫn) - Con Trùng",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác mọi việc tốt lành, tốt nhất là xây cất lầu gác, chôn cất, cưới gã. Các việc khác cũng tốt như dựng phòng, cất trại, xuất hành, chặt cỏ phá đất.",
        ky: "Đi thuyền.",
        ngoaitru: "Tại Tị Dậu Sửu đều tốt. Tại Sửu Vượng Địa, tạo tác thịnh vượng. Tại Tị Đăng Viên là ngôi tôn đại, mưu động ắt thành danh."
    }
};

const DONG_CONG_DATA = {
    "Giáp Tý": {
        "KHAI": { "rating": "XẤU", "text": "Giáp Tý kim tự chết. Không nên khởi tạo, hôn nhân." },
        "NGUY": { "rating": "XẤU", "text": "Giáp Tý (Sát tứ phế) rất xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Giáp Tý (chính tứ phế) kị dùng." },
        "MÃN": { "rating": "BÌNH", "text": "Giáp Tý có thể dùng." },
        "TRỪ": { "rating": "BÌNH", "text": "Duy Giáp Tý là Thiên xá, dùng không hại." },
        "KIẾN": { "rating": "XẤU", "text": "Giáp Tý bị Nguyệt kiến xung phá, xấu." },
        "BẾ": { "rating": "BÌNH", "text": "Giáp Tý việc nhỏ có thể sửa, việc lớn thì xấu." }
    },
    "Bính Tý": {
        "KHAI": { "rating": "TỐT", "text": "Bính Tý dùng rất tốt, được nhiều của, quý nhân tiếp dẫn." },
        "NGUY": { "rating": "TỐT", "text": "Bính Tý dùng tốt cho khởi tạo, hôn nhân, động thổ." },
        "CHẤP": { "rating": "TỐT", "text": "Bính Tý lợi khởi tạo, xuất hành." },
        "ĐỊNH": { "rating": "TỐT", "text": "Bính Tý rất tốt cho tu tạo, an táng, nhập trạch." },
        "BÌNH": { "rating": "TỐT", "text": "Bính Tý rất tốt cho khởi tạo, giá thú." },
        "MÃN": { "rating": "TỐT", "text": "Bính Tý rất tốt." },
        "KIẾN": { "rating": "XẤU", "text": "Bính Tý bị Nguyệt kiến xung phá, xấu." },
        "BẾ": { "rating": "XẤU", "text": "Bính Tý Thiên địa chuyển sát, xấu." }
    },
    "Mậu Tý": {
        "KHAI": { "rating": "TỐT", "text": "Mậu Tý dùng rất tốt, được nhiều của, quý nhân tiếp dẫn." },
        "NGUY": { "rating": "TỐT", "text": "Mậu Tý dùng tốt cho khởi tạo, hôn nhân, động thổ." },
        "CHẤP": { "rating": "BÌNH", "text": "Mậu Tý tốt vừa." },
        "BÌNH": { "rating": "TỐT", "text": "Mậu Tý rất tốt cho khởi tạo, giá thú." },
        "BẾ": { "rating": "BÌNH", "text": "Mậu Tý việc nhỏ có thể sửa, việc lớn thì xấu." }
    },
    "Canh Tý": {
        "KHAI": { "rating": "TỐT", "text": "Canh Tý dùng rất tốt, được nhiều của, quý nhân tiếp dẫn." },
        "NGUY": { "rating": "TỐT", "text": "Canh Tý dùng tốt cho khởi tạo, hôn nhân, động thổ." },
        "CHẤP": { "rating": "TỐT", "text": "Canh Tý lợi khởi tạo, xuất hành." },
        "BÌNH": { "rating": "TỐT", "text": "Canh Tý rất tốt cho khởi tạo, giá thú." },
        "BẾ": { "rating": "XẤU", "text": "Canh Tý Thiên địa chuyển sát, xấu." }
    },
    "Nhâm Tý": {
        "KHAI": { "rating": "XẤU", "text": "Nhâm Tý mộc đã bảo bình chung, không nên khởi tạo, hôn nhân." },
        "THÂU": { "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "Nhâm Tý tuy có đức nhưng ngũ hành không khí, khai trương, xuất hành sẽ xấu. Chỉ mưu trù nho nhỏ thì có thể." },
        "NGUY": { "rating": "XẤU", "text": "Nhâm Tý (Sát tứ phế) rất xấu." },
        "PHÁ": { "rating": "XẤU", "text": "Nhâm Tý chính tứ phế, rất xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Nhâm Tý (chính tứ phế) kị dùng." },
        "BÌNH": { "rating": "XẤU", "text": "Nhâm Tý không thể dùng." },
        "MÃN": { "rating": "XẤU", "text": "Nhâm Tý không nên dùng." },
        "BẾ": { "rating": "XẤU", "text": "Nhâm Tý Thiên địa chuyển sát, xấu." }
    },
    "Ất Sửu": {
        "ĐỊNH": { "rating": "BÌNH", "text": "Ất Sửu tốt vừa." },
        "TRỪ": { "rating": "TỐT", "text": "Ất Sửu tốt." },
        "KIẾN": { "rating": "BÌNH", "text": "Ất Sửu tốt vừa." }
    },
    "Đinh Sửu": {
        "KHAI": { "rating": "XẤU", "text": "Đinh Sửu là sát nhập trung cung càng xấu." },
        "THÂU": { "rating": "XẤU", "text": "Đinh Sửu sát nhập trung cung, xấu." },
        "THÀNH": { "rating": "XẤU", "text": "Đinh Sửu là Sát nhập trung cung, càng xấu." },
        "NGUY": { "rating": "XẤU", "text": "Đinh Sửu không nên giá thú, tạo tác." },
        "PHÁ": { "rating": "XẤU", "text": "Đinh Sửu là Sát nhập trung cung, xấu không thể nói." },
        "CHẤP": { "rating": "XẤU", "text": "Đinh Sửu là Sát nhập trung cung, không thể dùng." },
        "ĐỊNH": { "rating": "BÌNH", "text": "Đinh Sửu tốt vừa. (Có thuyết nói xấu vì Sát nhập trung cung)." },
        "BÌNH": { "rating": "XẤU", "text": "Đinh Sửu Sát nhập trung cung, càng xấu." },
        "MÃN": { "rating": "XẤU", "text": "Đinh Sửu Sát nhập trung cung, hại nhân đinh." },
        "KIẾN": { "rating": "XẤU", "text": "Đinh Sửu Sát nhập trung cung, xấu." }
    },
    "Kỷ Sửu": {
        "ĐỊNH": { "rating": "XẤU", "text": "Kỷ Sửu bất lợi." },
        "KIẾN": { "rating": "BÌNH", "text": "Kỷ Sửu tốt vừa." }
    },
    "Tân Sửu": {
        "ĐỊNH": { "rating": "BÌNH", "text": "Tân Sửu tốt vừa." }
    },
    "Quý Sửu": {
        "ĐỊNH": { "rating": "BÌNH", "text": "Quý Sửu tốt vừa." },
        "KHAI": { "rating": "XẤU", "text": "Quý Sửu là sát nhập trung cung càng xấu." },
        "THÂU": { "rating": "XẤU", "text": "Quý Sửu sát nhập trung cung, xấu." },
        "THÀNH": { "rating": "XẤU", "text": "Quý Sửu là Sát nhập trung cung, càng xấu." },
        "NGUY": { "rating": "XẤU", "text": "Quý Sửu không nên giá thú, tạo tác." },
        "PHÁ": { "rating": "XẤU", "text": "Quý Sửu là Sát nhập trung cung, xấu không thể nói." },
        "CHẤP": { "rating": "XẤU", "text": "Quý Sửu là Sát nhập trung cung, không thể dùng." },
        "BÌNH": { "rating": "XẤU", "text": "Quý Sửu Sát nhập trung cung, càng xấu." },
        "MÃN": { "rating": "XẤU", "text": "Quý Sửu Sát nhập trung cung, hại nhân đinh." },
        "KIẾN": { "rating": "XẤU", "text": "Quý Sửu Sát nhập trung cung, xấu." }
    },
    "Giáp Dần": {
        "THÀNH": { "rating": "TỐT", "text": "Giáp Dần rất tốt cho hưng công, nhập trạch." },
        "NGUY": { "rating": "TỐT", "text": "Giáp Dần rất tốt cho khai sơn, mai táng, trăm việc (nhưng kị đi xa, hôn nhân)." },
        "PHÁ": { "rating": "XẤU", "text": "Giáp Dần chính tứ phế." },
        "CHẤP": { "rating": "XẤU", "text": "Giáp Dần chính tứ phế, xấu." },
        "ĐỊNH": { "rating": "XẤU", "text": "Giáp Dần chính tứ phế, xấu." },
        "BÌNH": { "rating": "TỐT", "text": "Giáp Dần tốt trên hết." },
        "MÃN": { "rating": "BÌNH", "text": "Giáp Dần tốt vừa." },
        "TRỪ": { "rating": "TỐT", "text": "Giáp Dần trăm việc thuận lợi, rất tốt." }
    },
    "Bính Dần": {
        "THÀNH": { "rating": "TỐT", "text": "Bính Dần (Thiên nguyệt đức) rất tốt cho hưng công, nhập trạch." },
        "PHÁ": { "rating": "XẤU", "text": "Bính Dần không tốt." },
        "ĐỊNH": { "rating": "TỐT", "text": "Bính Dần rất tốt." },
        "MÃN": { "rating": "BÌNH", "text": "Bính Dần tốt vừa." },
        "TRỪ": { "rating": "TỐT", "text": "Bính Dần trăm việc thuận lợi, rất tốt." }
    },
    "Mậu Dần": {
        "KHAI": { "rating": "TỐT", "text": "Mậu Dần là Thiên xá dùng tốt." },
        "THÀNH": { "rating": "TỐT", "text": "Mậu Dần rất tốt cho hưng công, nhập trạch." },
        "PHÁ": { "rating": "XẤU", "text": "Mậu Dần không tốt." },
        "ĐỊNH": { "rating": "TỐT", "text": "Mậu Dần rất tốt." },
        "MÃN": { "rating": "TỐT", "text": "Mậu Dần tốt trên hết." },
        "TRỪ": { "rating": "BÌNH", "text": "Mậu Dần tốt vừa." }
    },
    "Canh Dần": {
        "THÀNH": { "rating": "TỐT", "text": "Canh Dần rất tốt cho hưng công, nhập trạch." },
        "PHÁ": { "rating": "XẤU", "text": "Canh Dần không tốt." },
        "CHẤP": { "rating": "TỐT", "text": "Canh Dần rất tốt." },
        "ĐỊNH": { "rating": "TỐT", "text": "Canh Dần rất tốt." },
        "BÌNH": { "rating": "BÌNH", "text": "Canh Dần tốt vừa." },
        "MÃN": { "rating": "BÌNH", "text": "Canh Dần tốt vừa." },
        "TRỪ": { "rating": "TỐT", "text": "Canh Dần trăm việc thuận lợi, rất tốt." }
    },
    "Nhâm Dần": {
        "KHAI": { "rating": "TỐT", "text": "Nhâm Dần có Thiên nguyệt đức, tốt cho mai táng, sinh cơ." },
        "THÀNH": { "rating": "BÌNH", "text": "Nhâm Dần tốt vừa." },
        "PHÁ": { "rating": "BÌNH", "text": "Nhâm Dần chỉ lợi an táng." },
        "ĐỊNH": { "rating": "BÌNH", "text": "Nhâm Dần phạm Nguyệt yếm (nhưng sách nói 3 ngày Bính/Mậu/Canh dù phạm vẫn rất tốt)." },
        "BÌNH": { "rating": "BÌNH", "text": "Nhâm Dần tốt vừa." },
        "MÃN": { "rating": "TỐT", "text": "Nhâm Dần tốt trên hết." },
        "TRỪ": { "rating": "TỐT", "text": "Nhâm Dần trăm việc thuận lợi, rất tốt." }
    },
    "Ất Mão": {
        "KHAI": { "rating": "TỐT", "text": "Ất Mão xuất hành, hôn giá, tạo tác, khai trương đều rất tốt." },
        "THÀNH": { "rating": "TỐT", "text": "Ất Mão lợi nhập trạch, hôn nhân, rất tốt." },
        "NGUY": { "rating": "XẤU", "text": "Ất Mão chính tứ phế, xấu." },
        "PHÁ": { "rating": "BÌNH", "text": "Ất Mão tốt vừa. Ất Mão chính tứ phế cũng xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Ất Mão chính tứ phế, xấu." },
        "ĐỊNH": { "rating": "TỐT", "text": "Ất Mão tốt." },
        "BÌNH": { "rating": "BÌNH", "text": "Duy Ất Mão tốt vừa." }
    },
    "Đinh Mão": {
        "NGUY": { "rating": "TỐT", "text": "Đinh Mão rất tốt cho khởi tạo, hôn nhân." }
    },
    "Kỷ Mão": {
        "NGUY": { "rating": "BÌNH", "text": "Kỷ Mão tốt vừa." },
        "CHẤP": { "rating": "TỐT", "text": "Kỷ Mão rất tốt." },
        "ĐỊNH": { "rating": "TỐT", "text": "Kỷ Mão tốt." }
    },
    "Tân Mão": {
        "KHAI": { "rating": "TỐT", "text": "Tân Mão xuất hành, hôn giá, tạo tác, khai trương đều rất tốt." },
        "THÀNH": { "rating": "TỐT", "text": "Tân Mão lợi nhập trạch, hôn nhân, rất tốt." },
        "NGUY": { "rating": "BÌNH", "text": "Tân Mão tốt vừa." },
        "CHẤP": { "rating": "TỐT", "text": "Tân Mão rất tốt." },
        "ĐỊNH": { "rating": "TỐT", "text": "Tân Mão tốt." },
        "BÌNH": { "rating": "XẤU", "text": "Tân Mão xấu." },
        "MÃN": { "rating": "BÌNH", "text": "Duy Tân Mão tạo tác tốt vừa." }
    },
    "Quý Mão": {
        "KHAI": { "rating": "TỐT", "text": "Quý Mão xuất hành, hôn giá, tạo tác, khai trương đều rất tốt." },
        "NGUY": { "rating": "TỐT", "text": "Quý Mão rất tốt cho khởi tạo, hôn nhân." },
        "PHÁ": { "rating": "BÌNH", "text": "Quý Mão tốt vừa." }
    },
    "Giáp Thìn": {
        "MÃN": { "rating": "XẤU", "text": "Giáp Thìn là sát tập trung, trăm việc đều kị, rất hung." },
        "TRỪ": { "rating": "XẤU", "text": "Giáp Thìn sát tập trung cung càng xấu." },
        "KIẾN": { "rating": "XẤU", "text": "Giáp Thìn là Sát nhập trung cung, càng xấu." },
        "BẾ": { "rating": "XẤU", "text": "Giáp Thìn là Sát nhập trung cung, không lợi tu tạo, an táng." },
        "KHAI": { "rating": "XẤU", "text": "Giáp Thìn là Sát tập trung cung, rất xấu." },
        "THÂU": { "rating": "BÌNH", "text": "Giáp Thìn tốt vừa, lợi sửa sang, an táng." },
        "THÀNH": { "rating": "XẤU", "text": "Giáp Thìn là Bạch hổ nhập trung cung, xấu." },
        "NGUY": { "rating": "XẤU", "text": "Giáp Thìn Sát nhập trung cung, rất xấu." },
        "PHÁ": { "rating": "XẤU", "text": "Giáp Thìn Sát nhập trung cung, rất xấu." },
        "CHẤP": { "rating": "BÌNH", "text": "Giáp Thìn chỉ sửa trộm." }
    },
    "Bính Thìn": {
        "BẾ": { "rating": "BÌNH", "text": "Bính Thìn mưu trù nhỏ được, kị khởi tạo, hôn nhân." },
        "KHAI": { "rating": "TỐT", "text": "Bính Thìn trăm việc rất tốt." },
        "THÂU": { "rating": "BÌNH", "text": "Bính Thìn tốt vừa, lợi sửa sang, an táng." },
        "THÀNH": { "rating": "BÌNH", "text": "Bính Thìn là ba ngày táng, tốt vừa." },
        "NGUY": { "rating": "TỐT", "text": "Bính Thìn rất tốt." },
        "CHẤP": { "rating": "BÌNH", "text": "Bính Thìn an táng tốt vừa." }
    },
    "Mậu Thìn": {
        "MÃN": { "rating": "XẤU", "text": "Mậu Thìn là sát tập trung, trăm việc đều kị, rất hung." },
        "TRỪ": { "rating": "XẤU", "text": "Mậu Thìn sát tập trung cung càng xấu." },
        "KIẾN": { "rating": "XẤU", "text": "Mậu Thìn là Sát nhập trung cung, càng xấu." },
        "BẾ": { "rating": "XẤU", "text": "Mậu Thìn là Sát nhập trung cung, không lợi tu tạo, an táng." },
        "KHAI": { "rating": "XẤU", "text": "Mậu Thìn là Sát tập trung cung, rất xấu." },
        "THÂU": { "rating": "XẤU", "text": "Mậu Thìn không tốt." },
        "THÀNH": { "rating": "XẤU", "text": "Mậu Thìn là Bạch hổ nhập trung cung, xấu." },
        "NGUY": { "rating": "XẤU", "text": "Mậu Thìn không tốt." },
        "PHÁ": { "rating": "XẤU", "text": "Mậu Thìn Sát nhập trung cung, rất xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Mậu Thìn Sát nhập trung cung, rất xấu." },
        "BÌNH": { "rating": "XẤU", "text": "Mậu Thìn Sát nhập trung cung, xấu." }
    },
    "Canh Thìn": {
        "BẾ": { "rating": "XẤU", "text": "Canh Thìn thiên địa chuyển sát." },
        "KHAI": { "rating": "TỐT", "text": "Canh Thìn trăm việc rất tốt." },
        "THÂU": { "rating": "XẤU", "text": "Canh Thìn không tốt." },
        "THÀNH": { "rating": "BÌNH", "text": "Canh Thìn là ba ngày táng, tốt vừa." },
        "NGUY": { "rating": "XẤU", "text": "Canh Thìn không tốt." },
        "BÌNH": { "rating": "BÌNH", "text": "Canh Thìn làm nhỏ cũng tốt vừa." }
    },
    "Nhâm Thìn": {
        "BẾ": { "rating": "BÌNH", "text": "Nhâm Thìn mưu trù nhỏ được, kị khởi tạo, hôn nhân." },
        "KHAI": { "rating": "TỐT", "text": "Nhâm Thìn trăm việc rất tốt." },
        "THÂU": { "rating": "BÌNH", "text": "Nhâm Thìn tốt vừa, lợi sửa sang, an táng." },
        "THÀNH": { "rating": "BÌNH", "text": "Nhâm Thìn là ba ngày táng, tốt vừa." },
        "NGUY": { "rating": "TỐT", "text": "Nhâm Thìn nước trong sạch." },
        "ĐỊNH": { "rating": "BÌNH", "text": "Duy Nhâm Thìn chỉ nên an táng, giá thú." },
        "BÌNH": { "rating": "BÌNH", "text": "Nhâm Thìn tốt vừa." }
    },
    "Ất Tị": {
        "TRỪ": { "rating": "XẤU", "text": "Ất Tị không nên dùng." },
        "BẾ": { "rating": "TỐT", "text": "Ất Tị hưng công, hôn nhân, khai trương rất tốt." },
        "KHAI": { "rating": "BÌNH", "text": "Ất Tị tốt vừa." },
        "NGUY": { "rating": "TỐT", "text": "Ất Tị rất tốt." },
        "THÀNH": { "rating": "TỐT", "text": "Ất Tị rất tốt." },
        "PHÁ": { "rating": "BÌNH", "text": "Duy Ất Tị tốt vừa." },
        "CHẤP": { "rating": "TỐT", "text": "Ất Tị rất tốt." }
    },
    "Đinh Tị": {
        "TRỪ": { "rating": "TỐT", "text": "Đinh Tị nên tu tạo, nhập trạch, hôn nhân (rất tốt)." },
        "PHÁ": { "rating": "XẤU", "text": "Đinh Tị chính tứ phế, xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Đinh Tị chính tứ phế, xấu." },
        "ĐỊNH": { "rating": "XẤU", "text": "Đinh Tị Chính tứ phế, xấu." }
    },
    "Kỷ Tị": {
        "TRỪ": { "rating": "BÌNH", "text": "Kỷ Tị tạo tác tốt, kị mai táng." },
        "THÀNH": { "rating": "TỐT", "text": "Kỷ Tị rất tốt." },
        "CHẤP": { "rating": "TỐT", "text": "Kỷ Tị rất tốt." }
    },
    "Tân Tị": {
        "TRỪ": { "rating": "XẤU", "text": "Tân Tị không nên dùng." },
        "BẾ": { "rating": "TỐT", "text": "Tân Tị hưng công, hôn nhân, khai trương rất tốt." },
        "CHẤP": { "rating": "BÌNH", "text": "Tân Tị tốt vừa." }
    },
    "Quý Tị": {
        "TRỪ": { "rating": "XẤU", "text": "Quý Tị không nên dùng." },
        "KHAI": { "rating": "BÌNH", "text": "Quý Tị tốt vừa." },
        "CHẤP": { "rating": "TỐT", "text": "Quý Tị rất tốt." },
        "ĐỊNH": { "rating": "BÌNH", "text": "Quý Tị khai sơn, an táng tốt vừa; kị hôn nhân, nhập trạch." }
    },
    "Giáp Ngọ": {
        "MÃN": { "rating": "XẤU", "text": "Giáp Ngọ không nên dùng." },
        "TRỪ": { "rating": "TỐT", "text": "Giáp Ngọ tốt cho tu tạo, hôn nhân, khai trương." },
        "KIẾN": { "rating": "BÌNH", "text": "Giáp Ngọ Thiên xá, tốt vừa." },
        "BẾ": { "rating": "BÌNH", "text": "Giáp Ngọ chỉ dùng việc nhỏ hoặc an táng là tốt vừa." },
        "NGUY": { "rating": "TỐT", "text": "Giáp Ngọ rất tốt." }
    },
    "Bính Ngọ": {
        "MÃN": { "rating": "BÌNH", "text": "Bính Ngọ bình thường." },
        "TRỪ": { "rating": "XẤU", "text": "Bính Ngọ là thiên địa chuyển sát, xấu." },
        "BẾ": { "rating": "BÌNH", "text": "Bính Ngọ chỉ dùng việc nhỏ hoặc an táng là tốt vừa." },
        "KHAI": { "rating": "TỐT", "text": "Bính Ngọ rất tốt cho giá thú, tu tạo, an táng." },
        "THÂU": { "rating": "BÌNH", "text": "Bính Ngọ tốt vừa nhưng phạm thì xấu." },
        "THÀNH": { "rating": "TỐT", "text": "Bính Ngọ rất tốt." },
        "NGUY": { "rating": "XẤU", "text": "Bính Ngọ chính tứ phế, xấu." },
        "PHÁ": { "rating": "XẤU", "text": "Bính Ngọ chính tứ phế, xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Bính Ngọ chính tứ phế, xấu." }
    },
    "Mậu Ngọ": {
        "MÃN": { "rating": "XẤU", "text": "Mậu Ngọ không nên dùng." },
        "TRỪ": { "rating": "XẤU", "text": "Mậu Ngọ là thiên địa chuyển sát, xấu." },
        "BẾ": { "rating": "XẤU", "text": "Mậu Ngọ trùng tang, không thể dùng." },
        "KHAI": { "rating": "TỐT", "text": "Mậu Ngọ rất tốt cho giá thú, tu tạo, an táng." },
        "THÂU": { "rating": "XẤU", "text": "Mậu Ngọ bất lợi." }
    },
    "Canh Ngọ": {
        "MÃN": { "rating": "XẤU", "text": "Canh Ngọ không nên dùng." },
        "TRỪ": { "rating": "TỐT", "text": "Canh Ngọ tốt cho tu tạo, hôn nhân, khai trương." },
        "BẾ": { "rating": "BÌNH", "text": "Canh Ngọ chỉ dùng việc nhỏ hoặc an táng là tốt vừa." },
        "KHAI": { "rating": "XẤU", "text": "Canh Ngọ rất xấu." },
        "THÂU": { "rating": "XẤU", "text": "Canh Ngọ bất lợi." },
        "CHẤP": { "rating": "TỐT", "text": "Canh Ngọ rất tốt." }
    },
    "Nhâm Ngọ": {
        "MÃN": { "rating": "BÌNH", "text": "Nhâm Ngọ có Thiên đức, Nguyệt đức dùng tốt vừa." },
        "TRỪ": { "rating": "TỐT", "text": "Nhâm Ngọ tốt cho tu tạo, hôn nhân, khai trương." },
        "BẾ": { "rating": "BÌNH", "text": "Nhâm Ngọ chỉ dùng việc nhỏ hoặc an táng là tốt vừa." },
        "KHAI": { "rating": "TỐT", "text": "Nhâm Ngọ rất tốt cho giá thú, tu tạo, an táng." },
        "THÂU": { "rating": "BÌNH", "text": "Nhâm Ngọ tốt vừa." },
        "PHÁ": { "rating": "BÌNH", "text": "Nhâm Ngọ dùng nho nhỏ thì được." },
        "CHẤP": { "rating": "TỐT", "text": "Nhâm Ngọ rất tốt." }
    },
    "Ất Mùi": {
        "CHẤP": { "rating": "XẤU", "text": "Ất Mùi sát tập trung cung càng kị khởi tạo, nhập trạch, hôn nhân, khai trương." },
        "ĐỊNH": { "rating": "XẤU", "text": "Ất Mùi là Bạch hổ nhập trung cung, càng xấu." },
        "BÌNH": { "rating": "XẤU", "text": "Ất Mùi càng thêm xấu hiểm." },
        "TRỪ": { "rating": "XẤU", "text": "Duy Ất Mùi rất bất lợi." },
        "KIẾN": { "rating": "XẤU", "text": "Ất Mùi là Sát nhập trung cung, không lợi tu tạo, hôn nhân, rất xấu." },
        "BẾ": { "rating": "XẤU", "text": "Riêng Ất Mùi là Sát nhập trung cung, rất xấu." },
        "KHAI": { "rating": "XẤU", "text": "Ất Mùi trăm sự không lợi." },
        "THÂU": { "rating": "XẤU", "text": "Ất Mùi xấu." },
        "THÀNH": { "rating": "XẤU", "text": "Ất Mùi Sát nhập trung cung, kị dùng." },
        "NGUY": { "rating": "XẤU", "text": "Ất Mùi Sát nhập trung cung, càng xấu." },
        "PHÁ": { "rating": "XẤU", "text": "Ất Mùi Sát nhập trung cung, xấu." }
    },
    "Đinh Mùi": {
        "BẾ": { "rating": "BÌNH", "text": "Đinh Mùi dùng việc nhỏ tốt vừa." },
        "KHAI": { "rating": "BÌNH", "text": "Đinh Mùi tốt vừa (chỉ nên phạt cỏ, an táng)." },
        "THÂU": { "rating": "XẤU", "text": "Đinh Mùi xấu." },
        "NGUY": { "rating": "TỐT", "text": "Đinh Mùi trăm việc tốt hết." }
    },
    "Kỷ Mùi": {
        "MÃN": { "rating": "BÌNH", "text": "Kỷ Mùi tốt vừa." },
        "BẾ": { "rating": "BÌNH", "text": "Kỷ Mùi tốt vừa." },
        "KHAI": { "rating": "BÌNH", "text": "Kỷ Mùi tốt vừa (chỉ nên phạt cỏ, an táng)." },
        "NGUY": { "rating": "BÌNH", "text": "Kỷ Mùi mai táng tốt vừa." },
        "PHÁ": { "rating": "XẤU", "text": "Kỷ Mùi Sát nhập trung cung, xấu." }
    },
    "Tân Mùi": {
        "MÃN": { "rating": "BÌNH", "text": "Tân Mùi tốt vừa." },
        "BẾ": { "rating": "BÌNH", "text": "Tân Mùi dùng việc nhỏ tốt vừa." },
        "KHAI": { "rating": "BÌNH", "text": "Tân Mùi tốt vừa (chỉ nên phạt cỏ, an táng)." },
        "THÂU": { "rating": "BÌNH", "text": "Tân Mùi tốt vừa." },
        "NGUY": { "rating": "XẤU", "text": "Tân Mùi bất lợi." },
        "PHÁ": { "rating": "XẤU", "text": "Tân Mùi Sát nhập trung cung, xấu." }
    },
    "Quý Mùi": {
        "ĐỊNH": { "rating": "TỐT", "text": "Duy chỉ có ngày Quý Mùi là rất tốt, lợi người sống lâu, thêm con cháu." },
        "BẾ": { "rating": "BÌNH", "text": "Quý Mùi tốt vừa." },
        "KHAI": { "rating": "BÌNH", "text": "Quý Mùi tốt vừa (chỉ nên phạt cỏ, an táng)." },
        "THÂU": { "rating": "BÌNH", "text": "Quý Mùi tốt vừa." },
        "THÀNH": { "rating": "TỐT", "text": "Duy Quý Mùi tốt trên hết." },
        "NGUY": { "rating": "XẤU", "text": "Quý Mùi bất lợi." },
        "PHÁ": { "rating": "TỐT", "text": "Quý Mùi trăm việc rất tốt." }
    },
    "Giáp Thân": {
        "ĐỊNH": { "rating": "TỐT", "text": "Giáp Thân an táng, phá đất rất tốt." },
        "BÌNH": { "rating": "XẤU", "text": "Giáp Thân là Sát nhập trung cung, càng xấu." },
        "MÃN": { "rating": "BÌNH", "text": "Giáp Thân tốt vừa cho an táng, khởi tạo (không nên động thổ)." },
        "TRỪ": { "rating": "TỐT", "text": "Giáp Thân rất tốt cho khởi tạo, an táng." },
        "KIẾN": { "rating": "BÌNH", "text": "Giáp Thân chỉ nên mai táng." },
        "BẾ": { "rating": "BÌNH", "text": "Giáp Thân tốt vừa." },
        "KHAI": { "rating": "BÌNH", "text": "Giáp Thân tốt cho an táng (nhưng kị khởi tạo, hôn nhân)." },
        "THÂU": { "rating": "TỐT", "text": "Duy Giáp Thân lợi an táng, hôn thú, khởi tạo." },
        "THÀNH": { "rating": "TỐT", "text": "Giáp Thân rất tốt." },
        "NGUY": { "rating": "TỐT", "text": "Giáp Thân khởi tạo, an táng tốt." }
    },
    "Bính Thân": {
        "ĐỊNH": { "rating": "TỐT", "text": "Bính Thân an táng, phá đất rất tốt." },
        "MÃN": { "rating": "BÌNH", "text": "Bính Thân tốt vừa cho an táng, khởi tạo (không nên động thổ)." },
        "TRỪ": { "rating": "XẤU", "text": "Bính Thân không dùng." },
        "KIẾN": { "rating": "XẤU", "text": "Bính Thân càng xấu." },
        "BẾ": { "rating": "TỐT", "text": "Bính Thân tốt nhất (thượng cát)." },
        "THÀNH": { "rating": "XẤU", "text": "Bính Thân phạm quỷ khốc." },
        "NGUY": { "rating": "BÌNH", "text": "Bính Thân chỉ nên mai táng." }
    },
    "Mậu Thân": {
        "ĐỊNH": { "rating": "XẤU", "text": "Mậu Thân xấu." },
        "MÃN": { "rating": "BÌNH", "text": "Mậu Thân tốt vừa cho an táng, khởi tạo (không nên động thổ)." },
        "KIẾN": { "rating": "TỐT", "text": "Mậu Thân Thiên xá (?)." },
        "BẾ": { "rating": "TỐT", "text": "Mậu Thân tốt nhất (thượng cát)." },
        "KHAI": { "rating": "BÌNH", "text": "Mậu Thân tốt cho an táng (nhưng kị khởi tạo, hôn nhân)." },
        "THÀNH": { "rating": "TỐT", "text": "Mậu Thân rất tốt." }
    },
    "Canh Thân": {
        "PHÁ": { "rating": "XẤU", "text": "Canh Thân là chính tứ phế, càng xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Canh Thân là Xuân chính tứ phế, trăm việc phải kiêng." },
        "ĐỊNH": { "rating": "XẤU", "text": "Canh Thân xấu." },
        "BÌNH": { "rating": "XẤU", "text": "Canh Thân là Sát nhập trung cung, càng xấu." },
        "MÃN": { "rating": "XẤU", "text": "Canh Thân không thể dùng." },
        "TRỪ": { "rating": "BÌNH", "text": "Canh Thân thận trọng." },
        "KIẾN": { "rating": "XẤU", "text": "Canh Thân Sát nhập trung cung." },
        "BẾ": { "rating": "TỐT", "text": "Canh Thân tốt nhất (thượng cát)." },
        "KHAI": { "rating": "XẤU", "text": "Canh Thân Sát nhập trung cung, rất xấu." },
        "THÂU": { "rating": "XẤU", "text": "Canh Thân Thụ tử, Sát nhập trung cung, rất xấu." },
        "THÀNH": { "rating": "BÌNH", "text": "Canh Thân chỉ nên an táng và tu tạo nhỏ, nếu làm lớn thì rất xấu." },
        "NGUY": { "rating": "BÌNH", "text": "Canh Thân tốt vừa cho việc nhỏ, an táng; kị làm lớn." }
    },
    "Nhâm Thân": {
        "ĐỊNH": { "rating": "TỐT", "text": "Nhâm Thân là ngày thập toàn rất tốt." },
        "KIẾN": { "rating": "BÌNH", "text": "Nhâm Thân chỉ nên mai táng." },
        "BẾ": { "rating": "BÌNH", "text": "Nhâm Thân tốt vừa." },
        "THÀNH": { "rating": "TỐT", "text": "Nhâm Thân rất tốt." },
        "NGUY": { "rating": "BÌNH", "text": "Nhâm Thân chỉ nên mai táng." }
    },
    "Ất Dậu": {
        "CHẤP": { "rating": "TỐT", "text": "Ất Dậu nên tu tạo, nhập trạch." },
        "MÃN": { "rating": "BÌNH", "text": "Ất Dậu tốt vừa." },
        "TRỪ": { "rating": "BÌNH", "text": "Ất Dậu tốt vừa." },
        "BẾ": { "rating": "BÌNH", "text": "Ất Dậu an táng được." },
        "KHAI": { "rating": "TỐT", "text": "Ất Dậu tốt nhất." },
        "THÀNH": { "rating": "TỐT", "text": "Ất Dậu là ngày tốt trọn vẹn." }
    },
    "Đinh Dậu": {
        "NGUY": { "rating": "TỐT", "text": "Duy có Đinh Dậu có Thiên đức, Phúc tinh nên an táng, hoàn phúc nguyện, xuất hành, khai trương; nhưng kị khởi tạo, hôn nhân." },
        "CHẤP": { "rating": "TỐT", "text": "Đinh Dậu an táng tốt." },
        "MÃN": { "rating": "XẤU", "text": "Đinh Dậu bất lợi hoặc xấu." },
        "TRỪ": { "rating": "XẤU", "text": "Đinh Dậu xấu." },
        "THÀNH": { "rating": "TỐT", "text": "Đinh Dậu mai táng tốt nhất." }
    },
    "Kỷ Dậu": {
        "MÃN": { "rating": "XẤU", "text": "Kỷ Dậu bất lợi hoặc xấu." },
        "TRỪ": { "rating": "XẤU", "text": "Kỷ Dậu xấu." },
        "BẾ": { "rating": "BÌNH", "text": "Kỷ Dậu an táng được." },
        "KHAI": { "rating": "BÌNH", "text": "Kỷ Dậu an táng được." }
    },
    "Tân Dậu": {
        "NGUY": { "rating": "XẤU", "text": "Tân Dậu bỏ không dùng." },
        "PHÁ": { "rating": "XẤU", "text": "Tân Dậu là chính tứ phế, Nguyệt phá, rất xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Tân Dậu chính tứ phế không nên dùng." },
        "MÃN": { "rating": "BÌNH", "text": "Tân Dậu tốt vừa." },
        "TRỪ": { "rating": "XẤU", "text": "Tân Dậu xấu." },
        "THÀNH": { "rating": "BÌNH", "text": "Tân Dậu tốt vừa." }
    },
    "Quý Dậu": {
        "CHẤP": { "rating": "TỐT", "text": "Quý Dậu an táng tốt." },
        "MÃN": { "rating": "XẤU", "text": "Quý Dậu bất lợi hoặc xấu." },
        "TRỪ": { "rating": "XẤU", "text": "Quý Dậu xấu." },
        "THÀNH": { "rating": "TỐT", "text": "Quý Dậu là ngày tốt trọn vẹn." }
    },
    "Giáp Tuất": {
        "CHẤP": { "rating": "BÌNH", "text": "Duy Giáp Tuất mưu trù nho nhỏ là tốt vừa." },
        "ĐỊNH": { "rating": "TỐT", "text": "Giáp Tuất rất tốt cho khởi tạo, hôn nhân, an táng." },
        "BÌNH": { "rating": "BÌNH", "text": "Duy Giáp Tuất có thể dùng." },
        "TRỪ": { "rating": "BÌNH", "text": "Giáp Tuất tốt vừa." },
        "BẾ": { "rating": "TỐT", "text": "Giáp Tuất nên giá thú, khai trương (kị động thổ)." },
        "KHAI": { "rating": "BÌNH", "text": "Giáp Tuất trộm sửa có thể dùng." },
        "THÂU": { "rating": "BÌNH", "text": "Giáp Tuất trộm sửa có thể dùng." }
    },
    "Bính Tuất": {
        "THÀNH": { "rating": "XẤU", "text": "Bính Tuất sát tập trung cung, kị khởi tạo, hôn giá, nhập trạch." },
        "NGUY": { "rating": "XẤU", "text": "Bính Tuất là Sát nhập trung cung càng xấu." },
        "PHÁ": { "rating": "XẤU", "text": "Bính Tuất càng xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Bính Tuất rất xấu." },
        "ĐỊNH": { "rating": "XẤU", "text": "Bính Tuất là Sát nhập trung cung, khó được ích." },
        "MÃN": { "rating": "XẤU", "text": "Bính Tuất là Sát nhập trung cung, rất xấu, kị dùng." },
        "TRỪ": { "rating": "XẤU", "text": "Bính Tuất là Sát nhập trung cung, rất xấu." },
        "KIẾN": { "rating": "TỐT", "text": "Bính Tuất rất tốt." },
        "BẾ": { "rating": "XẤU", "text": "Bính Tuất trăm việc đều xấu." },
        "KHAI": { "rating": "XẤU", "text": "Bính Tuất Sát nhập trung cung, kị dùng." },
        "THÂU": { "rating": "XẤU", "text": "Bính Tuất trăm việc đều kị." }
    },
    "Mậu Tuất": {
        "THÀNH": { "rating": "XẤU", "text": "Mậu Tuất sát tập trung cung, kị khởi tạo, hôn giá, nhập trạch." },
        "ĐỊNH": { "rating": "TỐT", "text": "Mậu Tuất rất tốt cho khởi tạo, hôn nhân, an táng." },
        "TRỪ": { "rating": "BÌNH", "text": "Mậu Tuất tốt vừa." },
        "BẾ": { "rating": "XẤU", "text": "Mậu Tuất trăm việc đều xấu." },
        "THÂU": { "rating": "XẤU", "text": "Mậu Tuất trăm việc đều kị." }
    },
    "Canh Tuất": {
        "THÀNH": { "rating": "XẤU", "text": "Canh Tuất sát tập trung cung, kị khởi tạo, hôn giá, nhập trạch." },
        "ĐỊNH": { "rating": "TỐT", "text": "Canh Tuất rất tốt cho khởi tạo, hôn nhân, an táng." },
        "TRỪ": { "rating": "BÌNH", "text": "Canh Tuất tốt vừa." },
        "THÂU": { "rating": "TỐT", "text": "Canh Tuất trước khẩu thiệt sau rất tốt." }
    },
    "Nhâm Tuất": {
        "THÀNH": { "rating": "XẤU", "text": "Nhâm Tuất sát tập trung cung, kị khởi tạo, hôn giá, nhập trạch." },
        "NGUY": { "rating": "XẤU", "text": "Nhâm Tuất là Sát nhập trung cung càng xấu." },
        "PHÁ": { "rating": "XẤU", "text": "Nhâm Tuất càng xấu." },
        "CHẤP": { "rating": "XẤU", "text": "Nhâm Tuất rất xấu." },
        "ĐỊNH": { "rating": "XẤU", "text": "Nhâm Tuất là Sát nhập trung cung, khó được ích." },
        "MÃN": { "rating": "XẤU", "text": "Nhâm Tuất là Sát nhập trung cung, rất xấu, kị dùng." },
        "TRỪ": { "rating": "XẤU", "text": "Nhâm Tuất là Sát nhập trung cung, rất xấu." },
        "KHAI": { "rating": "XẤU", "text": "Nhâm Tuất Sát nhập trung cung, kị dùng." },
        "THÂU": { "rating": "XẤU", "text": "Nhâm Tuất trăm việc đều kị." }
    },
    "Ất Hợi": {
        "NGUY": { "rating": "BÌNH", "text": "Ất Hợi tốt vừa." },
        "CHẤP": { "rating": "BÌNH", "text": "Ất Hợi tốt vừa." },
        "ĐỊNH": { "rating": "TỐT", "text": "Ất Hợi (Văn Xương) rất tốt cho xuất hành, hôn nhân, động thổ." },
        "MÃN": { "rating": "TỐT", "text": "Ất Hợi rất tốt cho khởi tạo, hôn nhân." },
        "TRỪ": { "rating": "TỐT", "text": "Ất Hợi rất tốt." },
        "KIẾN": { "rating": "BÌNH", "text": "Ất Hợi chỉ nên làm nhỏ." },
        "BẾ": { "rating": "TỐT", "text": "Ất Hợi trăm việc đều tốt." },
        "KHAI": { "rating": "TỐT", "text": "Ất Hợi đều tốt trọn vẹn." }
    },
    "Đinh Hợi": {
        "NGUY": { "rating": "XẤU", "text": "Đinh Hợi (Thụ tử) không thể dùng." },
        "CHẤP": { "rating": "BÌNH", "text": "Đinh Hợi tốt vừa." },
        "ĐỊNH": { "rating": "TỐT", "text": "Đinh Hợi rất tốt cho xuất hành, hôn nhân, động thổ." },
        "MÃN": { "rating": "TỐT", "text": "Đinh Hợi rất tốt cho khởi tạo, hôn nhân." },
        "TRỪ": { "rating": "TỐT", "text": "Đinh Hợi rất tốt." },
        "BẾ": { "rating": "BÌNH", "text": "Đinh Hợi tốt vừa." },
        "KHAI": { "rating": "TỐT", "text": "Đinh Hợi đều tốt trọn vẹn." }
    },
    "Kỷ Hợi": {
        "NGUY": { "rating": "BÌNH", "text": "Kỷ Hợi tốt vừa (lợi việc học)." },
        "CHẤP": { "rating": "BÌNH", "text": "Kỷ Hợi tốt vừa." },
        "ĐỊNH": { "rating": "TỐT", "text": "Kỷ Hợi rất tốt cho xuất hành, hôn nhân, động thổ." },
        "MÃN": { "rating": "TỐT", "text": "Kỷ Hợi rất tốt cho khởi tạo, hôn nhân." },
        "TRỪ": { "rating": "TỐT", "text": "Kỷ Hợi rất tốt." },
        "KIẾN": { "rating": "BÌNH", "text": "Kỷ Hợi chỉ nên làm nhỏ." },
        "BẾ": { "rating": "TỐT", "text": "Kỷ Hợi trăm việc đều tốt." },
        "KHAI": { "rating": "TỐT", "text": "Kỷ Hợi đều tốt trọn vẹn." }
    },
    "Tân Hợi": {
        "THÀNH": { "rating": "TỐT", "text": "Tân Hợi tốt trên hết." },
        "NGUY": { "rating": "XẤU", "text": "Tân Hợi không thể dùng." },
        "CHẤP": { "rating": "XẤU", "text": "Tân Hợi xấu." },
        "ĐỊNH": { "rating": "XẤU", "text": "Tân Hợi không nên dùng." },
        "MÃN": { "rating": "XẤU", "text": "Tân Hợi không thể dùng." },
        "TRỪ": { "rating": "XẤU", "text": "Tân Hợi không dùng." },
        "BẾ": { "rating": "XẤU", "text": "Tân Hợi không thể dùng." },
        "KHAI": { "rating": "XẤU", "text": "Tân Hợi không thể dùng." }
    },
    "Quý Hợi": {
        "THÀNH": { "rating": "TỐT", "text": "Quý Hợi tốt trên hết." },
        "NGUY": { "rating": "XẤU", "text": "Quý Hợi (Thụ tử) không thể dùng." },
        "PHÁ": { "rating": "XẤU", "text": "Quý Hợi càng xấu. Mọi việc đều kị." },
        "CHẤP": { "rating": "XẤU", "text": "Quý Hợi xấu." },
        "ĐỊNH": { "rating": "XẤU", "text": "Quý Hợi không nên dùng." },
        "MÃN": { "rating": "XẤU", "text": "Quý Hợi không thể dùng." },
        "TRỪ": { "rating": "XẤU", "text": "Quý Hợi không dùng." },
        "BẾ": { "rating": "XẤU", "text": "Quý Hợi không thể dùng." },
        "KHAI": { "rating": "XẤU", "text": "Quý Hợi không thể dùng." }
    }
};

// --- CÁC HÀM TÍNH TOÁN CỐT LÕI ---
function INT(d) { return Math.floor(d); }
function getJulianDayNumber(dd, mm, yy) { const a = INT((14 - mm) / 12), y = yy + 4800 - a, m = mm + 12 * a - 3; let jd = dd + INT((153 * m + 2) / 5) + 365 * y + INT(y / 4) - INT(y / 100) + INT(y / 400) - 32045; if (jd < 2299161) { jd = dd + INT((153 * m + 2) / 5) + 365 * y + INT(y / 4) - 32083; } return jd; }
function jdnToGregorian(jdn) { let j = jdn + 32044; let g = INT(j / 146097); let dg = j % 146097; let c = INT((INT(dg / 36524) + 1) * 3 / 4); let dc = dg - c * 36524; let b = INT(dc / 1461); let db = dc % 1461; let a = INT((INT(db / 365) + 1) * 3 / 4); let da = db - a * 365; let y = g * 400 + c * 100 + b * 4 + a; let m = INT((da * 5 + 308) / 153) - 2; let d = da - INT((m + 4) * 153 / 5) + 122; let year = y - 4800 + INT((m + 2) / 12); let month = (m + 2) % 12 + 1; let day = d + 1; return { year, month, day }; }
function getNewMoonDay(k) { const T = k / 1236.85, T2 = T * T, T3 = T2 * T, dr = PI / 180; let Jd1 = 2415020.75933 + 29.53058868 * k + 0.0001178 * T2 - 0.000000155 * T3 + 0.00033 * Math.sin((166.56 + 132.87 * T - 0.009173 * T2) * dr); const M = 359.2242 + 29.10535608 * k - 0.0000333 * T2 - 0.00000347 * T3; const Mpr = 306.0253 + 385.81691806 * k + 0.0107306 * T2 + 0.00001236 * T3; const F = 21.2964 + 390.67050646 * k - 0.0016528 * T2 - 0.00000239 * T3; let C1 = (0.1734 - 0.000393 * T) * Math.sin(M * dr) + 0.0021 * Math.sin(2 * dr * M) - 0.4068 * Math.sin(Mpr * dr) + 0.0161 * Math.sin(dr * 2 * Mpr) - 0.0004 * Math.sin(dr * 3 * Mpr) + 0.0104 * Math.sin(dr * 2 * F) - 0.0051 * Math.sin(dr * (M + Mpr)) - 0.0074 * Math.sin(dr * (M - Mpr)) + 0.0004 * Math.sin(dr * (2 * F + M)) - 0.0004 * Math.sin(dr * (2 * F - M)) - 0.0006 * Math.sin(dr * (2 * F + Mpr)) + 0.0010 * Math.sin(dr * (2 * F - Mpr)) + 0.0005 * Math.sin(dr * (2 * Mpr + M)); let deltat = (T < -11) ? (0.001 + 0.000839 * T + 0.0002261 * T2 - 0.00000845 * T3 - 0.000000081 * T * T3) : (-0.000278 + 0.000265 * T + 0.000262 * T2); return INT(Jd1 + C1 - deltat + 0.5 + TIME_ZONE / 24); }
function getSunLongitude(jdn) { const T = (jdn - 2451545.5 - TIME_ZONE / 24) / 36525, T2 = T * T, dr = PI / 180; const M = 357.52910 + 35999.05030 * T - 0.0001559 * T2 - 0.00000048 * T * T2; const L0 = 280.46645 + 36000.76983 * T + 0.0003032 * T2; const DL = (1.914600 - 0.004817 * T - 0.000014 * T2) * Math.sin(dr * M) + (0.019993 - 0.000101 * T) * Math.sin(dr * 2 * M) + 0.000290 * Math.sin(dr * 3 * M); let L = L0 + DL; while (L < 0) L += 360; while (L >= 360) L -= 360; return L; }
function getTietKhi(jdn) { return TIET_KHI[INT(getSunLongitude(jdn) / 15) % 24]; }
function getLunarMonth11(yy) { let nm = getNewMoonDay(INT((getJulianDayNumber(31, 12, yy) - 2415021) / 29.530588853)); const sunLong = INT(getSunLongitude(nm) / 30); if (sunLong >= 9) { nm = getNewMoonDay(INT((getJulianDayNumber(31, 12, yy) - 2415021) / 29.530588853) - 1); } return nm; }
function getLeapMonthOffset(a11) { const k = INT((a11 - 2415021.076998695) / 29.530588853 + 0.5); let last = 0, i = 1, arc; do { last = INT(getSunLongitude(getNewMoonDay(k + i)) / 30); i++; arc = INT(getSunLongitude(getNewMoonDay(k + i)) / 30); } while (arc != last && i < 14); return i - 1; }
function convertSolarToLunar(solarDay, solarMonth, solarYear, hour) { let jdToUse = getJulianDayNumber(solarDay, solarMonth, solarYear); if (hour >= 23) { jdToUse += 1; } const k = INT((jdToUse - 2415021.076998695) / 29.530588853); let monthStart = getNewMoonDay(k + 1); if (monthStart > jdToUse) { monthStart = getNewMoonDay(k); } let a11 = getLunarMonth11(solarYear), b11 = a11, lunarYear, lunarMonth; if (a11 >= monthStart) { lunarYear = solarYear; a11 = getLunarMonth11(solarYear - 1); } else { lunarYear = solarYear + 1; b11 = getLunarMonth11(solarYear + 1); } const lunarDay = jdToUse - monthStart + 1; const diff = INT((monthStart - a11) / 29); let lunarLeap = 0; lunarMonth = diff + 11; if (b11 - a11 > 365) { const leapMonthDiff = getLeapMonthOffset(a11); if (diff >= leapMonthDiff) { lunarMonth = diff + 10; if (diff == leapMonthDiff) { lunarLeap = 1; } } } if (lunarMonth > 12) { lunarMonth -= 12; } if (lunarMonth >= 11 && diff < 4) { lunarYear -= 1; } return [lunarYear, lunarMonth, lunarDay, lunarLeap]; }
function getDateInfo(jdn) { const { year, month, day } = jdnToGregorian(jdn); const [lunarYear, lunarMonth, lunarDay, lunarLeap] = convertSolarToLunar(day, month, year, 12); const tietKhi = getTietKhi(jdn); const canNgay = (jdn + 9) % 10; const chiNgay = (jdn + 1) % 12; return { jdn: jdn, solarDay: day, solarMonth: month, solarYear: year, lunarDay: lunarDay, lunarMonth: lunarMonth, lunarYear: lunarYear, lunarLeap: lunarLeap, dayCanChi: THIEN_CAN[canNgay] + " " + DIA_CHI[chiNgay], monthCanChi: THIEN_CAN[(lunarYear * 12 + lunarMonth + 3) % 10] + " " + DIA_CHI[(lunarMonth + 1) % 12], yearCanChi: THIEN_CAN[(lunarYear + 6) % 10] + " " + DIA_CHI[(lunarYear + 8) % 12], tietKhi: tietKhi }; }
function getHourCanChi(dayCan, hour) { const canNgayIndex = THIEN_CAN.indexOf(dayCan); let canGioTyDauIndex; switch (canNgayIndex % 5) { case 0: canGioTyDauIndex = 0; break; case 1: canGioTyDauIndex = 2; break; case 2: canGioTyDauIndex = 4; break; case 3: canGioTyDauIndex = 6; break; case 4: canGioTyDauIndex = 8; break; } const chiGioIndex = CHI_TO_INDEX[HOUR_TO_CHI[hour]]; const canGioIndex = (canGioTyDauIndex + chiGioIndex) % 10; return THIEN_CAN[canGioIndex] + " " + DIA_CHI[chiGioIndex]; }
function getLunarNewYearJDN(lunarYear) { const a11 = getLunarMonth11(lunarYear - 1); const k = INT((a11 - 2415021.076998695) / 29.530588853 + 0.5); return getNewMoonDay(k + 2); }
function calculateBatMon(lunarMonth, lunarDay, hourIndex_0_based) { const mapping = ["Hưu", "Sinh", "Thương", "Đỗ", "Cảnh", "Tử", "Kinh", "Khai"]; return mapping[(lunarMonth + lunarDay + (hourIndex_0_based + 1)) % 8]; }
function calculateLucNham(lunarYear, lunarMonth, lunarDay, hourIndex_0_based) { const yearCanChi = THIEN_CAN[(lunarYear + 6) % 10] + " " + DIA_CHI[(lunarYear + 8) % 12]; const yearIndex_1_based = CHI_TO_INDEX[yearCanChi.split(" ")[1]] + 1; const mapping = ["Tiểu Cát", "Vô Vong", "Đại An", "Lưu Niên", "Tốc Hỷ", "Xích Khẩu"]; return mapping[(yearIndex_1_based + lunarMonth + lunarDay + (hourIndex_0_based + 1) - 2) % 6]; }
function getLacVietQueName(batMon, lucNham) { return `${batMon} - ${lucNham}`; }
function findGuaNumber(structure) { for (let guaNum in guaStructures) { if (JSON.stringify(guaStructures[guaNum]) === JSON.stringify(structure)) { return parseInt(guaNum); } } return 8; }
function calculateMaiHoa(hour, lunarDay, lunarMonth, lunarYear) { const hourIndex_1_based = CHI_TO_INDEX[HOUR_TO_CHI[hour]] + 1; const yearCanChi = THIEN_CAN[(lunarYear + 6) % 10] + " " + DIA_CHI[(lunarYear + 8) % 12]; const yearIndex_1_based = CHI_TO_INDEX[yearCanChi.split(" ")[1]] + 1; let upperGua = (lunarDay + lunarMonth + yearIndex_1_based) % 8 || 8; let lowerGua = (hourIndex_1_based + lunarDay + lunarMonth + yearIndex_1_based) % 8 || 8; let movingLine = (hourIndex_1_based + lunarDay + lunarMonth + yearIndex_1_based) % 6 || 6; const mainGuaName = gua64Names[`${upperGua}_${lowerGua}`] || "N/A"; const mainStructure = [...(guaStructures[lowerGua] || []), ...(guaStructures[upperGua] || [])]; const changedStructure = [...mainStructure]; if (movingLine >= 1 && movingLine <= 6) { changedStructure[movingLine - 1] = 1 - changedStructure[movingLine - 1]; } const innerChangedGua = findGuaNumber(changedStructure.slice(0, 3)); const outerChangedGua = findGuaNumber(changedStructure.slice(3, 6)); const changedGuaName = gua64Names[`${outerChangedGua}_${innerChangedGua}`] || "N/A"; return { mainGuaName, changedGuaName, movingLine }; }
function getHoangDao(dayChi, hourChi) { const startHourChi = HOANG_DAO_START_HOUR[dayChi]; const startIndex = DIA_CHI.indexOf(startHourChi); const currentIndex = DIA_CHI.indexOf(hourChi); let godIndex = (currentIndex - startIndex); if (godIndex < 0) godIndex += 12; return VONG_HOANG_DAO[godIndex % 12]; }
function getCanChiNguHanhRelation(dayCanChi) { const [can, chi] = dayCanChi.split(" "); const hanhCan = NGU_HANH_CAN[can]; const hanhChi = NGU_HANH_CHI[chi]; if (!hanhCan || !hanhChi) return { text: "N/A", class: "" }; if (hanhCan === hanhChi || NGU_HANH_RELATION[hanhChi].sinh === hanhCan || NGU_HANH_RELATION[hanhCan].sinh === hanhChi) { return { text: "Tốt", class: "text-good" }; } if (NGU_HANH_RELATION[hanhChi].khac === hanhCan || NGU_HANH_RELATION[hanhCan].khac === hanhChi) { return { text: "Xấu", class: "text-bad" }; } return { text: "Bình", class: "" }; }

// --- CÁC HÀM TÍNH TOÁN VÀ HIỂN THỊ ---

function calculateEquationOfTime(jdn) {
    const n = jdn - 2451545.0;
    const L = (280.46061837 + 0.98564736629 * n) % 360;
    const g = (357.52911 + 0.98560028 * n) % 360;
    const L_rad = L * PI / 180;
    const g_rad = g * PI / 180;
    const lambda = L + 1.914602 * Math.sin(g_rad) + 0.019993 * Math.sin(2 * g_rad) + 0.000289 * Math.sin(3 * g_rad);
    const obliq = (23.439291 - 0.00000036 * n) * PI / 180;
    const alpha = Math.atan2(Math.cos(obliq) * Math.sin(lambda * PI / 180), Math.cos(lambda * PI / 180));
    let eot_minutes = 4 * ((L * PI / 180 - alpha) * 180 / PI);
    if (eot_minutes > 20) eot_minutes -= 1440;
    if (eot_minutes < -20) eot_minutes += 1440;
    return eot_minutes;
}

function getSolarNoon(jdn, longitude) {
    const eotMinutes = calculateEquationOfTime(jdn);
    const solarNoonDecimalHours = 12 - (longitude / 15) - (eotMinutes / 60) + TIME_ZONE;
    const hours = Math.floor(solarNoonDecimalHours);
    const minutes = Math.round((solarNoonDecimalHours - hours) * 60);
    const date = new Date();
    date.setHours(hours, minutes);
    return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
}

async function getLongitude(locationName) {
    if (!locationName) return null;
    try {
        const geoResponse = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(locationName)}&format=json&limit=1`);
        const geoData = await geoResponse.json();
        if (!geoData || geoData.length === 0) {
            console.error('Không tìm thấy địa điểm:', locationName);
            return null;
        }
        return parseFloat(geoData[0].lon);
    } catch (error) {
        console.error('Lỗi API địa điểm:', error);
        return null;
    }
}

function getSaoTotInfo(lunarMonth, dayCan, dayChi, dayCanChi) {
    const foundStars = [];
    const monthIndex = lunarMonth - 1;

    DU_LIEU_SAO.forEach(sao => {
        let isMatch = false;
        switch (sao.loai) {
            case "mapping_thang":
                const mapValue = sao.map[monthIndex];
                if (mapValue) {
                    const values = mapValue.split(',');
                    for (const val of values) {
                        if (THIEN_CAN.includes(val) && val === dayCan) { isMatch = true; break; }
                        if (DIA_CHI.includes(val) && val === dayChi) { isMatch = true; break; }
                        if (val.includes(' ') && val === dayCanChi) { isMatch = true; break; }
                    }
                }
                break;
            case "co_dinh":
                if (sao.ngay.includes(dayCanChi)) isMatch = true;
                break;
            case "nhom_thang":
                let nhom;
                if ([1, 4, 7, 10].includes(lunarMonth)) nhom = "nhom_1_4_7_10";
                else if ([2, 5, 8, 11].includes(lunarMonth)) nhom = "nhom_2_5_8_11";
                else if ([3, 6, 9, 12].includes(lunarMonth)) nhom = "nhom_3_6_9_12";
                if (nhom && sao.duLieu[nhom] && sao.duLieu[nhom].includes(dayCanChi)) isMatch = true;
                break;
        }
        if (isMatch) foundStars.push(`<div><strong>${sao.ten}:</strong> ${sao.yNghia}</div>`);
    });

    return foundStars.length > 0 ? `<div class="detail-cell-content">${foundStars.join('')}</div>` : '<div class="detail-cell-content"><span>Không có</span></div>';
}

function getSaoXauInfo(lunarMonth, lunarDay, dayCan, dayChi, dayCanChi) {
    const foundStars = [];
    const monthIndex = lunarMonth - 1;

    DU_LIEU_SAO_XAU.forEach(sao => {
        let isMatch = false;
        switch (sao.loai) {
            case "mapping_thang":
                const mapValue = sao.map[monthIndex];
                if (mapValue) {
                    const values = mapValue.split(',');
                    for (const val of values) {
                        if (THIEN_CAN.includes(val) && val === dayCan) { isMatch = true; break; }
                        if (DIA_CHI.includes(val) && val === dayChi) { isMatch = true; break; }
                        if (val.includes(' ') && val === dayCanChi) { isMatch = true; break; }
                    }
                }
                break;
            case "ngay_theo_thang":
                if (sao.map[monthIndex] && sao.map[monthIndex].includes(lunarDay)) isMatch = true;
                break;
            case "co_dinh":
                if (sao.ngay.includes(dayCanChi)) isMatch = true;
                break;
            case "nhom_thang":
                let nhom;
                if ([1, 4, 7, 10].includes(lunarMonth)) nhom = "nhom_1_4_7_10";
                else if ([2, 5, 8, 11].includes(lunarMonth)) nhom = "nhom_2_5_8_11";
                else if ([3, 6, 9, 12].includes(lunarMonth)) nhom = "nhom_3_6_9_12";
                if (nhom && sao.duLieu[nhom] && sao.duLieu[nhom].includes(dayCanChi)) isMatch = true;
                break;
        }
        if (isMatch) foundStars.push(`<div><strong>${sao.ten}:</strong> ${sao.yNghia}</div>`);
    });

    return foundStars.length > 0 ? `<div class="detail-cell-content">${foundStars.join('')}</div>` : '<div class="detail-cell-content"><span>Không có</span></div>';
}


function getNgayHoangDao(thangTietKhi, ngayChi) { if (!thangTietKhi || thangTietKhi === 'N/A') return `<div class="detail-cell-content"><strong class="text-bad">Lỗi HĐ (Tháng)</strong></div>`; const thangChi = TIET_KHI_MONTH_CHI[thangTietKhi]; if (!thangChi) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi HĐ (Chi Tháng)</strong></div>`; const saoName = NGAY_HOANG_DAO_LOOKUP[thangChi]?.[ngayChi]; if (!saoName) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi HĐ (Lookup)</strong></div>`; const saoDetail = NGAY_HOANG_DAO_DATA[saoName]; if (!saoDetail) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi HĐ (Data)</strong></div>`; const isHoangDao = saoDetail.type === "Hoàng Đạo"; const ratingClass = isHoangDao ? "text-good" : "text-bad"; let html = `<div class="detail-cell-content"><strong class="${ratingClass}">${saoName} (${saoDetail.type})</strong><br>`; if (saoDetail.nghi) html += `<span>• <strong>Nghi:</strong> ${saoDetail.nghi}</span><br>`; if (saoDetail.ky) html += `<span>• <strong>Kỵ:</strong> ${saoDetail.ky}</span>`; html += `</div>`; return html; }
function get12Truc(thangTietKhi, dayChi) { if (!thangTietKhi || thangTietKhi === 'N/A') return `<div class="detail-cell-content"><strong class="text-bad">Lỗi Trực (Tháng)</strong></div>`; const thangChi = TIET_KHI_MONTH_CHI[thangTietKhi]; if (!thangChi) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi Trực (Chi Tháng)</strong></div>`; const thangIndex = CHI_TO_INDEX[thangChi]; const ngayIndex = CHI_TO_INDEX[dayChi]; if (thangIndex === undefined || ngayIndex === undefined) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi Trực (Index)</strong></div>`; const offset = (ngayIndex - thangIndex + 12) % 12; const trucName = TRUC_NAMES[offset]; const trucDetail = TRUC_INFO[trucName]; if (!trucDetail) return `<div class="detail-cell-content"><strong>${trucName}</strong><br><span class="text-bad">(Thiếu dữ liệu)</span></div>`; let ratingClass = trucDetail.rating.includes("Tốt") ? "text-good" : (trucDetail.rating.includes("Xấu") ? "text-bad" : ""); return `<div class="detail-cell-content">` + `<strong class="${ratingClass}">${trucDetail.name}</strong><br>` + `<strong class="${ratingClass}">(${trucDetail.rating})</strong><br>` + `<span>• <strong>Nghi:</strong> ${trucDetail.nghi}</span><br>` + `<span>• <strong>Kỵ:</strong> ${trucDetail.ky}</span><br>` + `<span>• <strong>Ngoại trừ:</strong> ${trucDetail.ngoaitru}</span>` + `</div>`; }
function get28Batu(jdn) { const diff = jdn - BAT_TU_EPOCH.jdn; const index = (diff + BAT_TU_EPOCH.index + 28000) % 28; const batuName = BAT_TU_NAMES[index]; const batuDetail = BAT_TU_INFO[batuName]; if (!batuDetail) return `<div class="detail-cell-content"><strong>${batuName}</strong><br><span class="text-bad">(Thiếu dữ liệu)</span></div>`; let ratingClass = batuDetail.rating.includes("Tốt") ? "text-good" : (batuDetail.rating.includes("Xấu") ? "text-bad" : ""); return `<div class="detail-cell-content">` + `<strong class="${ratingClass}">${batuDetail.name}</strong><br>` + `<strong class="${ratingClass}">(${batuDetail.rating})</strong><br>` + `<span>• <strong>Nghi:</strong> ${batuDetail.nghi}</span><br>` + `<span>• <strong>Kỵ:</strong> ${batuDetail.ky}</span><br>` + `<span>• <strong>Ngoại trừ:</strong> ${batuDetail.ngoaitru}</span>` + `</div>`; }
function get12TrucName(thangTietKhi, dayChi) { const thangChi = TIET_KHI_MONTH_CHI[thangTietKhi]; if (!thangChi) return null; const thangIndex = CHI_TO_INDEX[thangChi]; const ngayIndex = CHI_TO_INDEX[dayChi]; if (thangIndex === undefined || ngayIndex === undefined) return null; const offset = (ngayIndex - thangIndex + 12) % 12; return TRUC_NAMES[offset]; }
function getDongCong(dayCanChi, trucName) { if (!trucName) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi ĐC (Trực)</strong></div>`; const trucNameInUpperCase = trucName.toUpperCase(); const dongCongDetail = DONG_CONG_DATA[dayCanChi]?.[trucNameInUpperCase]; if (!dongCongDetail) return `<div class="detail-cell-content"><span>N/A</span></div>`; const ratingClass = dongCongDetail.rating.includes("TỐT") ? "text-good" : (dongCongDetail.rating.includes("XẤU") ? "text-bad" : ""); let html = `<div class="detail-cell-content"><strong class="${ratingClass}">${dongCongDetail.rating}</strong>`; if (dongCongDetail.text) html += `<br><span>${dongCongDetail.text}</span>`; html += `</div>`; return html; }
function getCanChiXungInfo(dayCanChi, birthYearCanChi) { const xungList = CAN_CHI_XUNG_DATA[dayCanChi] || []; if (xungList.length === 0) return ''; return xungList.map(xung => { if (xung === birthYearCanChi) { return `<span class="text-bad">${xung}</span>`; } return xung; }).join('<br>'); }
function getCoreNguHanh(napAmString) { if (!napAmString || napAmString === 'N/A') return null; if (napAmString.endsWith('Kim')) return 'Kim'; if (napAmString.endsWith('Mộc')) return 'Mộc'; if (napAmString.endsWith('Thủy')) return 'Thủy'; if (napAmString.endsWith('Hỏa')) return 'Hỏa'; if (napAmString.endsWith('Thổ')) return 'Thổ'; return null; }
function getNguHanhNgayChuInfo(dayCanChi, birthYearCanChi) { const napAmNgay = LAC_THU_NAP_AM_MAP[dayCanChi]; const napAmChu = LAC_THU_NAP_AM_MAP[birthYearCanChi]; const hanhNgay = getCoreNguHanh(napAmNgay); const hanhChu = getCoreNguHanh(napAmChu); if (!hanhNgay || !hanhChu) { return { text: "N/A", class: "" }; } const displayText = `${hanhNgay} - ${hanhChu}`; if (hanhNgay === hanhChu || NGU_HANH_RELATION[hanhNgay].sinh === hanhChu || NGU_HANH_RELATION[hanhChu].sinh === hanhNgay) { return { text: `Tốt - ${displayText}`, class: "text-good" }; } if (NGU_HANH_RELATION[hanhNgay].khac === hanhChu || NGU_HANH_RELATION[hanhChu].khac === hanhNgay) { return { text: `Xấu - ${displayText}`, class: "text-bad" }; } return { text: displayText, class: "" }; }

// *** HÀM ĐÃ ĐƯỢC CẬP NHẬT THEO YÊU CẦU ***
function getChiNgayChuInfo(dayChi, birthYearChi) {
    // Phần 1: Quan hệ Ngũ Hành
    const hanhNgay = NGU_HANH_CHI[dayChi];
    const hanhChu = NGU_HANH_CHI[birthYearChi];
    let nguHanhHtml = '';
    if (!hanhNgay || !hanhChu) {
        nguHanhHtml = `<span>N/A</span>`;
    } else {
        const displayText = `${hanhNgay} - ${hanhChu}`;
        if (hanhNgay === hanhChu || NGU_HANH_RELATION[hanhNgay].sinh === hanhChu || NGU_HANH_RELATION[hanhChu].sinh === hanhNgay) {
            nguHanhHtml = `<span class="text-good">Tốt - ${displayText}</span>`;
        } else if (NGU_HANH_RELATION[hanhNgay].khac === hanhChu || NGU_HANH_RELATION[hanhChu].khac === hanhNgay) {
            nguHanhHtml = `<span class="text-bad">Xấu - ${displayText}</span>`;
        } else {
            nguHanhHtml = `<span>${displayText}</span>`;
        }
    }

    // Phần 2: Quan hệ Địa Chi
    const relations = DIA_CHI_RELATIONS[birthYearChi];
    let chiRelationHtml = '';
    if (relations) {
         if (dayChi === birthYearChi) {
            if (relations.tuongHinh === birthYearChi) {
                 chiRelationHtml = `<span class="text-bad">Tự Hình</span>`;
            } else {
                chiRelationHtml = `<span>Trực Thái Tuế</span>`;
            }
        } else if (dayChi === relations.nhiHop) {
            chiRelationHtml = `<span class="text-good">Nhị Hợp</span>`;
        } else if (relations.tamHop.includes(dayChi)) {
            chiRelationHtml = `<span class="text-good">Tam Hợp</span>`;
        } else if (dayChi === relations.lucXung) {
            chiRelationHtml = `<span class="text-bad">Lục Xung</span>`;
        } else if (dayChi === relations.lucHai) {
            chiRelationHtml = `<span class="text-bad">Lục Hại</span>`;
        } else if ((Array.isArray(relations.tuongHinh) && relations.tuongHinh.includes(dayChi)) || relations.tuongHinh === dayChi ) {
             chiRelationHtml = `<span class="text-bad">Tương Hình</span>`;
        }
    }

    // Đảo ngược thứ tự hiển thị theo yêu cầu
    if (chiRelationHtml) {
        return `${chiRelationHtml}<br>${nguHanhHtml}`;
    }
    return nguHanhHtml;
}


function getKttsSatChuThoTuInfo(yearCan, dayCanChi, lunarMonth) { const results = []; const dayChi = dayCanChi.split(" ")[1]; if (KIM_THAN_THAT_SAT_DATA[yearCan]?.includes(dayChi)) { results.push("KTTS"); } if (SAT_CHU_DUONG_DATA[lunarMonth] === dayChi) { results.push("Sát chủ dương"); } if (SAT_CHU_AM_DATA[lunarMonth] === dayChi) { results.push("Sát chủ âm"); } if (SAT_CHU_MUA_DATA[dayChi]?.includes(lunarMonth)) { results.push("Sát chủ mùa"); } if (SAT_CHU_THANG_DATA[dayChi]?.includes(lunarMonth)) { results.push("Sát chủ tháng"); } if (THO_TU_DATA[lunarMonth] === dayCanChi) { results.push("Thọ tử"); } if (results.length > 0) { return { text: results.join('<br>'), class: 'text-bad' }; } else { return { text: 'No', class: '' }; } }
function getTamDaiKietTinhInfo(lunarMonth, dayCanChi) { const results = []; const category = SAO_THANG_CATEGORY[lunarMonth]; if (!category) return { text: '', class: '' }; for (const star in TAM_DAI_KIET_TINH_DATA) { if (TAM_DAI_KIET_TINH_DATA[star][category]?.has(dayCanChi)) { results.push(star); } } if (results.length > 0) { return { text: results.join('<br>'), class: 'text-good' }; } else { return { text: '', class: '' }; } }
function getKyCuoiHoiInfo(lunarMonth, lunarDay, dayChi) {
    const results = [];
    if (THIEN_DA_DATA[lunarMonth]?.has(dayChi)) { results.push("Thiên đả"); }
    if (THIEN_LOI_DATA[lunarMonth] === dayChi) { results.push("Thiên lôi"); }
    if (THIEN_MA_DATA[lunarMonth]?.has(dayChi)) { results.push("Thiên ma"); }
    if (TAM_CUONG_DAYS.has(lunarDay)) { results.push("Tam cường"); }
    if (results.length > 0) { return { text: results.join('<br>'), class: 'text-bad' }; } 
    else { return { text: 'No', class: '' }; }
}
function getGioXauTotInfo(lunarMonth, dayChi, dayCan, tietKhi, hourChi) {
    const isSatChu = GIO_SAT_CHU[lunarMonth] === hourChi;
    const isThoTu = GIO_THO_TU[dayChi] === hourChi;
    const isThienCau = (GIO_THIEN_CAU[lunarMonth] && GIO_THIEN_CAU[lunarMonth][dayChi] === hourChi);
    const quyNhan = (QUY_NHAN_DATA[dayCan]?.[tietKhi]?.[hourChi] || '').trim();

    return {
        satChu: { text: isSatChu ? 'Yes' : 'No', class: isSatChu ? 'text-bad-no-bold' : 'text-good-no-bold' },
        thoTu: { text: isThoTu ? 'Yes' : 'No', class: isThoTu ? 'text-bad-no-bold' : 'text-good-no-bold' },
        thienCau: { text: isThienCau ? 'Yes' : 'No', class: isThienCau ? 'text-bad-no-bold' : 'text-good-no-bold' },
        quyNhan: { text: quyNhan, class: (quyNhan === 'Dương QN' || quyNhan === 'Âm QN') ? 'text-good' : '' }
    };
}

// --- CÁC HÀM GIAO DIỆN VÀ SỰ KIỆN ---
function getYearInfo(year) { if (!year || isNaN(year)) return { canChi: 'N/A', lacThuNapAm: 'N/A', lucThapNapAm: 'N/A' }; const canChi = THIEN_CAN[(year + 6) % 10] + " " + DIA_CHI[(year + 8) % 12]; const lacThuNapAm = LAC_THU_NAP_AM_MAP[canChi] || "N/A"; const lucThapNapAm = LUC_THAP_NAP_AM_MAP[canChi] || "N/A"; return { canChi, lacThuNapAm, lucThapNapAm }; }
function updateYearDisplay() { const birthYear = document.getElementById('birth-year').value; const viewYear = document.getElementById('view-year').value; const birthInfo = getYearInfo(parseInt(birthYear)); document.getElementById('birth-year-info').innerHTML = `<span class="lac-thu-nap-am">${birthInfo.canChi} - ${birthInfo.lacThuNapAm}</span><br><span class="luc-thap-nap-am">${birthInfo.canChi} - ${birthInfo.lucThapNapAm}</span>`; const viewInfo = getYearInfo(parseInt(viewYear)); document.getElementById('view-year-info').innerHTML = `<span class="lac-thu-nap-am">${viewInfo.canChi} - ${viewInfo.lacThuNapAm}</span><br><span class="luc-thap-nap-am">${viewInfo.canChi} - ${viewInfo.lucThapNapAm}</span>`; }
function getTietKhiMonth(tietKhi) { return TIET_KHI_MONTH_MAP[tietKhi] || 'N/A'; }

function updateXungHighlighting() {
    const birthYear = document.getElementById('birth-year').value;
    const birthInfo = getYearInfo(parseInt(birthYear));
    const birthYearCanChi = birthInfo.canChi;
    const rows = document.querySelectorAll('#table-body tr');
    rows.forEach(row => {
        const dayCanChiCell = row.querySelector('td[data-col-idx="6"]');
        const xungCell = row.querySelector('td[data-col-idx="28"]');
        const nhNgayChuCell = row.querySelector('td[data-col-idx="29"]');
        // CHI NGÀY - CHỦ (idx 30) is now handled directly in generateYearTable
        if (dayCanChiCell && xungCell) {
            const dayCanChi = dayCanChiCell.textContent;
            xungCell.innerHTML = getCanChiXungInfo(dayCanChi, birthYearCanChi);
        }
        if (dayCanChiCell && nhNgayChuCell) {
            const dayCanChi = dayCanChiCell.textContent;
            const info = getNguHanhNgayChuInfo(dayCanChi, birthYearCanChi);
            nhNgayChuCell.innerHTML = `<span class="${info.class}">${info.text}</span>`;
        }
    });
}

async function generateYearTable() {
    const lunarYearToView = parseInt(document.getElementById('view-year').value);
    if (!lunarYearToView || isNaN(lunarYearToView)) { alert("Vui lòng nhập năm xem (âm lịch) hợp lệ."); return; }
    
    const birthYear = document.getElementById('birth-year').value;
    const birthInfo = getYearInfo(parseInt(birthYear));
    const birthYearCanChi = birthInfo.canChi;
    const birthYearChi = birthInfo.canChi.split(" ")[1];

    const loadingOverlay = document.getElementById('loading-overlay');
    loadingOverlay.style.display = 'flex';
    
    const locationName = document.getElementById('location-check').value;
    const longitude = await getLongitude(locationName);

    await new Promise(resolve => setTimeout(resolve, 50));

    const startLunarYearJDN = getLunarNewYearJDN(lunarYearToView);
    const endLunarYearJDN = getLunarNewYearJDN(lunarYearToView + 1) - 1;
    const finalStartDateJDN = startLunarYearJDN - 15;
    const finalEndDateJDN = endLunarYearJDN + 15;

    const tableBody = document.getElementById('table-body');
    let tableHtml = '';
    let stt = 1;

    for (let jdn = finalStartDateJDN; jdn <= finalEndDateJDN; jdn++, stt++) {
        const dayInfo = getDateInfo(jdn);
        
        let nguyetTanTuLyTuTuyetStr = "";
        const nextJdnInfo = getDateInfo(jdn + 1);
        if (dayInfo.tietKhi !== nextJdnInfo.tietKhi) {
            if (TU_LY_TERMS.has(nextJdnInfo.tietKhi)) { nguyetTanTuLyTuTuyetStr = "Tứ ly"; } 
            else if (TU_TUYET_TERMS.has(nextJdnInfo.tietKhi)) { nguyetTanTuLyTuTuyetStr = "Tứ tuyệt"; }
        }
        if (nguyetTanTuLyTuTuyetStr === "" && nextJdnInfo.lunarDay === 1) { nguyetTanTuLyTuTuyetStr = "Nguyệt tận"; }
        const finalNguyetTanStr = nguyetTanTuLyTuTuyetStr || "No";
        const nguyetTanClass = nguyetTanTuLyTuTuyetStr ? 'text-bad' : '';
        
        const dayCan = dayInfo.dayCanChi.split(" ")[0];
        const dayChi = dayInfo.dayCanChi.split(" ")[1];
        const monthCan = dayInfo.monthCanChi.split(" ")[0];

        const canChiXungHtml = getCanChiXungInfo(dayInfo.dayCanChi, birthYearCanChi);
        
        const isKyDongTho = [1, 3, 7].includes(dayInfo.lunarMonth) || monthCan === 'Mậu' || monthCan === 'Kỷ' || dayCan === 'Mậu' || dayCan === 'Kỷ';
        const kyDongThoStr = isKyDongTho ? 'Yes' : 'No';
        const kyDongThoClass = isKyDongTho ? 'text-bad' : '';

        const taiThan = TAI_THAN_DIRECTION[dayCan] || 'N/A';
        const hyThan = HY_THAN_DIRECTION[dayCan] || 'N/A';
        const hacThan = HAC_THAN_DIRECTION[dayInfo.dayCanChi] || 'N/A';
        const huongThanHtml = `Tài thần: ${taiThan}<br>Hỷ thần: ${hyThan}<br><span class="text-bad">Hạc thần: ${hacThan}</span>`;
        
        const nhNgayChuInfo = getNguHanhNgayChuInfo(dayInfo.dayCanChi, birthYearCanChi);
        const chiNgayChuInfoHtml = getChiNgayChuInfo(dayChi, birthYearChi);
        
        const yearCan = dayInfo.yearCanChi.split(" ")[0];
        const tietKhiMonth = getTietKhiMonth(dayInfo.tietKhi);
        
        const kttsInfo = getKttsSatChuThoTuInfo(yearCan, dayInfo.dayCanChi, dayInfo.lunarMonth);
        const tamDaiInfo = getTamDaiKietTinhInfo(dayInfo.lunarMonth, dayInfo.dayCanChi);
        const kyCuoiHoiInfo = getKyCuoiHoiInfo(dayInfo.lunarMonth, dayInfo.lunarDay, dayChi);

        const isTamNuong = [3, 7, 13, 18, 22, 27].includes(dayInfo.lunarDay) ? "Yes" : "No";
        const isDaiNguyetKy = [5, 14, 23].includes(dayInfo.lunarDay) ? "Yes" : "No";
        const dayOfWeek = NGAY_TRONG_TUAN[(jdn + 1) % 7];
        const canChiRelation = getCanChiNguHanhRelation(dayInfo.dayCanChi);
        const ngayHDInfo = getNgayHoangDao(tietKhiMonth, dayChi);
        const trucInfo = get12Truc(tietKhiMonth, dayChi);
        const batuInfo = get28Batu(jdn);
        const trucName = get12TrucName(tietKhiMonth, dayChi);
        const dongCongInfo = getDongCong(dayInfo.dayCanChi, trucName);
        const saoTotInfo = getSaoTotInfo(dayInfo.lunarMonth, dayCan, dayChi, dayInfo.dayCanChi);
        const saoXauInfo = getSaoXauInfo(dayInfo.lunarMonth, dayInfo.lunarDay, dayCan, dayChi, dayInfo.dayCanChi);
        
        const solarNoonStr = longitude !== null ? getSolarNoon(jdn, longitude) : "N/A";
        
        // **ĐÃ CẬP NHẬT**: Tính toán cho cột Đổng Công 2 và tô đậm Can Chi ngày
        let dongCong2Text = (trucName && DONG_CONG_2_DATA[tietKhiMonth] && DONG_CONG_2_DATA[tietKhiMonth][trucName]) ? DONG_CONG_2_DATA[tietKhiMonth][trucName] : 'N/A';
        if (dongCong2Text !== 'N/A') {
            const dayCanChi = dayInfo.dayCanChi;
            dongCong2Text = dongCong2Text.replace(new RegExp(dayCanChi, 'g'), `<strong>${dayCanChi}</strong>`);
        }
        const dongCong2Info = `<div class="detail-cell-content">${dongCong2Text}</div>`;


        tableHtml += `<tr>
            <td data-col-idx="0">${stt}</td>
            <td data-col-idx="1">${String(dayInfo.solarDay).padStart(2, '0')}/${String(dayInfo.solarMonth).padStart(2, '0')}/${dayInfo.solarYear}</td>
            <td data-col-idx="2">${dayInfo.lunarDay}/${dayInfo.lunarMonth}${dayInfo.lunarLeap ? ' (nhuận)' : ''}/${dayInfo.lunarYear}</td>
            <td data-col-idx="3">${dayInfo.lunarDay}</td>
            <td data-col-idx="4">${dayInfo.lunarMonth}${dayInfo.lunarLeap ? ' (N)' : ''}</td>
            <td data-col-idx="5">${dayInfo.lunarYear}</td>
            <td data-col-idx="6">${dayInfo.dayCanChi}</td>
            <td data-col-idx="7">${dayInfo.monthCanChi}</td>
            <td data-col-idx="8">${dayInfo.yearCanChi}</td>
            <td data-col-idx="9">${dayInfo.tietKhi}</td>
            <td data-col-idx="10">${tietKhiMonth}</td>
            <td data-col-idx="11" style="color: red;">${solarNoonStr}</td>
            <td data-col-idx="12" class="${isTamNuong === 'Yes' ? 'text-bad' : ''}">${isTamNuong}</td>
            <td data-col-idx="13" class="${isDaiNguyetKy === 'Yes' ? 'text-bad' : ''}">${isDaiNguyetKy}</td>
            <td data-col-idx="14"><span class="${canChiRelation.class}">${canChiRelation.text}</span></td>
            <td data-col-idx="15" class="detail-cell">${ngayHDInfo}</td>
            <td data-col-idx="16" class="detail-cell">${trucInfo}</td>
            <td data-col-idx="17" class="detail-cell">${dongCongInfo}</td>
            <td data-col-idx="18" class="detail-cell">${dongCong2Info}</td>
            <td data-col-idx="19" class="detail-cell">${batuInfo}</td>
            <td data-col-idx="20" class="detail-cell">${saoTotInfo}</td>
            <td data-col-idx="21" class="detail-cell">${saoXauInfo}</td>
            <td data-col-idx="22" class="${nguyetTanClass}">${finalNguyetTanStr}</td>
            <td data-col-idx="23" class="${kttsInfo.class}">${kttsInfo.text}</td>
            <td data-col-idx="24" class="${tamDaiInfo.class}">${tamDaiInfo.text}</td>
            <td data-col-idx="25" class="${kyDongThoClass}">${kyDongThoStr}</td>
            <td data-col-idx="26" class="${kyCuoiHoiInfo.class}">${kyCuoiHoiInfo.text}</td>
            <td data-col-idx="27">${dayOfWeek}</td>
            <td data-col-idx="28" class="xung-cell">${canChiXungHtml}</td>
            <td data-col-idx="29"><span class="${nhNgayChuInfo.class}">${nhNgayChuInfo.text}</span></td>
            <td data-col-idx="30">${chiNgayChuInfoHtml}</td>
            <td data-col-idx="31" class="huong-than-cell">${huongThanHtml}</td>
        `;

        const hours = [23, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21];
        for (let j = 0; j < hours.length; j++) {
            const hour = hours[j];
            const hourCanChiText = getHourCanChi(dayCan, hour);
            const hourChi = hourCanChiText.split(" ")[1];
            
            const lvdtQue = getLacVietQueName(calculateBatMon(dayInfo.lunarMonth, dayInfo.lunarDay, j), calculateLucNham(dayInfo.lunarYear, dayInfo.lunarMonth, dayInfo.lunarDay, j));
            const isLvdtGood = GOOD_LVDT_QUE.has(lvdtQue);
            const maiHoa = calculateMaiHoa(hour, dayInfo.lunarDay, dayInfo.lunarMonth, dayInfo.lunarYear);
            const maiHoaKey = `${maiHoa.mainGuaName}_${maiHoa.changedGuaName}`;
            const isMaiHoaGood = GOOD_MAIHOA_QUE.has(maiHoaKey);
            const hoangDao = getHoangDao(dayChi, hourChi);
            const isHoangDaoGood = hoangDao.type === "Hoàng Đạo";
            
            const gioXauTot = getGioXauTotInfo(dayInfo.lunarMonth, dayChi, dayCan, dayInfo.tietKhi, hourChi);

            const lvdtHtml = `<span class="${isLvdtGood ? 'good-result' : ''}">1. LVĐT: ${lvdtQue}</span>`;
            const maiHoaHtml = `<span class="${isMaiHoaGood ? 'good-result' : ''}">2. Mai Hoa: ${maiHoa.mainGuaName} - ${maiHoa.changedGuaName} - HĐ: ${maiHoa.movingLine}</span>`;
            const hoangDaoHtml = `<span class="${isHoangDaoGood ? 'good-result' : ''}">3. Hoàng Đạo: ${hoangDao.name} (${hoangDao.type})</span>`;
            const satChuHtml = `<span class="${gioXauTot.satChu.class}">4. Sát Chủ: ${gioXauTot.satChu.text}</span>`;
            const thoTuHtml = `<span class="${gioXauTot.thoTu.class}">5. Thọ Tử: ${gioXauTot.thoTu.text}</span>`;
            const thienCauHtml = `<span class="${gioXauTot.thienCau.class}">6. Thiên Cẩu Hạ Thực: ${gioXauTot.thienCau.text}</span>`;
            const quyNhanHtml = `<span class="${gioXauTot.quyNhan.class}">7. Thiên Ất Quý Nhân: ${gioXauTot.quyNhan.text || 'N/A'}</span>`;
            const xungTuoiRawHtml = getCanChiXungInfo(hourCanChiText, birthYearCanChi);
            const xungTuoiDisplayHtml = xungTuoiRawHtml ? xungTuoiRawHtml.replace(/<br>/g, ', ') : 'Không';
            const xungTuoiHtml = `<span>8. Xung tuổi: ${xungTuoiDisplayHtml}</span>`;

            
            tableHtml += `<td class="hour-cell" data-col-idx="${32+j}">${hourCanChiText}\n${lvdtHtml}\n${maiHoaHtml}\n${hoangDaoHtml}\n${satChuHtml}\n${thoTuHtml}\n${thienCauHtml}\n${quyNhanHtml}\n${xungTuoiHtml}</td>`;
        }
        tableHtml += `</tr>`;
    }
    tableBody.innerHTML = tableHtml;
    
    document.querySelectorAll('.detail-cell').forEach(cell => { if (cell) { cell.dataset.originalHtml = cell.innerHTML; } });
    loadingOverlay.style.display = 'none';
    applyEventHighlighting(); 
    updateXungHighlighting();
}

function applyEventHighlighting() {
    const eventInput = document.getElementById('event-check');
    if (!eventInput) return;
    const searchTerms = eventInput.value.toLowerCase().split(',').map(t => t.trim()).filter(t => t);
    const detailCells = document.querySelectorAll('.detail-cell');

    detailCells.forEach(cell => {
        if (cell.dataset.originalHtml) {
            cell.innerHTML = cell.dataset.originalHtml;
        }

        if (searchTerms.length === 0) return;

        let content = cell.innerHTML;
        const colIdx = parseInt(cell.getAttribute('data-col-idx'));

        searchTerms.forEach(term => {
            if (!term) return;
            const regex = new RegExp(term, 'gi');
            
            // **ĐÃ CẬP NHẬT**: Logic tô đậm cho Đổng Công 2
            if (colIdx === 18) {
                content = content.replace(regex, `<strong>$&</strong>`);
            } else if (colIdx === 20) { // Cột SAO TỐT
                content = content.replace(regex, `<span class="highlight-good">$&</span>`);
            } else if (colIdx === 21) { // Cột SAO XẤU
                content = content.replace(regex, `<span class="highlight-bad">$&</span>`);
            } else {
                content = content.replace(/(<span>• <strong>Nghi:<\/strong>.*?)(<\/span>)/gi, (match, p1, p2) => {
                    return p1.replace(regex, `<span class="highlight-good">$&</span>`) + p2;
                });
                content = content.replace(/(<span>• <strong>Kỵ:<\/strong>.*?)(<\/span>)/gi, (match, p1, p2) => {
                    return p1.replace(regex, `<span class="highlight-bad">$&</span>`) + p2;
                });
            }
        });
        cell.innerHTML = content;
    });
}

function setupColumnToggles() { const toggleContainer = document.getElementById('column-toggle-controls'); toggleContainer.innerHTML = '<span>Ẩn/Hiện Cột:</span>'; const headers = document.querySelectorAll('#main-table thead [data-col-idx]'); headers.forEach(th => { const index = th.getAttribute('data-col-idx'); const headerText = th.textContent.trim(); if (!headerText || th.hasAttribute('colspan')) return; const checkboxId = `toggle-col-${index}`; const label = document.createElement('label'); label.innerHTML = `<input type="checkbox" id="${checkboxId}" data-col-index="${index}" checked> ${headerText}`; toggleContainer.appendChild(label); document.getElementById(checkboxId).addEventListener('change', applyColumnVisibility); }); }
function applyColumnVisibility() { const dynamicStyles = document.getElementById('dynamic-column-styles'); let cssRules = ''; const checkboxes = document.querySelectorAll('#column-toggle-controls input[type="checkbox"]'); checkboxes.forEach(cb => { if (!cb.checked) { const colIndex = cb.getAttribute('data-col-index'); cssRules += `[data-col-idx="${colIndex}"] { display: none; }\n`; } }); dynamicStyles.innerHTML = cssRules; let ngayVisibleCount = 0; let gioVisibleCount = 0; const allHeadersInSecondRow = document.querySelectorAll('#main-table thead tr:nth-child(2) th[data-col-idx]'); allHeadersInSecondRow.forEach(th => { const colIndex = th.getAttribute('data-col-idx'); const correspondingCheckbox = document.getElementById(`toggle-col-${colIndex}`); if (correspondingCheckbox && correspondingCheckbox.checked) { if (th.classList.contains('header-ngay')) { ngayVisibleCount++; } else if (th.classList.contains('header-gio')) { gioVisibleCount++; } } }); const ngayGroupHeader = document.querySelector('#main-table thead .header-ngay[colspan]'); const gioGroupHeader = document.querySelector('#main-table thead .header-gio[colspan]'); if (ngayGroupHeader) { ngayGroupHeader.setAttribute('colspan', ngayVisibleCount > 0 ? ngayVisibleCount : 1); ngayGroupHeader.style.display = ngayVisibleCount > 0 ? '' : 'none'; } if (gioGroupHeader) { gioGroupHeader.setAttribute('colspan', gioVisibleCount > 0 ? gioVisibleCount : 1); gioGroupHeader.style.display = gioVisibleCount > 0 ? '' : 'none'; } }
function createFilterInputs() { const filterRow = document.getElementById('filter-row'); filterRow.innerHTML = ''; const totalCols = 44; for (let i = 0; i < totalCols; i++) { const th = document.createElement('th'); th.setAttribute('data-col-idx', i); th.innerHTML = `<input type="text" class="filter-input" data-column-filter="${i}" placeholder="Lọc...">`; filterRow.appendChild(th); } document.querySelectorAll('#filter-row input.filter-input').forEach(input => { input.addEventListener('keyup', applyFilters); }); applyColumnVisibility(); }
function applyFilters() { const filters = Array.from(document.querySelectorAll('#filter-row input.filter-input')).map(input => ({ columnIndex: parseInt(input.dataset.columnFilter), conditions: input.value.toLowerCase().split(',').map(c => c.trim()).filter(c => c) })).filter(f => f.conditions.length > 0); const rows = document.querySelectorAll('#table-body tr'); rows.forEach(row => { let isVisible = true; for (const filter of filters) { const cell = row.querySelector(`[data-col-idx="${filter.columnIndex}"]`); const cellText = cell ? cell.textContent.toLowerCase() : ''; const matchFound = filter.conditions.some(condition => cellText.includes(condition)); if (!matchFound) { isVisible = false; break; } } row.style.display = isVisible ? '' : 'none'; }); }

// --- HÀM HỖ TRỢ MỚI ---
function debounce(func, delay) { let timeout; return function(...args) { clearTimeout(timeout); timeout = setTimeout(() => func.apply(this, args), delay); }; }

// --- KHỞI TẠO TRANG ---
window.onload = async () => {
    try {
        document.getElementById('view-year').value = new Date().getFullYear();
        updateYearDisplay();
        setupColumnToggles();
        createFilterInputs(); 

        // Event Listeners
        const fullRebuild = async () => { await generateYearTable(); applyFilters(); };
        
        document.getElementById('birth-year').addEventListener('change', () => { 
            updateYearDisplay();
            generateYearTable(); // Regenerate table for the new birth year
        });

        document.getElementById('view-year').addEventListener('change', () => {
            updateYearDisplay();
            fullRebuild();
        });

        document.getElementById('location-check').addEventListener('change', fullRebuild);
        document.getElementById('event-check').addEventListener('keyup', debounce(applyEventHighlighting, 300));
        
        document.getElementById('table-body').addEventListener('click', (e) => {
            // Logic for marking rows to hide by clicking STT cell
            const sttCell = e.target.closest('td[data-col-idx="0"]');
            if (sttCell) {
                sttCell.parentElement.classList.toggle('row-hidden');
                return; // Prevent other click actions on the same row
            }

            // Original logic for highlighting individual data cells
            const cell = e.target.closest('.hour-cell, .detail-cell, .xung-cell, .huong-than-cell');
            if (cell) {
                cell.classList.toggle('manual-highlight');
            }
        });
        
        document.getElementById('btn-notes').addEventListener('click', () => {
            const notes = document.getElementById('notes-container');
            notes.style.display = notes.style.display === 'block' ? 'none' : 'block';
        });

        // NEW: Event listener for the hide/show rows button
        document.getElementById('btn-toggle-hidden-rows').addEventListener('click', () => {
            const btn = document.getElementById('btn-toggle-hidden-rows');
            document.body.classList.toggle('hide-mode');

            if (document.body.classList.contains('hide-mode')) {
                btn.textContent = 'Hiện Lại Dòng';
                btn.classList.add('active');
            } else {
                btn.textContent = 'Ẩn Dòng';
                btn.classList.remove('active');
            }
        });

        document.getElementById('btn-print-view').addEventListener('click', () => {
            document.body.classList.remove('print-mode-khach');
            const oldStyle = document.getElementById('print-style-khach');
            if (oldStyle) oldStyle.innerHTML = '';
            window.print();
        });

        document.getElementById('btn-print-khach').addEventListener('click', () => {
            const styleId = 'print-style-khach';
            let style = document.getElementById(styleId);
            if (!style) {
                style = document.createElement('style');
                style.id = styleId;
                document.head.appendChild(style);
            }
            style.innerHTML = '@page { size: A4 landscape; margin: 1cm; }';
            
            document.body.classList.add('print-mode-khach');
            
            const afterPrintHandler = () => {
                document.body.classList.remove('print-mode-khach');
                if (style) style.innerHTML = ''; 
                window.removeEventListener('afterprint', afterPrintHandler);
            };
            window.addEventListener('afterprint', afterPrintHandler);
            
            window.print();
        });

        await generateYearTable();
    } catch (error) {
        console.error("Đã xảy ra lỗi nghiêm trọng khi khởi tạo trang:", error);
        alert("Đã có lỗi xảy ra. Vui lòng kiểm tra Console (F12) để biết thêm chi tiết.");
        const loadingOverlay = document.getElementById('loading-overlay');
        if(loadingOverlay) {
            loadingOverlay.innerHTML = '<span>Đã xảy ra lỗi! Vui lòng tải lại trang.</span>';
            loadingOverlay.style.display = 'flex';
        }
    }
};
</script>
</body>
</html>
