<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NGÀY TỐT XẤU - By TIEN.TQN</title>
    <style id="dynamic-column-styles"></style>
    <style>
        body {
            font-family: "Times New Roman", Times, serif;
            font-size: 14px;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            width: 98%;
            max-width: 2400px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border: 2px solid #333;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        .header-container .main-title-group {
            text-align: left;
        }
        .header-container .action-buttons-group {
            text-align: right;
            white-space: nowrap;
        }
        .header-container .action-buttons-group button {
            padding: 5px 10px;
            font-size: 13px;
            margin-left: 10px;
            cursor: pointer;
        }
        h1, .slogan {
            margin: 0;
            padding: 0;
        }
        h1 {
            color: blue;
            font-size: 27px;
            font-weight: bold;
        }
        .slogan {
            color: red;
            font-size: 27px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-bottom: 10px;
            padding: 15px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
        }
        .control-group { display: flex; align-items: center; gap: 10px; }
        .control-group label { font-weight: bold; }
        .control-group input { padding: 5px; border: 1px solid #ccc; border-radius: 4px; width: 80px; }
        #event-check, #location-check { width: 150px; }
        .control-group .year-info { font-weight: normal; min-width: 200px; }
        .year-info .lac-thu-nap-am { font-weight: bold; color: red; }
        .year-info .luc-thap-nap-am { color: blue; font-size: 75%; }
        
        #column-toggle-controls {
            margin: 10px 0 20px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            font-size: 13px;
        }
        #column-toggle-controls label { cursor: pointer; user-select: none; }

        .table-container { overflow-x: auto; position: relative; max-height: 80vh; }
        #main-table { width: 100%; border-collapse: separate; border-spacing: 0; }
        #main-table th, #main-table td {
            border-right: 1px solid #ccc;
            border-bottom: 1px solid #ccc;
            padding: 5px 8px;
            text-align: center; /* Default alignment */
            vertical-align: middle;
            font-size: 13px;
            white-space: nowrap;
        }
        #main-table th { border-left: 1px solid #ccc; }
        #main-table td:first-child { border-left: 1px solid #ccc; }
        #main-table thead tr:first-child th { border-top: 1px solid #ccc; }

        #main-table thead { display: table-header-group; }
        #main-table thead th { background-color: #e9ecef; }
        #main-table thead .header-ngay { background-color: #e0f7ff; }
        #main-table thead .header-gio { background-color: #fff9e0; }

        #main-table thead th input.filter-input { width: 90%; margin-top: 5px; font-size: 12px; padding: 2px; border: 1px solid #aaa; }

        .hour-cell {
            text-align: justify !important;
            vertical-align: top !important;
            white-space: pre-wrap !important;
            min-width: 230px;
            cursor: pointer;
        }
        
        .detail-cell {
            text-align: justify !important;
            vertical-align: top !important;
            white-space: pre-wrap !important; 
            min-width: 250px;
        }
        .xung-cell, .huong-than-cell {
             min-width: 120px;
             text-align: center !important;
        }
        .detail-cell-content { /* Nội dung sẽ tự động giãn nở */ }
        
        .text-good, .highlight-good { color: blue; font-weight: bold; }
        .text-bad, .highlight-bad { color: red; font-weight: bold; }
        .text-bad-no-bold { color: red; }
        .text-good-no-bold { color: blue; }

        .manual-highlight { background-color: #d4edda !important; }
        .good-result { color: blue; }

        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 255, 255, 0.8); display: flex; justify-content: center; align-items: center; font-size: 20px; font-weight: bold; z-index: 1000; }
        
        #notes-container {
            display: none;
            position: fixed;
            top: 100px;
            right: 20px;
            width: 350px;
            max-height: 70vh;
            overflow-y: auto;
            background-color: #fff8e1;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1001;
            font-size: 13px;
            line-height: 1.5;
        }
        #notes-container h3 { margin-top: 0; }
        #notes-container ul { padding-left: 20px; }
        
        #print-note-khach { display: none; }
        #print-note-khach p {
            text-align: justify;
        }

        /* --- PRINT STYLES --- */
        @media print {
            body { 
                background-color: #fff; 
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .container { 
                box-shadow: none; 
                border: none; 
                width: 100%; 
                max-width: 100%; 
                padding: 0; 
            }
            
            /* Hide interactive elements for ALL print modes */
            .action-buttons-group, #column-toggle-controls, #filter-row, #notes-container { 
                display: none !important; 
            }
            
            .table-container { 
                max-height: none; 
                overflow: visible; 
            }

            /* --- PRINT MODE: FOR CLIENT ('In cho Khách') --- */
            
            /* Hide header/controls ONLY for client print */
            body.print-mode-khach .header-container,
            body.print-mode-khach .controls {
                display: none !important;
            }

            /* Show client note */
            body.print-mode-khach #print-note-khach {
                display: block;
                page-break-after: always;
                padding: 40px;
                border: 1px solid #333;
                margin: 20px;
                font-size: 16px;
                line-height: 1.6;
            }
            
            /* Client Print Table Optimizations */
            body.print-mode-khach #main-table {
                font-size: 8pt;
            }
            body.print-mode-khach #main-table th, 
            body.print-mode-khach #main-table td {
                height: 40px;
                padding: 3px 2px;
                vertical-align: top;
                white-space: normal !important;
                word-break: break-word;
                overflow-wrap: break-word;
            }
            body.print-mode-khach .hour-cell, 
            body.print-mode-khach .detail-cell, 
            body.print-mode-khach .xung-cell, 
            body.print-mode-khach .huong-than-cell {
                min-width: initial !important; 
            }
            
            /* Keep Duong Lich and Am Lich columns from shrinking */
            body.print-mode-khach [data-col-idx="1"],
            body.print-mode-khach [data-col-idx="2"] {
                white-space: nowrap !important;
            }

            /* Hide Hac Than in client print */
            body.print-mode-khach .huong-than-cell .text-bad {
                display: none !important;
            }
             
            /* Hide hour cell content, keeping background color */
            body.print-mode-khach .hour-cell {
                color: transparent !important;
                font-size: 0 !important;
                line-height: 0 !important;
            }

            /* Filter detail cell content for client */
            body.print-mode-khach .detail-cell .detail-cell-content > *:not(:has(> .highlight-good)) {
                 display: none !important;
            }
            body.print-mode-khach .detail-cell .detail-cell-content .highlight-good {
                display: inline !important;
                font-weight: bold !important;
                color: blue !important;
            }

            /* --- PRINT MODE: FOR VIEW ('In để xem') --- */
            /* No special rules are needed here. It will print "as-is" from the screen styles,
               allowing manual adjustment in the print dialog, as requested. */
        }
    </style>
</head>
<body>
    <!-- Ghi chú cho khách khi in -->
    <div id="print-note-khach">
        <h2>Ghi chú từ Khầy Tiến</h2>
        <p>*. Đây là nội dung ngày giờ tốt đã được tìm kiếm và lựa chọn cẩn thận dựa trên nhiều phương pháp cổ học tinh hoa, kết hợp với các yếu tố Thiên - Địa - Nhân Khí để mang lại sự cát tường, hanh thông cho công việc của quý gia chủ.</p>
        <p>**. Các giờ được tô màu xanh là những khung giờ tốt đã được chọn. Xin vui lòng tuân thủ để mọi việc được thuận lợi, viên mãn.</p>
	
	<p>Lưu ý:<p>
		<p>1. Ngày giờ tốt được đưa ra dưới đây là được lựa chọn theo tuổi, theo mục đích cụ thể ( những tuổi khác, những mục đích khác không sử dụng)<p>
		<p>2. Tùy vào vùng địa lý, thời gian trong năm mà thời gian mặt trời mọc, đứng bóng, lặn trong ngày sẽ khác nhau. Do đó khung thời gian chuẩn sẽ có sự thay đổi. Dựa vào mục "Chính Ngọ" để có thời gian chính xác nhất. Địa điểm người xem chọn là "TP. Hồ Chí Minh", nếu có thay đổi địa điểm xem vui lòng báo lại. Ví dụ: "Chính ngọ là 11:40" có nghĩa là thời gian mặt trời lên đứng bóng sẽ là lúc 11 giờ 40 phút nhanh hơn 20 phút so với giờ chuẩn là 12 giờ trưa, khi đó tất cả khung giờ sẽ dịch chuyển sớm hơn 20 phút so với giờ chuẩn, Giờ Ngọ chính xác sẽ là 10h40 - 12h40, tương tự Giờ Thìn sẽ là 6h40 - 8h40</p>
		<p>3. Trong một số việc như xuất hành, đứng cúng,... để tối đa hiệu quả có thể chọn hướng "Tài thần" hoặc "Hỷ thần" để xuất phát, xoay mặt về hướng đó để cúng,...<p>
        <p>Trân trọng.</p>
		<p>ĐẮC THIÊN KHÍ - VẠN SỰ AN</p>
    </div>

    <div class="container">
        <div class="header-container">
            <div class="main-title-group">
                <h2 class="slogan">ĐẮC THIÊN KHÍ - VẠN SỰ AN</h2>
                <h1>NGÀY TỐT XẤU - By TIEN.TQN</h1>
            </div>
            <div class="action-buttons-group">
                <button id="btn-notes">Ghi chú</button>
                <button id="btn-print-view">In để xem</button>
                <button id="btn-print-khach">In cho Khách</button>
            </div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="birth-year">TUỔI XEM:</label>
                <input type="number" id="birth-year" value="1993">
                <span id="birth-year-info" class="year-info"></span>
            </div>
            <div class="control-group">
                <label for="view-year">NĂM XEM (ÂL):</label>
                <input type="number" id="view-year">
                <span id="view-year-info" class="year-info"></span>
            </div>
            <div class="control-group">
                <label for="event-check">VIỆC CẦN XEM:</label>
                <input type="text" id="event-check" placeholder="cưới, động thổ...">
            </div>
            <div class="control-group">
                <label for="location-check">ĐỊA ĐIỂM XEM:</label>
                <input type="text" id="location-check" placeholder="Hà Nội, TPHCM...">
            </div>
        </div>

        <div id="column-toggle-controls">
            <span>Ẩn/Hiện Cột:</span>
        </div>

        <div class="table-container">
            <div id="loading-overlay" style="display: none;"><span>Đang tính toán, vui lòng chờ...</span></div>
            <table id="main-table">
                <thead>
                    <tr>
                        <th rowspan="2" data-col-idx="0">STT</th>
                        <th rowspan="2" data-col-idx="1">DƯƠNG LỊCH</th>
                        <th rowspan="2" data-col-idx="2">ÂM LỊCH</th>
                        <th rowspan="2" data-col-idx="3">NGÀY ÂL</th>
                        <th rowspan="2" data-col-idx="4">THÁNG ÂL</th>
                        <th rowspan="2" data-col-idx="5">NĂM ÂL</th>
                        <th rowspan="2" data-col-idx="6">NGÀY CAN CHI</th>
                        <th rowspan="2" data-col-idx="7">THÁNG CAN CHI</th>
                        <th rowspan="2" data-col-idx="8">NĂM CAN CHI</th>
                        <th rowspan="2" data-col-idx="9">TIẾT KHÍ</th>
                        <th rowspan="2" data-col-idx="10">THÁNG TIẾT KHÍ</th>
                        <th rowspan="2" data-col-idx="11" style="color: red; font-weight: bold;">CHÍNH NGỌ</th>
                        <th colspan="19" class="header-ngay">NGÀY</th>
                        <th colspan="12" class="header-gio">GIỜ</th>
                    </tr>
                    <tr>
                        <th class="header-ngay" data-col-idx="12">TAM NƯƠNG</th>
                        <th class="header-ngay" data-col-idx="13">ĐẠI NGUYỆT KỴ</th>
                        <th class="header-ngay" data-col-idx="14">TC - ĐC NGÀY</th>
                        <th class="header-ngay" data-col-idx="15">NGÀY HĐ-HĐ (TK)</th>
                        <th class="header-ngay" data-col-idx="16">12 TRỰC - (TK)</th>
                        <th class="header-ngay" data-col-idx="17">ĐỔNG CÔNG (TK)</th>
                        <th class="header-ngay" data-col-idx="18">28 BÁT TÚ</th>
                        <th class="header-ngay" data-col-idx="19">SAO TỐT</th>
                        <th class="header-ngay" data-col-idx="20">SAO XẤU</th>
                        <th class="header-ngay" data-col-idx="21">NG. TẬN/LY/TUYỆT</th>
                        <th class="header-ngay" data-col-idx="22">KTTS/SÁT CHỦ/THỌ TỬ</th>
                        <th class="header-ngay" data-col-idx="23">TAM ĐẠI KIẾT TINH</th>
                        <th class="header-ngay" data-col-idx="24">KỴ ĐỘNG THỔ</th>
                        <th class="header-ngay" data-col-idx="25">KỴ CƯỚI HỎI</th>
                        <th class="header-ngay" data-col-idx="26">THỨ</th>
                        <th class="header-ngay" data-col-idx="27">CAN CHI NGÀY XUNG</th>
                        <th class="header-ngay" data-col-idx="28">NH NẠP ÂM NGÀY - CHỦ</th>
                        <th class="header-ngay" data-col-idx="29">NH CHI NGÀY - CHỦ</th>
                        <th class="header-ngay" data-col-idx="30">HƯỚNG TÀI/HỶ/HẠC</th>
                        <th class="header-gio" data-col-idx="31">TÝ (23H-1H)</th>
                        <th class="header-gio" data-col-idx="32">SỬU (1H-3H)</th>
                        <th class="header-gio" data-col-idx="33">DẦN (3H-5H)</th>
                        <th class="header-gio" data-col-idx="34">MÃO (5H-7H)</th>
                        <th class="header-gio" data-col-idx="35">THÌN (7H-9H)</th>
                        <th class="header-gio" data-col-idx="36">TỊ (9H-11H)</th>
                        <th class="header-gio" data-col-idx="37">NGỌ (11H-13H)</th>
                        <th class="header-gio" data-col-idx="38">MÙI (13H-15H)</th>
                        <th class="header-gio" data-col-idx="39">THÂN (15H-17H)</th>
                        <th class="header-gio" data-col-idx="40">DẬU (17H-19H)</th>
                        <th class="header-gio" data-col-idx="41">TUẤT (19H-21H)</th>
                        <th class="header-gio" data-col-idx="42">HỢI (21H-23H)</th>
                    </tr>
                    <tr id="filter-row"></tr>
                </thead>
                <tbody id="table-body"></tbody>
            </table>
        </div>
    </div>

    <!-- Khung ghi chú -->
    <div id="notes-container">
        <h3>Phương pháp chọn ngày - giờ tốt của Khầy Tiến</h3>
        <!-- Nội dung ghi chú đã được rút gọn, Thầy Tiến sẽ tự điền vào sau -->
        <p>*** Về phần ngày gồm các phương pháp</p>
	<p>Thiên khí:</p>
		<p>1. Tam nương</p>
		<p>2. Đại/ Nguyệt kỵ</p>
		<p>3. Thiên can - Địa chi ngày</p>
		<p>4. Nguyệt tận/ Tứ ly/ Tứ tuyệt</p>
		<p>5. Kim thần thất sát/ Sát chủ/ Thọ tử</p>
		<p>6. Hoàng đạo/ Hắc đạo</p>
		<p>7. Đổng công</p>
		<p>8. Thập nhị trực</p>
		<p>9. Nhị thập bát tú</p>
		<p>10. Sao tốt/ Sao xấu</p>
		<p>11. Một số nội dung bổ trợ như: Tam đại kiết tinh; Kỵ động thổ; Kỵ cưới hỏi; Thứ; Tiết khí, Giờ chính ngọ...</p>
	<p>Nhân khí:</p>
		<p>1. Can chi ngày xung</p>
		<p>2. Ngũ hành nạp âm Ngày - Chủ</p>
		<p>3. Ngũ hành Chi Ngày - Chủ</p>
	<p>Địa khí:</p>
		<p>1. Hướng Tài thần/ Hỷ thần/ Hạc thần</p>
	<p>*** Về phần giờ gồm các phương pháp</p>
		<p>1. Lạc việt độn toán</p>
		<p>2. Kinh dịch - Mai hoa đổi chỗ Tốn Chấn</p>
		<p>3. Hoàng đạo/ Hắc đạo</p>
		<p>4. Sát chủ</p>
		<p>5. Thọ tử</p>
		<p>6. Thiên cẩu hạ thực</p>
		<p>7. Thiên ất quý nhân</p>
		<p>8. Xung tuổi</p>

    </div>

<script>
// --- KHAI BÁO HẰNG SỐ VÀ DỮ LIỆU ---
const TIME_ZONE = 7; const PI = Math.PI;
const NGAY_TRONG_TUAN = ["Chủ nhật", "Thứ 2", "Thứ 3", "Thứ 4", "Thứ 5", "Thứ 6", "Thứ 7"];
const THIEN_CAN = ["Giáp", "Ất", "Bính", "Đinh", "Mậu", "Kỷ", "Canh", "Tân", "Nhâm", "Quý"];
const DIA_CHI = ["Tý", "Sửu", "Dần", "Mão", "Thìn", "Tị", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi"];
const TIET_KHI = ["Xuân phân", "Thanh minh", "Cốc vũ", "Lập hạ", "Tiểu mãn", "Mang chủng", "Hạ chí", "Tiểu thử", "Đại thử", "Lập thu", "Xử thử", "Bạch lộ", "Thu phân", "Hàn lộ", "Sương giáng", "Lập đông", "Tiểu tuyết", "Đại tuyết", "Đông chí", "Tiểu hàn", "Đại hàn", "Lập xuân", "Vũ thủy", "Kinh trập"];
const HOUR_TO_CHI = { 23: "Tý", 0: "Tý", 1: "Sửu", 2: "Sửu", 3: "Dần", 4: "Dần", 5: "Mão", 6: "Mão", 7: "Thìn", 8: "Thìn", 9: "Tị", 10: "Tị", 11: "Ngọ", 12: "Ngọ", 13: "Mùi", 14: "Mùi", 15: "Thân", 16: "Thân", 17: "Dậu", 18: "Dậu", 19: "Tuất", 20: "Tuất", 21: "Hợi", 22: "Hợi" };
const CHI_TO_INDEX = { "Tý": 0, "Sửu": 1, "Dần": 2, "Mão": 3, "Thìn": 4, "Tị": 5, "Ngọ": 6, "Mùi": 7, "Thân": 8, "Dậu": 9, "Tuất": 10, "Hợi": 11 };
const guaStructures = { 1: [1, 1, 1], 2: [1, 1, 0], 3: [1, 0, 1], 4: [0, 1, 1], 5: [1, 0, 0], 6: [0, 1, 0], 7: [0, 0, 1], 8: [0, 0, 0] };
const gua64Names = { "1_1": "Thuần Kiền", "1_2": "Lý", "1_3": "Đồng Nhân", "1_4": "Cấu", "1_5": "Vô Vọng", "1_6": "Tụng", "1_7": "Độn", "1_8": "Bỉ", "2_1": "Quải", "2_2": "Thuần Đoài", "2_3": "Cách", "2_4": "Đại Quá", "2_5": "Tùy", "2_6": "Khốn", "2_7": "Hàm", "2_8": "Tụy", "3_1": "Đại Hữu", "3_2": "Khuê", "3_3": "Thuần Ly", "3_4": "Đỉnh", "3_5": "Phệ Hạp", "3_6": "Vị Tế", "3_7": "Lữ", "3_8": "Tấn", "4_1": "Tiểu Súc", "4_2": "Trung Phu", "4_3": "Gia Nhân", "4_4": "Thuần Tốn", "4_5": "Ích", "4_6": "Hoán", "4_7": "Tiệm", "4_8": "Quan", "5_1": "Đại Tráng", "5_2": "Quy Muội", "5_3": "Phong", "5_4": "Hằng", "5_5": "Thuần Chấn", "5_6": "Giải", "5_7": "Tiểu Quá", "5_8": "Dự", "6_1": "Nhu", "6_2": "Tiết", "6_3": "Ký Tế", "6_4": "Tỉnh", "6_5": "Truân", "6_6": "Thuần Khảm", "6_7": "Kiển", "6_8": "Tỷ", "7_1": "Đại Súc", "7_2": "Tổn", "7_3": "Bí", "7_4": "Cổ", "7_5": "Di", "7_6": "Mông", "7_7": "Thuần Cấn", "7_8": "Bác", "8_1": "Thái", "8_2": "Lâm", "8_3": "Minh Di", "8_4": "Thăng", "8_5": "Phục", "8_6": "Sư", "8_7": "Khiêm", "8_8": "Thuần Khôn" };
const VONG_HOANG_DAO = [ { name: "Thanh Long", type: "Hoàng Đạo" }, { name: "Minh Đường", type: "Hoàng Đạo" }, { name: "Thiên Hình", type: "Hắc Đạo" }, { name: "Chu Tước", type: "Hắc Đạo" }, { name: "Kim Quỹ", type: "Hoàng Đạo" }, { name: "Kim Đường", type: "Hoàng Đạo" }, { name: "Bạch Hổ", type: "Hắc Đạo" }, { name: "Ngọc Đường", type: "Hoàng Đạo" }, { name: "Thiên Lao", type: "Hắc Đạo" }, { name: "Huyền Vũ", type: "Hắc Đạo" }, { name: "Tư Mệnh", type: "Hoàng Đạo" }, { name: "Câu Trận", type: "Hắc Đạo" }];
const HOANG_DAO_START_HOUR = { "Dần": "Tý", "Thân": "Tý", "Mão": "Dần", "Dậu": "Dần", "Thìn": "Thìn", "Tuất": "Thìn", "Tị": "Ngọ", "Hợi": "Ngọ", "Tý": "Thân", "Ngọ": "Thân", "Sửu": "Tuất", "Mùi": "Tuất" };
const LUC_THAP_NAP_AM_MAP = { "Giáp Tý": "Hải Trung Kim", "Ất Sửu": "Hải Trung Kim", "Bính Dần": "Lư Trung Hỏa", "Đinh Mão": "Lư Trung Hỏa", "Mậu Thìn": "Đại Lâm Mộc", "Kỷ Tị": "Đại Lâm Mộc", "Canh Ngọ": "Lộ Bàng Thổ", "Tân Mùi": "Lộ Bàng Thổ", "Nhâm Thân": "Kiếm Phong Kim", "Quý Dậu": "Kiếm Phong Kim", "Giáp Tuất": "Sơn Đầu Hỏa", "Ất Hợi": "Sơn Đầu Hỏa", "Bính Tý": "Giản Hạ Thủy", "Đinh Sửu": "Giản Hạ Thủy", "Mậu Dần": "Thành Đầu Thổ", "Kỷ Mão": "Thành Đầu Thổ", "Canh Thìn": "Bạch Lạp Kim", "Tân Tị": "Bạch Lạp Kim", "Nhâm Ngọ": "Dương Liễu Mộc", "Quý Mùi": "Dương Liễu Mộc", "Giáp Thân": "Tuyền Trung Thủy", "Ất Dậu": "Tuyền Trung Thủy", "Bính Tuất": "Ốc Thượng Thổ", "Đinh Hợi": "Ốc Thượng Thổ", "Mậu Tý": "Tích Lịch Hỏa", "Kỷ Sửu": "Tích Lịch Hỏa", "Canh Dần": "Tùng Bách Mộc", "Tân Mão": "Tùng Bách Mộc", "Nhâm Thìn": "Trường Lưu Thủy", "Quý Tị": "Trường Lưu Thủy", "Giáp Ngọ": "Sa Trung Kim", "Ất Mùi": "Sa Trung Kim", "Bính Thân": "Sơn Hạ Hỏa", "Đinh Dậu": "Sơn Hạ Hỏa", "Mậu Tuất": "Bình Địa Mộc", "Kỷ Hợi": "Bình Địa Mộc", "Canh Tý": "Bích Thượng Thổ", "Tân Sửu": "Bích Thượng Thổ", "Nhâm Dần": "Kim Bạch Kim", "Quý Mão": "Kim Bạch Kim", "Giáp Thìn": "Phúc Đăng Hỏa", "Ất Tị": "Phúc Đăng Hỏa", "Bính Ngọ": "Thiên Hà Thủy", "Đinh Mùi": "Thiên Hà Thủy", "Mậu Thân": "Đại Trạch Thổ", "Kỷ Dậu": "Đại Trạch Thổ", "Canh Tuất": "Thoa Xuyến Kim", "Tân Hợi": "Thoa Xuyến Kim", "Nhâm Tý": "Tang Đố Mộc", "Quý Sửu": "Tang Đố Mộc", "Giáp Dần": "Đại Khê Thủy", "Ất Mão": "Đại Khê Thủy", "Bính Thìn": "Sa Trung Thổ", "Đinh Tị": "Sa Trung Thổ", "Mậu Ngọ": "Thiên Thượng Hỏa", "Kỷ Mùi": "Thiên Thượng Hỏa", "Canh Thân": "Thạch Lựu Mộc", "Tân Dậu": "Thạch Lựu Mộc", "Nhâm Tuất": "Đại Hải Thủy", "Quý Hợi": "Đại Hải Thủy" };
const LAC_THU_NAP_AM_MAP = { "Giáp Tý": "Hải Trung Kim", "Ất Sửu": "Hải Trung Kim", "Bính Dần": "Giáng Hạ Thủy", "Đinh Mão": "Giáng Hạ Thủy", "Mậu Thìn": "Đại Lâm Mộc", "Kỷ Tị": "Đại Lâm Mộc", "Canh Ngọ": "Lộ Bàng Thổ", "Tân Mùi": "Lộ Bàng Thổ", "Nhâm Thân": "Kiếm Phong Kim", "Quý Dậu": "Kiếm Phong Kim", "Giáp Tuất": "Tuyền Trung Thủy", "Ất Hợi": "Tuyền Trung Thủy", "Bính Tý": "Lư Trung Hỏa", "Đinh Sửu": "Lư Trung Hỏa", "Mậu Dần": "Thành Đầu Thổ", "Kỷ Mão": "Thành Đầu Thổ", "Canh Thìn": "Bạch Lạp Kim", "Tân Tị": "Bạch Lạp Kim", "Nhâm Ngọ": "Dương Liễu Mộc", "Quý Mùi": "Dương Liễu Mộc", "Giáp Thân": "Sơn Đầu Hỏa", "Ất Dậu": "Sơn Đầu Hỏa", "Bính Tuất": "Ốc Thượng Thổ", "Đinh Hợi": "Ốc Thượng Thổ", "Mậu Tý": "Trường Lưu Thủy", "Kỷ Sửu": "Trường Lưu Thủy", "Canh Dần": "Tùng Bách Mộc", "Tân Mão": "Tùng Bách Mộc", "Nhâm Thìn": "Tích Lịch Hỏa", "Quý Tị": "Tích Lịch Hỏa", "Giáp Ngọ": "Sa Trung Kim", "Ất Mùi": "Sa Trung Kim", "Bính Thân": "Thiên Hà Thủy", "Đinh Dậu": "Thiên Hà Thủy", "Mậu Tuất": "Bình Địa Mộc", "Kỷ Hợi": "Bình Địa Mộc", "Canh Tý": "Bích Thượng Thổ", "Tân Sửu": "Bích Thượng Thổ", "Nhâm Dần": "Kim Bạch Kim", "Quý Mão": "Kim Bạch Kim", "Giáp Thìn": "Đại Khê Thủy", "Ất Tị": "Đại Khê Thủy", "Bính Ngọ": "Sơn Hạ Hỏa", "Đinh Mùi": "Sơn Hạ Hỏa", "Mậu Thân": "Đại Dịch Thổ", "Kỷ Dậu": "Đại Dịch Thổ", "Canh Tuất": "Thoa Xuyến Kim", "Tân Hợi": "Thoa Xuyến Kim", "Nhâm Tý": "Tang Đố Mộc", "Quý Sửu": "Tang Đố Mộc", "Giáp Dần": "Phúc Đăng Hỏa", "Ất Mão": "Phúc Đăng Hỏa", "Bính Thìn": "Sa Trung Thổ", "Đinh Tị": "Sa Trung Thổ", "Mậu Ngọ": "Đại Hải Thủy", "Kỷ Mùi": "Đại Hải Thủy", "Canh Thân": "Thạch Lựu Mộc", "Tân Dậu": "Thạch Lựu Mộc", "Nhâm Tuất": "Thiên Thượng Hỏa", "Quý Hợi": "Thiên Thượng Hỏa" };
const TIET_KHI_MONTH_MAP = { "Lập xuân": "1", "Vũ thủy": "1", "Kinh trập": "2", "Xuân phân": "2", "Thanh minh": "3", "Cốc vũ": "3", "Lập hạ": "4", "Tiểu mãn": "4", "Mang chủng": "5", "Hạ chí": "5", "Tiểu thử": "6", "Đại thử": "6", "Lập thu": "7", "Xử thử": "7", "Bạch lộ": "8", "Thu phân": "8", "Hàn lộ": "9", "Sương giáng": "9", "Lập đông": "10", "Tiểu tuyết": "10", "Đại tuyết": "11", "Đông chí": "11", "Tiểu hàn": "12", "Đại hàn": "12" };
const TIET_KHI_MONTH_CHI = { "1": "Dần", "2": "Mão", "3": "Thìn", "4": "Tị", "5": "Ngọ", "6": "Mùi", "7": "Thân", "8": "Dậu", "9": "Tuất", "10": "Hợi", "11": "Tý", "12": "Sửu" };
const GOOD_LVDT_QUE = new Set(["Sinh - Đại An", "Sinh - Tiểu Cát", "Đỗ - Tiểu Cát", "Đỗ - Đại An", "Đỗ - Tốc Hỷ", "Khai - Đại An", "Khai - Tốc Hỷ", "Khai - Tiểu Cát", "Cảnh - Tiểu Cát", "Cảnh - Đại An", "Cảnh - Tốc Hỷ", "Kinh - Đại An", "Kinh - Tốc Hỷ", "Hưu - Tiểu Cát", "Hưu - Đại An", "Thương - Tốc Hỷ", "Thương - Tiểu Cát", "Thương - Đại An"]);
const GOOD_MAIHOA_QUE = new Set(["Gia Nhân_Tiệm", "Tiệm_Gia Nhân", "Đại Hữu_Đỉnh", "Đỉnh_Đại Hữu", "Đại Hữu_Thuần Kiền", "Thuần Kiền_Đại Hữu", "Hàm_Tụy", "Thái_Lâm", "Lâm_Thái", "Bí_Gia Nhân", "Gia Nhân_Ích", "Thái_Nhu", "Thuần Kiền_Cấu", "Cấu_Thuần Kiền", "Sư_Thuần Khôn", "Thuần Khôn_Sư", "Trung Phu_Ích", "Trung Phu_Lý", "Lý_Trung Phu", "Thuần Kiền_Lý", "Lý_Thuần Kiền", "Sư_Giải", "Giải_Sư", "Thái_Thăng", "Hoán_Quan", "Quan_Hoán", "Cách_Phong", "Phong_Cách", "Cách_Hàm", "Hàm_Cách", "Độn_Đồng Nhân", "Đại Hữu_Khuê", "Đại Tráng_Hằng", "Phong_Thuần Chấn", "Bí_Di", "Tụy_Tỷ", "Dự_Tấn", "Tấn_Dự", "Tùy_Thuần Đoài", "Cấu_Đỉnh", "Đỉnh_Cấu"]);
const NGU_HANH_CAN = { "Giáp": "Mộc", "Ất": "Mộc", "Bính": "Hỏa", "Đinh": "Hỏa", "Mậu": "Thổ", "Kỷ": "Thổ", "Canh": "Kim", "Tân": "Kim", "Nhâm": "Thủy", "Quý": "Thủy" };
const NGU_HANH_CHI = { "Tý": "Thủy", "Sửu": "Thổ", "Dần": "Mộc", "Mão": "Mộc", "Thìn": "Thổ", "Tị": "Hỏa", "Ngọ": "Hỏa", "Mùi": "Thổ", "Thân": "Kim", "Dậu": "Kim", "Tuất": "Thổ", "Hợi": "Thủy" };
const NGU_HANH_RELATION = { "Kim": { sinh: "Thủy", khac: "Mộc" }, "Thủy": { sinh: "Mộc", khac: "Hỏa" }, "Mộc": { sinh: "Hỏa", khac: "Thổ" }, "Hỏa": { sinh: "Thổ", khac: "Kim" }, "Thổ": { sinh: "Kim", khac: "Thủy" } };
const NGAY_HOANG_DAO_DATA = { "Thanh Long": { type: "Hoàng Đạo", nghi: "Mọi việc, đứng đầu bảng trong các giờ Hoàng Đạo.", ky: "" }, "Minh Đường": { type: "Hoàng Đạo", nghi: "Gặp các vị đại nhân, thăng quan tiến chức.", ky: "" }, "Kim Quỹ": { type: "Hoàng Đạo", nghi: "Cưới hỏi.", ky: "" }, "Kim Đường": { type: "Hoàng Đạo", nghi: "Hanh thông mọi việc.", ky: "" }, "Ngọc Đường": { type: "Hoàng Đạo", nghi: "Mọi việc, giấy tờ, công văn, học hành, khai bút.", ky: "" }, "Tư Mệnh": { type: "Hoàng Đạo", nghi: "Mọi việc đều tốt.", ky: "" }, "Thiên Hình": { type: "Hắc Đạo", nghi: "", ky: "Kiện tụng." }, "Chu Tước": { type: "Hắc Đạo", nghi: "", ky: "Tranh cãi, kiện tụng." }, "Bạch Hổ": { type: "Hắc Đạo", nghi: "Săn bắn, tế tự.", ky: "Mọi việc." }, "Thiên Lao": { type: "Hắc Đạo", nghi: "Trấn áp thần quỷ (trong tín ngưỡng, tôn giáo...).", ky: "Mọi việc bất lợi." }, "Huyền Vũ": { type: "Hắc Đạo", nghi: "", ky: "Kiện tụng, giao tiếp." }, "Câu Trận": { type: "Hắc Đạo", nghi: "", ky: "Dời nhà, làm nhà, tang lễ." } };
const NGAY_HOANG_DAO_LOOKUP = { "Tý": { "Thân": "Thanh Long", "Dậu": "Minh Đường", "Tuất": "Thiên Hình", "Hợi": "Chu Tước", "Tý": "Kim Quỹ", "Sửu": "Kim Đường", "Dần": "Bạch Hổ", "Mão": "Ngọc Đường", "Thìn": "Thiên Lao", "Tị": "Huyền Vũ", "Ngọ": "Tư Mệnh", "Mùi": "Câu Trận" }, "Sửu": { "Tuất": "Thanh Long", "Hợi": "Minh Đường", "Tý": "Thiên Hình", "Sửu": "Chu Tước", "Dần": "Kim Quỹ", "Mão": "Kim Đường", "Thìn": "Bạch Hổ", "Tị": "Ngọc Đường", "Ngọ": "Thiên Lao", "Mùi": "Huyền Vũ", "Thân": "Tư Mệnh", "Dậu": "Câu Trận" }, "Dần": { "Tý": "Thanh Long", "Sửu": "Minh Đường", "Dần": "Thiên Hình", "Mão": "Chu Tước", "Thìn": "Kim Quỹ", "Tị": "Kim Đường", "Ngọ": "Bạch Hổ", "Mùi": "Ngọc Đường", "Thân": "Thiên Lao", "Dậu": "Huyền Vũ", "Tuất": "Tư Mệnh", "Hợi": "Câu Trận" }, "Mão": { "Dần": "Thanh Long", "Mão": "Minh Đường", "Thìn": "Thiên Hình", "Tị": "Chu Tước", "Ngọ": "Kim Quỹ", "Mùi": "Kim Đường", "Thân": "Bạch Hổ", "Dậu": "Ngọc Đường", "Tuất": "Thiên Lao", "Hợi": "Huyền Vũ", "Tý": "Tư Mệnh", "Sửu": "Câu Trận" }, "Thìn": { "Thìn": "Thanh Long", "Tị": "Minh Đường", "Ngọ": "Thiên Hình", "Mùi": "Chu Tước", "Thân": "Kim Quỹ", "Dậu": "Kim Đường", "Tuất": "Bạch Hổ", "Hợi": "Ngọc Đường", "Tý": "Thiên Lao", "Sửu": "Huyền Vũ", "Dần": "Tư Mệnh", "Mão": "Câu Trận" }, "Tị": { "Ngọ": "Thanh Long", "Mùi": "Minh Đường", "Thân": "Thiên Hình", "Dậu": "Chu Tước", "Tuất": "Kim Quỹ", "Hợi": "Kim Đường", "Tý": "Bạch Hổ", "Sửu": "Ngọc Đường", "Dần": "Thiên Lao", "Mão": "Huyền Vũ", "Thìn": "Tư Mệnh", "Tị": "Câu Trận" }, "Ngọ": { "Thân": "Thanh Long", "Dậu": "Minh Đường", "Tuất": "Thiên Hình", "Hợi": "Chu Tước", "Tý": "Kim Quỹ", "Sửu": "Kim Đường", "Dần": "Bạch Hổ", "Mão": "Ngọc Đường", "Thìn": "Thiên Lao", "Tị": "Huyền Vũ", "Ngọ": "Tư Mệnh", "Mùi": "Câu Trận" }, "Mùi": { "Tuất": "Thanh Long", "Hợi": "Minh Đường", "Tý": "Thiên Hình", "Sửu": "Chu Tước", "Dần": "Kim Quỹ", "Mão": "Kim Đường", "Thìn": "Bạch Hổ", "Tị": "Ngọc Đường", "Ngọ": "Thiên Lao", "Mùi": "Huyền Vũ", "Thân": "Tư Mệnh", "Dậu": "Câu Trận" }, "Thân": { "Tý": "Thanh Long", "Sửu": "Minh Đường", "Dần": "Thiên Hình", "Mão": "Chu Tước", "Thìn": "Kim Quỹ", "Tị": "Kim Đường", "Ngọ": "Bạch Hổ", "Mùi": "Ngọc Đường", "Thân": "Thiên Lao", "Dậu": "Huyền Vũ", "Tuất": "Tư Mệnh", "Hợi": "Câu Trận" }, "Dậu": { "Dần": "Thanh Long", "Mão": "Minh Đường", "Thìn": "Thiên Hình", "Tị": "Chu Tước", "Ngọ": "Kim Quỹ", "Mùi": "Kim Đường", "Thân": "Bạch Hổ", "Dậu": "Ngọc Đường", "Tuất": "Thiên Lao", "Hợi": "Huyền Vũ", "Tý": "Tư Mệnh", "Sửu": "Câu Trận" }, "Tuất": { "Thìn": "Thanh Long", "Tị": "Minh Đường", "Ngọ": "Thiên Hình", "Mùi": "Chu Tước", "Thân": "Kim Quỹ", "Dậu": "Kim Đường", "Tuất": "Bạch Hổ", "Hợi": "Ngọc Đường", "Tý": "Thiên Lao", "Sửu": "Huyền Vũ", "Dần": "Tư Mệnh", "Mão": "Câu Trận" }, "Hợi": { "Ngọ": "Thanh Long", "Mùi": "Minh Đường", "Thân": "Thiên Hình", "Dậu": "Chu Tước", "Tuất": "Kim Quỹ", "Hợi": "Kim Đường", "Tý": "Bạch Hổ", "Sửu": "Ngọc Đường", "Dần": "Thiên Lao", "Mão": "Huyền Vũ", "Thìn": "Tư Mệnh", "Tị": "Câu Trận" } };

// *** DỮ LIỆU SAO TỐT (RÚT GỌN) ***
const DU_LIEU_SAO = [
  { id: 1, ten: "Thiên đức", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Đinh", "Thân", "Nhâm", "Tân", "Hợi", "Giáp", "Quý", "Dần", "Bính", "Ất", "Tỵ", "Canh"] },
  { id: 2, ten: "Thiên đức hợp", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Nhâm", "Tỵ", "Đinh", "Bính", "Dần", "Kỷ", "Mậu", "Hợi", "Tân", "Canh", "Thân", "Ất"] },
  { id: 3, ten: "Nguyệt đức", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Bính", "Giáp", "Nhâm", "Canh", "Bính", "Giáp", "Nhâm", "Canh", "Bính", "Giáp", "Nhâm", "Canh"] },
  { id: 4, ten: "Nguyệt đức hợp", yNghia: "Tốt mọi việc, kỵ tố tụng", loai: "mapping_thang", map: ["Tân", "Kỷ", "Đinh", "Ất", "Tân", "Kỷ", "Đinh", "Ất", "Tân", "Kỷ", "Đinh", "Ất"] },
  { id: 5, ten: "Thiên quý", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Giáp,Ất", "Giáp,Ất", "Giáp,Ất", "Bính,Đinh", "Bính,Đinh", "Bính,Đinh", "Canh,Tân", "Canh,Tân", "Canh,Tân", "Nhâm,Quý", "Nhâm,Quý", "Nhâm,Quý"] },
  { id: 6, ten: "Thiên phú", yNghia: "Tốt mọi việc, nhất là xây dựng, khai trương, an táng", loai: "mapping_thang", map: ["Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão"] },
  { id: 7, ten: "Sinh khí", yNghia: "Tốt mọi việc, nhất là làm nhà, động thổ, trồng cây", loai: "mapping_thang", map: ["Tý", "Sửu", "Dần", "Mão", "Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi"] },
  { id: 8, ten: "Thiên phúc", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Kỷ", "Mậu", null, "Tân,Quý", "Canh,Nhâm", null, "Ất", "Giáp", null, "Đinh", "Bính", null] },
  { id: 9, ten: "Thiên thành", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ"] },
  { id: 10, ten: "Thiên quan", yNghia: "Tốt mọi việc (Trùng Tư mệnh Hoàng đạo)", loai: "mapping_thang", map: ["Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân"] },
  { id: 11, ten: "Nguyệt Ân", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Bính", "Đinh", "Canh", "Kỷ", "Mậu", "Tân", "Nhâm", "Quý", "Canh", "Ất", "Giáp", "Tân"] },
  { id: 12, ten: "Nguyệt không", yNghia: "Tốt cho việc sửa nhà, làm giường", loai: "mapping_thang", map: ["Nhâm", "Canh", "Bính", "Giáp", "Nhâm", "Canh", "Bính", "Giáp", "Nhâm", "Canh", "Bính", "Giáp"] },
  { id: 13, ten: "Minh tinh", yNghia: "Tốt mọi việc (Trùng Thiên lao - Hắc đạo)", loai: "mapping_thang", map: ["Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ"] },
  { id: 14, ten: "Thành Tâm", yNghia: "Tốt mọi việc, nhất là cầu phúc, tế tự", loai: "mapping_thang", map: ["Hợi", "Tỵ", "Tý", "Ngọ", "Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất"] },
  { id: 15, ten: "Ngũ phú", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Hợi", "Dần", "Tỵ", "Thân", "Hợi", "Dần", "Tỵ", "Thân", "Hợi", "Dần", "Tỵ", "Thân"] },
  { id: 16, ten: "Phúc sinh", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Dậu", "Mão", "Tuất", "Thìn", "Hợi", "Tỵ", "Tý", "Ngọ", "Sửu", "Mùi", "Dần", "Thân"] },
  { id: 17, ten: "Cát Khánh", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Dậu", "Dần", "Hợi", "Thìn", "Sửu", "Ngọ", "Mão", "Thân", "Tỵ", "Tuất", "Mùi", "Tý"] },
  { id: 18, ten: "Âm đức", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Dậu", "Mùi", "Tỵ", "Mão", "Sửu", "Hợi", "Dậu", "Mùi", "Tỵ", "Mão", "Sửu", "Hợi"] },
  { id: 19, ten: "U vi tinh", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Hợi", "Thìn", "Sửu", "Ngọ", "Mão", "Thân", "Tỵ", "Tuất", "Mùi", "Tý", "Dậu", "Dần"] },
  { id: 20, ten: "Mãn đức tinh", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Dần", "Mùi", "Thìn", "Dậu", "Ngọ", "Hợi", "Thân", "Sửu", "Tuất", "Mão", "Tý", "Tỵ"] },
  { id: 21, ten: "Tuế hợp", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Sửu", "Tý", "Hợi", "Tuất", "Dậu", "Thân", "Mùi", "Ngọ", "Tỵ", "Thìn", "Mão", "Dần"] },
  { id: 22, ten: "Nguyệt giải", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Thân", "Thân", "Dậu", "Dậu", "Tuất", "Tuất", "Hợi", "Hợi", "Ngọ", "Ngọ", "Mùi", "Mùi"] },
  { id: 23, ten: "Quan nhậu", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: [null, "Mão", null, null, "Ngọ", null, null, "Dậu", null, null, "Tý", null] },
  { id: 24, ten: "Tam hợp", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Ngọ,Tuất", "Mùi,Hợi", "Thân,Tý", "Dậu,Sửu", "Tuất,Dần", "Hợi,Mão", "Tý,Thìn", "Sửu,Tỵ", "Dần,Ngọ", "Mão,Mùi", "Thìn,Thân", "Tỵ,Dậu"] },
  { id: 25, ten: "Lục hợp", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Hợi", "Tuất", "Dậu", "Thân", "Mùi", "Ngọ", "Tỵ", "Thìn", "Mão", "Dần", "Sửu", "Tý"] },
  { id: 26, ten: "Đại hồng sa", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Tý,Sửu", "Tý,Sửu", "Tý,Sửu", "Thìn,Tỵ", "Thìn,Tỵ", "Thìn,Tỵ", "Ngọ,Mùi", "Ngọ,Mùi", "Ngọ,Mùi", "Thân,Tuất", "Thân,Tuất", "Thân,Tuất"] },
  { id: 27, ten: "Dân nhật, Thời đức", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Ngọ", "Ngọ", "Ngọ", "Dậu", "Dậu", "Dậu", "Tý", "Tý", "Tý", "Mão", "Mão", "Mão"] },
  { id: 28, ten: "Hoàng ân", yNghia: "Tốt mọi việc", loai: "mapping_thang", map: ["Tuất", "Sửu", "Dần", "Tỵ", "Dậu", "Mão", "Tý", "Ngọ", "Hợi", "Thìn", "Thân", "Mùi"] },
  { id: 29, ten: "Thanh Long", yNghia: "Hoàng đạo tốt mọi việc", loai: "mapping_thang", map: ["Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất"] },
  { id: 30, ten: "Minh đường", yNghia: "Hoàng đạo tốt mọi việc", loai: "mapping_thang", map: ["Sửu", "Mão", "Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ", "Mùi", "Dậu", "Hợi"] },
  { id: 31, ten: "Kim đường", yNghia: "Hoàng đạo tốt mọi việc", loai: "mapping_thang", map: ["Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão"] },
  { id: 32, ten: "Ngọc đường", yNghia: "Hoàng đạo tốt mọi việc", loai: "mapping_thang", map: ["Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ"] },
  { id: 33, ten: "Thiên hỷ", yNghia: "Tốt mọi việc, nhất là hôn thú", loai: "mapping_thang", map: ["Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu"] },
  { id: 34, ten: "Ích hậu", yNghia: "Tốt mọi việc, nhất là giá thú", loai: "mapping_thang", map: ["Tý", "Ngọ", "Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất", "Tỵ", "Hợi"] },
  { id: 35, ten: "Tục thế", yNghia: "Tốt mọi việc, nhất là giá thú", loai: "mapping_thang", map: ["Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất", "Tỵ", "Hợi", "Ngọ", "Tý"] },
  { id: 36, ten: "Yếu yên (Thiên quý)", yNghia: "Tốt mọi việc, nhất là giá thú", loai: "mapping_thang", map: ["Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất", "Tỵ", "Hợi", "Ngọ", "Tý", "Mùi", "Sửu"] },
  { id: 37, ten: "Dịch mã", yNghia: "Tốt mọi việc, nhất là xuất hành", loai: "mapping_thang", map: ["Thân", "Tỵ", "Dần", "Hợi", "Thân", "Tỵ", "Dần", "Hợi", "Thân", "Tỵ", "Dần", "Hợi"] },
  { id: 38, ten: "Thiên xá", yNghia: "Tốt cho tế tự, giải oan, trừ được các sao xấu. Chỉ kiêng kỵ động thổ", loai: "mapping_thang", map: ["Mậu Dần", "Mậu Dần", "Mậu Dần", "Giáp Ngọ", null, "Giáp Ngọ", "Mậu Thân", "Mậu Thân", "Mậu Thân", "Giáp Tý", null, "Giáp Tý"] },
  { id: 39, ten: "Thiên mã (Lộc mã)", yNghia: "Tốt cho việc xuất hành, giao dịch, cầu tài lộc (Trùng với Bạch hổ - xấu)", loai: "mapping_thang", map: ["Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn"] },
  { id: 40, ten: "Thiên tài", yNghia: "Tốt cho việc cầu tài lộc, khai trương (Trùng với Kim quỹ Hoàng đạo)", loai: "mapping_thang", map: ["Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần"] },
  { id: 41, ten: "Địa tài", yNghia: "Tốt cho việc cầu tài lộc, khai trương (Trùng ngày Bảo Quang Hoàng đạo)", loai: "mapping_thang", map: ["Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão"] },
  { id: 42, ten: "Nguyệt tài", yNghia: "Tốt cho việc cầu tài lộc, khai trương, xuất hành, di chuyển, giao dịch", loai: "mapping_thang", map: ["Ngọ", "Tỵ", "Tỵ", "Mùi", "Dậu", "Hợi", "Ngọ", "Tỵ", "Tỵ", "Mùi", "Dậu", "Hợi"] },
  { id: 43, ten: "Lộc khố, Thiên phú", yNghia: "Tốt cho việc cầu tài lộc, khai trương, giao dịch", loai: "mapping_thang", map: ["Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão"] },
  { id: 44, ten: "Kinh tâm", yNghia: "Tốt với tang tế", loai: "mapping_thang", map: ["Mùi", "Sửu", "Thân", "Dần", "Dậu", "Mão", "Tuất", "Thìn", "Hợi", "Tỵ", "Tý", "Ngọ"] },
  { id: 45, ten: "Hoạt điệu", yNghia: "Tốt, nhưng gặp Thụ tử thì xấu", loai: "mapping_thang", map: ["Tỵ", "Tuất", "Mùi", "Tý", "Dậu", "Dần", "Hợi", "Thìn", "Sửu", "Ngọ", "Mão", "Thân"] },
  { id: 46, ten: "Giải thần", yNghia: "Tốt cho việc tế tự, tố tụng, giải oan (trừ được các sao xấu)", loai: "mapping_thang", map: ["Thân", "Thân", "Tuất", "Tuất", "Tý", "Tý", "Dần", "Dần", "Thìn", "Thìn", "Ngọ", "Ngọ"] },
  { id: 47, ten: "Phổ hộ", yNghia: "Tốt cho việc làm phúc, giá thú, xuất hành", loai: "mapping_thang", map: ["Thân", "Dần", "Dậu", "Mão", "Tuất", "Thìn", "Hợi", "Tỵ", "Tý", "Ngọ", "Sửu", "Mùi"] },
  { id: 48, ten: "Mẫu thương", yNghia: "Tốt về cầu tài lộc, khai trương", loai: "mapping_thang", map: ["Hợi,Tý", "Hợi,Tý", "Hợi,Tý", "Dần,Mão", "Dần,Mão", "Dần,Mão", "Thìn,Sửu", "Thìn,Sửu", "Thìn,Sửu", "Thân,Dậu", "Thân,Dậu", "Thân,Dậu"] },
  { id: 49, ten: "Phúc hậu", yNghia: "Tốt về cầu tài lộc, khai trương", loai: "mapping_thang", map: ["Dần", "Dần", "Dần", "Tỵ", "Tỵ", "Tỵ", "Thân", "Thân", "Thân", "Hợi", "Hợi", "Hợi"] },
  { id: 50, ten: "Thiên ân", yNghia: "Tốt mọi việc", loai: "co_dinh", ngay: ["Giáp Tý", "Ất Sửu", "Bính Dần", "Đinh Mão", "Mậu Thìn", "Kỷ Mão", "Canh Thìn", "Canh Tuất", "Tân Tỵ", "Tân Hợi", "Nhâm Ngọ", "Nhâm Thân", "Quý Sửu", "Quý Mùi"] },
  { id: 51, ten: "Thiên Thụy", yNghia: "Tốt mọi việc", loai: "co_dinh", ngay: ["Mậu Dần", "Kỷ Mão", "Canh Dần", "Tân Tỵ", "Nhâm Tý"] },
  { id: 52, ten: "Ngũ hợp", yNghia: "Tốt mọi việc", loai: "co_dinh", ngay: ["Mậu Ngọ", "Kỷ Mùi", "Tân Dậu", "Quý Hợi"] },
  { id: 53, ten: "Sát cống", yNghia: "Đại cát, giải được sao xấu (trừ Kim thần sát)", loai: "nhom_thang", duLieu: { nhom_1_4_7_10: ["Đinh Mão", "Bính Tý", "Ất Dậu", "Giáp Ngọ", "Quý Mão", "Nhâm Tý", "Tân Dậu"], nhom_2_5_8_11: ["Bính Dần", "Ất Hợi", "Giáp Thân", "Quý Tỵ", "Nhâm Dần", "Tân Hợi", "Canh Thân"], nhom_3_6_9_12: ["Ất Sửu", "Giáp Tuất", "Quý Mùi", "Nhâm Thìn", "Tân Sửu", "Canh Tuất", "Kỷ Mùi"] }},
  { id: 54, ten: "Trực tinh", yNghia: "Đại cát, giải được sao xấu (trừ Kim thần sát)", loai: "nhom_thang", duLieu: { nhom_1_4_7_10: ["Mậu Thìn", "Đinh Sửu", "Bính Tuất", "Ất Mùi", "Giáp Thìn", "Quý Sửu", "Nhâm Tuất"], nhom_2_5_8_11: ["Đinh Mão", "Bính Tý", "Ất Dậu", "Giáp Ngọ", "Quý Mão", "Nhâm Tý", "Tân Dậu"], nhom_3_6_9_12: ["Bính Dần", "Ất Hợi", "Giáp Thân", "Quý Tỵ", "Nhâm Dần", "Tân Hợi", "Canh Thân"] }},
  { id: 55, ten: "Nhơn chuyên", yNghia: "Đại cát, giải được sao xấu (trừ Kim thần sát)", loai: "nhom_thang", duLieu: { nhom_1_4_7_10: ["Tân Mùi", "Canh Thìn", "Kỷ Sửu", "Mậu Tuất", "Đinh Mùi", "Bính Thìn"], nhom_2_5_8_11: ["Canh Ngọ", "Kỷ Mão", "Mậu Tý", "Đinh Dậu", "Bính Ngọ", "Ất Mão"], nhom_3_6_9_12: ["Kỷ Tỵ", "Mậu Dần", "Đinh Hợi", "Bính Thân", "Ất Tỵ", "Giáp Dần", "Quý Hợi"] }}
];

// *** DỮ LIỆU SAO XẤU (RÚT GỌN) ***
const DU_LIEU_SAO_XAU = [
  { id: 1, ten: "Địa phá", yNghia: "Kỵ xây dựng", loai: "mapping_thang", map: ["Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất"] },
  { id: 2, ten: "Thổ phủ", yNghia: "Kỵ xây dựng, động thổ", loai: "mapping_thang", map: ["Dần", "Mão", "Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu"] },
  { id: 3, ten: "Thổ ôn (Thiên cẩu)", yNghia: "Kỵ xây dựng, đào ao giếng, tế tự", loai: "mapping_thang", map: ["Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão"] },
  { id: 4, ten: "Thiên ôn", yNghia: "Kỵ xây dựng", loai: "mapping_thang", map: ["Mùi", "Tuất", "Thìn", "Dần", "Ngọ", "Tý", "Dậu", "Thân", "Tỵ", "Hợi", "Sửu", "Mão"] },
  { id: 5, ten: "Thụ tử", yNghia: "Xấu mọi việc, trừ săn bắn", loai: "mapping_thang", map: ["Tuất", "Thìn", "Hợi", "Tỵ", "Tý", "Ngọ", "Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu"] },
  { id: 6, ten: "Kiếp sát", yNghia: "Kỵ xây dựng, xuất hành, giá thú, an táng", loai: "mapping_thang", map: ["Hợi", "Thân", "Tỵ", "Dần", "Hợi", "Thân", "Tỵ", "Dần", "Hợi", "Thân", "Tỵ", "Dần"] },
  { id: 7, ten: "Hà Khôi, Cẩu Giảo", yNghia: "Kỵ khởi công, xấu mọi việc", loai: "mapping_thang", map: ["Hợi", "Ngọ", "Sửu", "Thân", "Mão", "Tuất", "Tỵ", "Tý", "Mùi", "Dần", "Dậu", "Thìn"] },
  { id: 8, ten: "Vãng Vong (Thổ kỵ)", yNghia: "Kỵ động thổ, xuất hành, giá thú, cầu tài", loai: "mapping_thang", map: ["Dần", "Tỵ", "Thân", "Hợi", "Mão", "Ngọ", "Dậu", "Tý", "Thìn", "Mùi", "Tuất", "Sửu"] },
  { id: 9, ten: "Trùng tang", yNghia: "Kỵ khởi công, giá thú, an táng", loai: "mapping_thang", map: ["Giáp", "Ất", "Kỷ", "Bính", "Đinh", "Kỷ", "Canh", "Tân", "Kỷ", "Nhâm", "Quý", "Kỷ"] },
  { id: 10, ten: "Thiên địa chính chuyển", yNghia: "Kỵ động thổ", loai: "mapping_thang", map: ["Quý Mão", "Quý Mão", "Quý Mão", "Bính Ngọ", "Bính Ngọ", "Bính Ngọ", "Đinh Dậu", "Đinh Dậu", "Đinh Dậu", "Canh Tý", "Canh Tý", "Canh Tý"] },
  { id: 11, ten: "Thiên địa chuyển sát", yNghia: "Kỵ động thổ", loai: "mapping_thang", map: ["Ất Mão,Tân Mão", "Ất Mão,Tân Mão", "Ất Mão,Tân Mão", "Bính Ngọ,Mậu Ngọ", "Bính Ngọ,Mậu Ngọ", "Bính Ngọ,Mậu Ngọ", "Tân Dậu,Quý Dậu", "Tân Dậu,Quý Dậu", "Tân Dậu,Quý Dậu", "Nhâm Tý,Bính Tý", "Nhâm Tý,Bính Tý", "Nhâm Tý,Bính Tý"] },
  { id: 12, ten: "Thổ cẩm", yNghia: "Kỵ xây dựng, an táng", loai: "mapping_thang", map: ["Hợi", "Hợi", "Hợi", "Dần", "Dần", "Dần", "Tỵ", "Tỵ", "Tỵ", "Thân", "Thân", "Thân"] },
  { id: 13, ten: "Nguyệt kiến chuyển sát", yNghia: "Kỵ động thổ", loai: "mapping_thang", map: ["Mão", "Mão", "Mão", "Ngọ", "Ngọ", "Ngọ", "Dậu", "Dậu", "Dậu", "Tý", "Tý", "Tý"] },
  { id: 14, ten: "Thiên cương (Diệt môn)", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tỵ", "Tý", "Mùi", "Dần", "Dậu", "Thìn", "Hợi", "Ngọ", "Sửu", "Thân", "Mão", "Tuất"] },
  { id: 15, ten: "Thiên tại", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Dậu", "Ngọ", "Mão", "Tý", "Dậu", "Ngọ", "Mão", "Tý", "Dậu", "Ngọ", "Mão", "Tý"] },
  { id: 16, ten: "Thiên ngục, Thiên hỏa", yNghia: "Xấu mọi việc, xấu về lợp nhà", loai: "mapping_thang", map: ["Tý", "Mão", "Ngọ", "Dậu", "Tý", "Mão", "Ngọ", "Dậu", "Tý", "Mão", "Ngọ", "Dậu"] },
  { id: 17, ten: "Tiểu hồng sa", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tỵ", "Dậu", "Sửu", "Tỵ", "Dậu", "Sửu", "Tỵ", "Dậu", "Sửu", "Tỵ", "Dậu", "Sửu"] },
  { id: 18, ten: "Đại hao (Tử khí)", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tỵ"] },
  { id: 19, ten: "Hoang vu", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tỵ,Dậu,Sửu", "Tỵ,Dậu,Sửu", "Tỵ,Dậu,Sửu", "Thân,Tý,Thìn", "Thân,Tý,Thìn", "Thân,Tý,Thìn", "Hợi,Mão,Mùi", "Hợi,Mão,Mùi", "Hợi,Mão,Mùi", "Dần,Ngọ,Tuất", "Dần,Ngọ,Tuất", "Dần,Ngọ,Tuất"] },
  { id: 20, ten: "Băng tiêu ngọa hãm", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tỵ", "Tý", "Sửu", "Dần", "Mão", "Tuất", "Hợi", "Ngọ", "Mùi", "Thân", "Dậu", "Thìn"] },
  { id: 21, ten: "Sát chủ", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tỵ", "Tý", "Mùi", "Mão", "Thân", "Tuất", "Sửu", "Hợi", "Ngọ", "Dậu", "Dần", "Thìn"] },
  { id: 22, ten: "Nguyệt hình", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Tỵ", "Tý", "Thìn", "Thân", "Ngọ", "Sửu", "Dần", "Dậu", "Mùi", "Hợi", "Mão", "Tuất"] },
  { id: 23, ten: "Tội chỉ", yNghia: "Xấu mọi việc", loai: "mapping_thang", map: ["Ngọ", "Tý", "Mùi", "Sửu", "Thân", "Dần", "Dậu", "Mão", "Tuất", "Thìn", "Hợi", "Tỵ"] },
  { id: 24, ten: "Nguyệt phá", yNghia: "Xấu về xây dựng nhà", loai: "mapping_thang", map: ["Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tỵ", "Ngọ", "Mùi"] },
  { id: 25, ten: "Lôi công", yNghia: "Xấu về xây dựng nhà", loai: "mapping_thang", map: ["Dần", "Hợi", "Tỵ", "Thân", "Dần", "Hợi", "Tỵ", "Thân", "Dần", "Hợi", "Tỵ", "Thân"] },
  { id: 26, ten: "Phi ma sát", yNghia: "Kỵ giá thú, nhập trạch", loai: "mapping_thang", map: ["Tý", "Dậu", "Ngọ", "Mão", "Tý", "Dậu", "Ngọ", "Mão", "Tý", "Dậu", "Ngọ", "Mão"] },
  { id: 27, ten: "Chu tước hắc đạo", yNghia: "Kỵ nhập trạch, khai trương", loai: "mapping_thang", map: ["Mão", "Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ", "Mùi", "Dậu", "Hợi", "Sửu"] },
  { id: 28, ten: "Lỗ ban sát", yNghia: "Kỵ khởi tạo", loai: "mapping_thang", map: ["Tý", "Tý", "Tý", "Mão", "Mão", "Mão", "Ngọ", "Ngọ", "Ngọ", "Dậu", "Dậu", "Dậu"] },
  { id: 29, ten: "Phủ đầu sát", yNghia: "Kỵ khởi tạo", loai: "mapping_thang", map: ["Thìn", "Thìn", "Thìn", "Mùi", "Mùi", "Mùi", "Dậu", "Dậu", "Dậu", "Tý", "Tý", "Tý"] },
  { id: 30, ten: "Tam tang", yNghia: "Kỵ khởi tạo, giá thú, an táng", loai: "mapping_thang", map: ["Thìn", "Thìn", "Thìn", "Mùi", "Mùi", "Mùi", "Tuất", "Tuất", "Tuất", "Sửu", "Sửu", "Sửu"] },
  { id: 31, ten: "Ngũ hư", yNghia: "Kỵ khởi tạo, giá thú, an táng", loai: "mapping_thang", map: ["Tỵ", "Dậu", "Sửu", "Thân", "Tý", "Thìn", "Hợi", "Mão", "Mùi", "Dần", "Ngọ", "Tuất"] },
  { id: 32, ten: "Thiên tặc", yNghia: "Xấu khởi tạo, động thổ, nhập trạch, khai trương", loai: "mapping_thang", map: ["Thìn", "Dậu", "Dần", "Mùi", "Tý", "Tỵ", "Tuất", "Mão", "Thân", "Sửu", "Ngọ", "Hợi"] },
  { id: 33, ten: "Địa tặc", yNghia: "Xấu khởi tạo, an táng, động thổ, xuất hành", loai: "mapping_thang", map: ["Sửu", "Tý", "Hợi", "Tuất", "Dậu", "Thân", "Mùi", "Ngọ", "Tỵ", "Thìn", "Mão", "Dần"] },
  { id: 34, ten: "Hỏa tai", yNghia: "Xấu làm nhà, lợp nhà", loai: "mapping_thang", map: ["Sửu", "Mùi", "Dần", "Thân", "Mão", "Dậu", "Thìn", "Tuất", "Tỵ", "Hợi", "Ngọ", "Tý"] },
  { id: 35, ten: "Lục bất thành", yNghia: "Xấu xây dựng", loai: "mapping_thang", map: ["Dần", "Ngọ", "Tuất", "Tỵ", "Dậu", "Sửu", "Thân", "Tý", "Thìn", "Hợi", "Mão", "Mùi"] },
  { id: 36, ten: "Nguyệt hỏa độc hỏa", yNghia: "Xấu lợp nhà, làm bếp", loai: "mapping_thang", map: ["Tỵ", "Thìn", "Mão", "Dần", "Sửu", "Tý", "Hợi", "Tuất", "Dậu", "Thân", "Mùi", "Ngọ"] },
  { id: 37, ten: "Tiểu hao", yNghia: "Xấu kinh doanh, cầu tài", loai: "mapping_thang", map: ["Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn"] },
  { id: 38, ten: "Nguyệt yếm đại họa", yNghia: "Xấu xuất hành, giá thú", loai: "mapping_thang", map: ["Tuất", "Dậu", "Thân", "Mùi", "Ngọ", "Tỵ", "Thìn", "Mão", "Dần", "Sửu", "Tý", "Hợi"] },
  { id: 39, ten: "Nguyệt hư (Nguyệt sát)", yNghia: "Xấu giá thú, mở cửa hàng", loai: "mapping_thang", map: ["Sửu", "Tuất", "Mùi", "Thìn", "Sửu", "Tuất", "Mùi", "Thìn", "Sửu", "Tuất", "Mùi", "Thìn"] },
  { id: 40, ten: "Hoàng sa", yNghia: "Xấu xuất hành", loai: "mapping_thang", map: ["Ngọ", "Dần", "Tý", "Ngọ", "Dần", "Tý", "Ngọ", "Dần", "Tý", "Ngọ", "Dần", "Tý"] },
  { id: 41, ten: "Nhân cách", yNghia: "Xấu giá thú, khởi tạo", loai: "mapping_thang", map: ["Dậu", "Mùi", "Tỵ", "Mão", "Sửu", "Hợi", "Dậu", "Mùi", "Tỵ", "Mão", "Sửu", "Hợi"] },
  { id: 42, ten: "Thần cách", yNghia: "Kỵ tế tự", loai: "mapping_thang", map: ["Tỵ", "Mão", "Sửu", "Hợi", "Dậu", "Mùi", "Tỵ", "Mão", "Sửu", "Hợi", "Dậu", "Mùi"] },
  { id: 43, ten: "Ngũ quỷ", yNghia: "Kỵ xuất hành", loai: "mapping_thang", map: ["Ngọ", "Dần", "Thìn", "Dậu", "Mão", "Thân", "Sửu", "Tỵ", "Tý", "Hợi", "Mùi", "Tuất"] },
  { id: 44, ten: "Cửu không", yNghia: "Kỵ xuất hành, cầu tài, khai trương", loai: "mapping_thang", map: ["Thìn", "Sửu", "Tuất", "Mùi", "Mão", "Tý", "Dậu", "Ngọ", "Dần", "Hợi", "Thân", "Tỵ"] },
  { id: 45, ten: "Trùng phục", yNghia: "Kỵ giá thú, an táng", loai: "mapping_thang", map: ["Canh", "Tân", "Kỷ", "Nhâm", "Quý", "Mậu", "Giáp", "Ất", "Kỷ", "Nhâm", "Quý", "Mậu"] },
  { id: 46, ten: "Bạch hổ", yNghia: "Kỵ mai táng (Trùng ngày Thiên giải)", loai: "mapping_thang", map: ["Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn", "Ngọ", "Thân", "Tuất", "Tý", "Dần", "Thìn"] },
  { id: 47, ten: "Huyền vũ", yNghia: "Kỵ mai táng", loai: "mapping_thang", map: ["Dậu", "Hợi", "Sửu", "Mão", "Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ", "Mùi"] },
  { id: 48, ten: "Câu trận", yNghia: "Kỵ mai táng", loai: "mapping_thang", map: ["Hợi", "Sửu", "Mão", "Tỵ", "Mùi", "Dậu", "Hợi", "Sửu", "Mão", "Tỵ", "Mùi", "Dậu"] },
  { id: 49, ten: "Cô thần", yNghia: "Xấu với giá thú", loai: "mapping_thang", map: ["Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão", "Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu"] },
  { id: 50, ten: "Quả tú", yNghia: "Xấu với giá thú", loai: "mapping_thang", map: ["Thìn", "Tỵ", "Ngọ", "Mùi", "Thân", "Dậu", "Tuất", "Hợi", "Tý", "Sửu", "Dần", "Mão"] },
  { id: 51, ten: "Tứ thời đại mộ", yNghia: "Kỵ an táng", loai: "mapping_thang", map: ["Ất Mùi", "Ất Mùi", "Ất Mùi", "Bính Tuất", "Bính Tuất", "Bính Tuất", "Tân Sửu", "Tân Sửu", "Tân Sửu", "Nhâm Thìn", "Nhâm Thìn", "Nhâm Thìn"] },
  { id: 52, ten: "Ly sàng", yNghia: "Kỵ giá thú", loai: "mapping_thang", map: ["Dậu", "Dậu", "Dậu", "Dần,Ngọ", "Dần,Ngọ", "Dần,Ngọ", "Tuất", "Tuất", "Tuất", "Tỵ", "Tỵ", "Tỵ"] },
  { id: 53, ten: "Tứ thời cô quả", yNghia: "Kỵ giá thú", loai: "mapping_thang", map: ["Sửu", "Sửu", "Sửu", "Thìn", "Thìn", "Thìn", "Mùi", "Mùi", "Mùi", "Tuất", "Tuất", "Tuất"] },
  { id: 54, ten: "Không phòng", yNghia: "Kỵ giá thú", loai: "mapping_thang", map: ["Thìn", "Tỵ", "Tý", "Tuất", "Hợi", "Mùi", "Dần", "Mão", "Ngọ", "Thân", "Dậu", "Sửu"] },
  { id: 55, ten: "Âm thác", yNghia: "Kỵ xuất hành, giá thú, an táng", loai: "mapping_thang", map: ["Canh Tuất", "Tân Dậu", "Canh Thân", "Đinh Mùi", "Bính Ngọ", "Đinh Tỵ", "Giáp Thìn", "Ất Mão", "Giáp Dần", "Quý Sửu", "Nhâm Tý", "Quý Hợi"] },
  { id: 56, ten: "Dương thác", yNghia: "Kỵ xuất hành, giá thú, an táng", loai: "mapping_thang", map: ["Giáp Dần", "Ất Mão", "Giáp Thìn", "Đinh Tỵ", "Bính Ngọ", "Đinh Mùi", "Canh Thân", "Tân Dậu", "Canh Tuất", "Quý Hợi", "Nhâm Tý", "Quý Sửu"] },
  { id: 57, ten: "Quỷ khốc", yNghia: "Xấu tế tự, mai táng", loai: "mapping_thang", map: ["Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất", "Tuất"] },
  { id: 58, ten: "Xích khẩu", yNghia: "Kỵ giá thú, giao dịch, yến tiệc", loai: "ngay_theo_thang", map: [ [3, 9, 15, 21, 27], [2, 8, 14, 20, 26], [1, 7, 13, 19, 25], [6, 12, 18, 24, 30], [5, 11, 17, 23, 29], [4, 10, 16, 22, 28], [3, 9, 15, 21, 27], [2, 8, 14, 20, 26], [1, 7, 13, 19, 25], [6, 12, 14, 24, 30], [5, 11, 17, 23, 29], [4, 10, 16, 22, 28] ] },
  { id: 59, ten: "Đại không vong", yNghia: "Kỵ xuất hành, giao dịch, giao tài vật", loai: "ngay_theo_thang", map: [ [6, 14, 22, 30], [5, 13, 21, 29], [4, 12, 20, 28], [3, 11, 19, 27], [2, 10, 18, 26], [1, 17, 24], [8, 16, 24], [7, 15, 23], [6, 14, 22, 30], [5, 13, 21, 29], [4, 12, 20, 28], [3, 11, 19, 27] ] },
  { id: 60, ten: "Tiểu không vong", yNghia: "Kỵ xuất hành, giao dịch, giao tài vật", loai: "ngay_theo_thang", map: [ [2, 10, 18, 26], [1, 9, 17, 25], [8, 16, 24], [7, 15, 23], [6, 14, 22, 30], [5, 13, 21, 29], [4, 12, 20, 28], [3, 11, 19, 27], [2, 10, 18, 26], [1, 9, 17, 25], [8, 16, 24], [7, 15, 23] ] },
  { id: 61, ten: "Dương công kỵ", yNghia: "Xấu mọi việc", loai: "ngay_theo_thang", map: [ [13], [11], [9], [7], [5], [3], [2, 29], [27], [25], [23], [21], [19] ] },
  { id: 62, ten: "Cửu thổ quỷ", yNghia: "Xấu động thổ, khởi tạo, xuất hành, giao dịch, thượng quan", loai: "co_dinh", ngay: ["Ất Dậu", "Quý Tỵ", "Giáp Ngọ", "Tân Sửu", "Nhâm Dần", "Kỷ Dậu", "Canh Tuất", "Đinh Sửu", "Mậu Ngọ"] },
  { id: 63, ten: "Ly sào", yNghia: "Xấu nhập trạch, giá thú", loai: "co_dinh", ngay: ["Mậu Tý", "Mậu Dần", "Mậu Thìn", "Mậu Ngọ", "Mậu Thân", "Mậu Tuất", "Kỷ Sửu", "Kỷ Tỵ", "Kỷ Dậu", "Tân Sửu", "Tân Mão", "Tân Tỵ", "Nhâm Tuất", "Quý Tỵ"] },
  { id: 64, ten: "Hỏa tinh", yNghia: "Xấu lợp nhà, làm bếp", loai: "nhom_thang", duLieu: { nhom_1_4_7_10: ["Ất Sửu", "Giáp Tuất", "Quý Mùi", "Nhâm Thìn", "Tân Sửu", "Canh Tuất", "Kỷ Mùi"], nhom_2_5_8_11: ["Giáp Tý", "Quý Dậu", "Nhâm Ngọ", "Tân Mão", "Canh Tý", "Kỷ Dậu", "Mậu Ngọ"], nhom_3_6_9_12: ["Nhâm Thân", "Tân Tỵ", "Canh Dần", "Kỷ Hợi", "Mậu Thân", "Quý Hợi"] }}
];

// --- DỮ LIỆU RÚT GỌN THEO YÊU CẦU ---
const CAN_CHI_XUNG_DATA = { 
"Giáp Tý": ["Mậu Ngọ", "Giáp Ngọ"],
 "Ất Sửu": ["Kỷ Mùi", "Ất Mùi"],
 "Bính Dần": ["Canh Thân", "Bính Thân"],
 "Đinh Mão": ["Tân Dậu", "Đinh Dậu"],
 "Mậu Thìn": ["Nhâm Tuất", "Mậu Tuất"],
 "Kỷ Tị": ["Quý Hợi", "Kỷ Hợi"],
 "Canh Ngọ": ["Giáp Tý", "Canh Tý"],
 "Tân Mùi": ["Ất Sửu", "Tân Sửu"],
 "Nhâm Thân": ["Bính Dần", "Nhâm Dần"],
 "Quý Dậu": ["Đinh Mão", "Quý Mão"],
 "Giáp Tuất": ["Mậu Thìn", "Giáp Thìn"],
 "Ất Hợi": ["Kỷ Tị", "Ất Tị"],
 "Bính Tý": ["Canh Ngọ", "Bính Ngọ"],
 "Đinh Sửu": ["Tân Mùi", "Đinh Mùi"],
 "Mậu Dần": ["Nhâm Thân", "Mậu Thân"],
 "Kỷ Mão": ["Quý Dậu", "Kỷ Dậu"],
 "Canh Thìn": ["Giáp Tuất", "Canh Tuất"],
 "Tân Tị": ["Ất Hợi", "Tân Hợi"],
 "Nhâm Ngọ": ["Bính Tý", "Nhâm Tý"],
 "Quý Mùi": ["Đinh Sửu", "Quý Sửu"],
 "Giáp Thân": ["Mậu Dần", "Giáp Dần"],
 "Ất Dậu": ["Kỷ Mão", "Ất Mão"],
 "Bính Tuất": ["Canh Thìn", "Bính Thìn"],
 "Đinh Hợi": ["Tân Tị", "Đinh Tị"],
 "Mậu Tý": ["Nhâm Ngọ", "Mậu Ngọ"],
 "Kỷ Sửu": ["Quý Mùi", "Kỷ Mùi"],
 "Canh Dần": ["Giáp Thân", "Canh Thân"],
 "Tân Mão": ["Ất Dậu", "Tân Dậu"],
 "Nhâm Thìn": ["Bính Tuất", "Nhâm Tuất"],
 "Quý Tị": ["Đinh Hợi", "Quý Hợi"],
 "Giáp Ngọ": ["Mậu Tý", "Giáp Tý"],
 "Ất Mùi": ["Kỷ Sửu", "Ất Sửu"],
 "Bính Thân": ["Canh Dần", "Bính Dần"],
 "Đinh Dậu": ["Tân Mão", "Đinh Mão"],
 "Mậu Tuất": ["Nhâm Thìn", "Mậu Thìn"],
 "Kỷ Hợi": ["Quý Tị", "Kỷ Tị"],
 "Canh Tý": ["Giáp Ngọ", "Canh Ngọ"],
 "Tân Sửu": ["Ất Mùi", "Tân Mùi"],
 "Nhâm Dần": ["Bính Thân", "Nhâm Thân"],
 "Quý Mão": ["Đinh Dậu", "Quý Dậu"],
 "Giáp Thìn": ["Mậu Tuất", "Giáp Tuất"],
 "Ất Tị": ["Kỷ Hợi", "Ất Hợi"],
 "Bính Ngọ": ["Canh Tý", "Bính Tý"],
 "Đinh Mùi": ["Tân Sửu", "Đinh Sửu"],
 "Mậu Thân": ["Nhâm Dần", "Mậu Dần"],
 "Kỷ Dậu": ["Quý Mão", "Kỷ Mão"],
 "Canh Tuất": ["Giáp Thìn", "Canh Thìn"],
 "Tân Hợi": ["Ất Tị", "Tân Tị"],
 "Nhâm Tý": ["Bính Ngọ", "Nhâm Ngọ"],
 "Quý Sửu": ["Đinh Mùi", "Quý Mùi"],
 "Giáp Dần": ["Mậu Thân", "Giáp Thân"],
 "Ất Mão": ["Kỷ Dậu", "Ất Dậu"],
 "Bính Thìn": ["Canh Tuất", "Bính Tuất"],
 "Đinh Tị": ["Tân Hợi", "Đinh Hợi"],
 "Mậu Ngọ": ["Nhâm Tý", "Mậu Tý"],
 "Kỷ Mùi": ["Quý Sửu", "Kỷ Sửu"],
 "Canh Thân": ["Giáp Dần", "Canh Dần"],
 "Tân Dậu": ["Ất Mão", "Tân Mão"],
 "Nhâm Tuất": ["Bính Thìn", "Nhâm Thìn"],
 "Quý Hợi": ["Đinh Tị", "Quý Tị"] };

const TU_LY_TERMS = new Set(["Xuân phân", "Thu phân", "Hạ chí", "Đông chí"]);
const TU_TUYET_TERMS = new Set(["Lập xuân", "Lập hạ", "Lập thu", "Lập đông"]);
const TAI_THAN_DIRECTION = { "Giáp": "ĐN", "Ất": "ĐN", "Bính": "Đông", "Đinh": "Đông", "Mậu": "Bắc", "Kỷ": "Nam", "Canh": "TN", "Tân": "TN", "Nhâm": "Tây", "Quý": "TB" };
const HY_THAN_DIRECTION = { "Giáp": "ĐB", "Ất": "TB", "Bính": "TN", "Đinh": "Nam", "Mậu": "ĐN", "Kỷ": "ĐB", "Canh": "TB", "Tân": "TN", "Nhâm": "Nam", "Quý": "ĐN" };
const HAC_THAN_DIRECTION = { "Giáp Tý": "ĐN", "Ất Sửu": "ĐN", "Bính Dần": "Nam", "Đinh Mão": "Nam", "Mậu Thìn": "Nam", "Kỷ Tị": "Nam", "Canh Ngọ": "Nam", "Tân Mùi": "TN", "Đinh Sửu": "Tây", "Mậu Dần": "Tây", "Kỷ Mão": "Tây", "Canh Thìn": "Tây", "Tân Tị": "Tây", "Nhâm Ngọ": "TB", "Quý Mùi": "TB", "Giáp Thân": "TB", "Ất Dậu": "TB", "Bính Tuất": "TB", "Đinh Hợi": "Tây", "Mậu Tý": "Bắc", "Kỷ Sửu": "Bắc", "Canh Dần": "Bắc", "Tân Mão": "Bắc", "Nhâm Thìn": "Bắc", "Quý Tị": "Tại Thiên", "Giáp Ngọ": "Tại Thiên", "Ất Mùi": "Tại Thiên", "Bính Thân": "Tại Thiên", "Đinh Dậu": "Tại Thiên", "Mậu Tuất": "Tại Thiên", "Kỷ Hợi": "Tại Thiên", "Canh Tý": "Tại Thiên", "Tân Sửu": "Tại Thiên", "Nhâm Dần": "Tại Thiên", "Quý Mão": "Tại Thiên", "Giáp Thìn": "Tại Thiên", "Ất Tị": "Tại Thiên", "Bính Ngọ": "Tại Thiên", "Đinh Mùi": "Tại Thiên", "Mậu Thân": "Tại Thiên", "Kỷ Dậu": "ĐB", "Canh Tuất": "ĐB", "Tân Hợi": "ĐB", "Nhâm Tý": "ĐB", "Quý Sửu": "ĐB", "Giáp Dần": "Đông", "Ất Mão": "Đông", "Bính Thìn": "Đông", "Đinh Tị": "Đông", "Mậu Ngọ": "Đông", "Kỷ Mùi": "Đông", "Canh Thân": "ĐN", "Tân Dậu": "ĐN", "Nhâm Tuất": "ĐN", "Quý Hợi": "ĐN", "Nhâm Thân": "TN", "Quý Dậu": "TN", "Giáp Tuất": "TN", "Ất Hợi": "TN", "Bính Tý": "TN" };
const KIM_THAN_THAT_SAT_DATA = { "Giáp": ["Ngọ", "Mùi"], "Kỷ": ["Ngọ", "Mùi"], "Ất": ["Thìn", "Tị"], "Canh": ["Thìn", "Tị"], "Bính": ["Tý", "Sửu", "Dần", "Mão"], "Tân": ["Tý", "Sửu", "Dần", "Mão"], "Đinh": ["Tuất", "Hợi"], "Nhâm": ["Tuất", "Hợi"], "Mậu": ["Thân", "Dậu"], "Quý": ["Thân", "Dậu"] };
const SAT_CHU_DUONG_DATA = { 1: "Tý", 2: "Sửu", 3: "Sửu", 7: "Sửu", 9: "Sửu", 4: "Tuất", 11: "Mùi", 5: "Thìn", 6: "Thìn", 8: "Thìn", 12: "Thìn" };
const SAT_CHU_AM_DATA = { 1: "Tị", 2: "Tý", 3: "Mùi", 4: "Mão", 5: "Thân", 6: "Tuất", 7: "Sửu", 8: "Hợi", 9: "Ngọ", 10: "Dậu", 11: "Dần", 12: "Thìn" };
const SAT_CHU_MUA_DATA = { "Ngọ": [1, 2, 3], "Tý": [4, 5, 6], "Dậu": [7, 8, 9], "Mão": [10, 11, 12] };
const SAT_CHU_THANG_DATA = { "Tý": [1, 5, 9], "Mão": [2, 8, 10], "Ngọ": [3, 7, 11], "Dậu": [4, 6, 12] };
const THO_TU_DATA = { 1: "Bính Tuất", 2: "Nhâm Thìn", 3: "Tân Hợi", 4: "Đinh Tị", 5: "Mậu Tý", 6: "Bính Ngọ", 7: "Ất Sửu", 8: "Quý Mùi", 9: "Giáp Dần", 10: "Mậu Thân", 11: "Tân Mão", 12: "Tân Dậu" };
const TAM_DAI_KIET_TINH_DATA = { "Sát Cống": { "Tứ Mạnh": new Set(["Giáp Ngọ", "Ất Dậu", "Bính Tý", "Đinh Mão", "Tân Dậu", "Nhâm Tý", "Quý Mão"]), "Tứ Trọng": new Set(["Giáp Thân", "Ất Hợi", "Bính Dần", "Canh Thân", "Tân Hợi", "Nhâm Dần", "Quý Tị"]), "Tứ Quý": new Set(["Giáp Tuất", "Kỷ Sửu", "Kỷ Mùi", "Canh Tuất", "Tân Sửu", "Nhâm Thìn", "Quý Mùi"]) }, "Trực Tinh": { "Tứ Mạnh": new Set(["Giáp Thìn", "Ất Mùi", "Bính Tuất", "Đinh Sửu", "Mậu Thìn", "Nhâm Tuất", "Quý Sửu"]), "Tứ Trọng": new Set(["Giáp Ngọ", "Ất Dậu", "Bính Tý", "Đinh Mão", "Tân Dậu", "Nhâm Tý", "Quý Mão"]), "Tứ Quý": new Set(["Giáp Thân", "Ất Hợi", "Bính Dần", "Canh Thân", "Tân Mão", "Nhâm Dần", "Quý Tị"]) }, "Nhơn Chuyên": { "Tứ Mạnh": new Set(["Bính Thìn", "Đinh Mùi", "Mậu Tuất", "Kỷ Sửu", "Canh Thìn", "Tân Mùi"]), "Tứ Trọng": new Set(["Ất Mão", "Bính Ngọ", "Đinh Dậu", "Mậu Tý", "Kỷ Mão", "Canh Ngọ"]), "Tứ Quý": new Set(["Giáp Dần", "Ất Tị", "Bính Thân", "Mậu Dần", "Kỷ Tị", "Kỷ Hợi", "Quý Hợi"]) } };
const SAO_THANG_CATEGORY = { 1: "Tứ Mạnh", 4: "Tứ Mạnh", 7: "Tứ Mạnh", 10: "Tứ Mạnh", 2: "Tứ Trọng", 5: "Tứ Trọng", 8: "Tứ Trọng", 11: "Tứ Trọng", 3: "Tứ Quý", 6: "Tứ Quý", 9: "Tứ Quý", 12: "Tứ Quý" };
const GIO_SAT_CHU = { 1: 'Dần', 7: 'Dần', 2: 'Tị', 8: 'Tị', 3: 'Thân', 9: 'Thân', 4: 'Thìn', 10: 'Thìn', 5: 'Dậu', 11: 'Dậu', 6: 'Mão', 12: 'Mão' };
const GIO_THO_TU = { "Tý": "Sửu", "Sửu": "Ngọ", "Dần": "Ngọ", "Tị": "Ngọ", "Mùi": "Ngọ", "Hợi": "Ngọ", "Mão": "Tị", "Thìn": "Tị", "Dậu": "Tị", "Ngọ": "Mùi", "Tuất": "Mùi", "Thân": "Mão" };
const GIO_THIEN_CAU = { 1: { "Tý": "Hợi" }, 2: { "Sửu": "Tý" }, 3: { "Dần": "Sửu" }, 4: { "Mão": "Dần" }, 5: { "Thìn": "Mão" }, 6: { "Tị": "Thìn" }, 7: { "Ngọ": "Tị" }, 8: { "Mùi": "Ngọ" }, 9: { "Thân": "Mùi" }, 10: { "Dậu": "Thân" }, 11: { "Tuất": "Dậu" }, 12: { "Hợi": "Tuất" } };
const QUY_NHAN_DATA = { "Giáp": { "Vũ thủy": { "Mão": "Dương QN", "Dậu": "Âm QN" },
 "Thu phân": { "Dần": "Âm QN", "Thân": "Dương QN" },
 "Sương giáng": { "Sửu": "Âm QN", "Mùi": "Dương QN" },
 "Tiểu tuyết": { "Tý": "Âm QN", "Ngọ": "Dương QN" },
 "Đông chí": { "Tỵ": "Dương QN", "Hợi": "Âm QN" },
 "Đại hàn": { "Thìn": "Dương QN", "Tuất": "Âm QN" } },
 "Ất": { "Vũ thủy": { "Tuất": "Âm QN" },
 "Xuân phân": { "Dậu": "Âm QN" },
 "Hạ chí": { "Tuất": "Âm QN" },
 "Đại Thử": { "Dậu": "Âm QN" },
 "Xử thử": { "Thân": "Dương QN"},
 "Thu phân": { "Mùi": "Dương QN"},
 "Sương giáng": { "Ngọ": "Dương QN", "Dần": "Âm QN" },
 "Tiểu tuyết": { "Tỵ": "Dương QN", "Sửu": "Âm QN" },
 "Đông chí": { "Thìn": "Dương QN", "Tý": "Âm QN" },
 "Đại hàn": { "Mão": "Dương QN", "Hợi": "Âm QN" } },
 "Bính": { "Vũ thủy": { "Hợi": "Âm QN" },
 "Xuân phân": { "Tuất": "Âm QN" },
 "Tiểu mãn": { "Hợi": "Âm QN" },
 "Hạ chí": { "Dậu": "Âm QN" },
 "Đại Thử": { "Thân": "Dương QN" },
 "Xử thử": { "Mùi": "Dương QN" },
 "Thu phân": { "Ngọ": "Dương QN" },
 "Sương giáng": { "Tỵ": "Dương QN" },
 "Tiểu tuyết": { "Thìn": "Dương QN", "Dần": "Âm QN" },
 "Đông chí": { "Sửu": "Âm QN" },
 "Đại hàn": { "Tý": "Âm QN" } },
 "Đinh": { "Vũ thủy": { "Sửu": "Âm QN" },
 "Cốc vũ": { "Hợi": "Âm QN" },
 "Tiểu mãn": { "Thân": "Dương QN" },
 "Hạ chí": { "Mùi": "Dương QN" },
 "Đại Thử": { "Ngọ": "Dương QN" },
 "Xử thử": { "Tỵ": "Dương QN" },
 "Thu phân": { "Thìn": "Dương QN" },
 "Sương giáng": { "Mão": "Dương QN" },
 "Đông chí": { "Mão": "Dương QN" },
 "Đại hàn": { "Dần": "Âm QN" } },
 "Mậu": { "Vũ thủy": { "Mão": "Dương QN", "Dậu": "Âm QN" },
 "Xuân phân": { "Thân": "Dương QN", "Dần": "Âm QN" },
 "Cốc vũ": { "Sửu": "Âm QN", "Mùi": "Dương QN" },
 "Tiểu mãn": { "Tý": "Âm QN", "Ngọ": "Dương QN" },
 "Hạ chí": { "Tỵ": "Dương QN", "Hợi": "Âm QN" },
 "Đại Thử": { "Thìn": "Dương QN", "Tuất": "Âm QN" },
 "Xử thử": { "Mão": "Dương QN", "Dậu": "Âm QN" } },
 "Kỷ": { "Vũ thủy": { "Dần": "Âm QN" },
 "Xuân phân": { "Sửu": "Âm QN" },
 "Cốc vũ": { "Tý": "Âm QN", "Thân": "Dương QN" },
 "Tiểu mãn": { "Hợi": "Âm QN", "Mùi": "Dương QN" },
 "Hạ chí": { "Tuất": "Âm QN", "Ngọ": "Dương QN" },
 "Đại Thử": { "Tỵ": "Dương QN" },
 "Xử thử": { "Ngọ": "Dương QN" },
 "Thu phân": { "Mão": "Dương QN" } },
 "Canh": { "Vũ thủy": { "Mão": "Dương QN", "Dậu": "Âm QN" },
 "Xuân phân": { "Thân": "Dương QN", "Dần": "Âm QN" },
 "Cốc vũ": { "Sửu": "Âm QN", "Mùi": "Dương QN" },
 "Tiểu mãn": { "Tý": "Âm QN", "Ngọ": "Dương QN" },
 "Hạ chí": { "Tỵ": "Dương QN", "Hợi": "Âm QN" },
 "Đại Thử": { "Thìn": "Dương QN", "Tuất": "Âm QN" },
 "Xử thử": { "Mão": "Dương QN", "Dậu": "Âm QN" } },
 "Tân": { "Vũ thủy": { "Thân": "Dương QN" },
 "Xuân phân": {"Mùi": "Dương QN" },
 "Cốc vũ": { "Dần": "Âm QN", "Ngọ": "Dương QN" },
 "Tiểu mãn": { "Sửu": "Âm QN", "Tỵ": "Dương QN" },
 "Hạ chí": { "Tý": "Âm QN", "Thìn": "Dương QN" },
 "Đại Thử": { "Mão": "Dương QN", "Hợi": "Âm QN" },
 "Xử thử": { "Tuất": "Âm QN" },
 "Thu phân": { "Dậu": "Âm QN" } },
 "Nhâm": { "Vũ thủy": { "Mùi": "Dương QN" },
 "Xuân phân": { "Ngọ": "Dương QN" },
 "Cốc vũ": { "Tỵ": "Dương QN" },
 "Tiểu mãn": { "Thìn": "Dương QN", "Dần": "Âm QN" },
 "Hạ chí": { "Mão": "Dương QN", "Sửu": "Âm QN" },
 "Đại Thử": { "Tý": "Âm QN" },
 "Xử thử": { "Hợi": "Âm QN" },
 "Thu phân": { "Tuất": "Âm QN" },
 "Sương giáng": { "Dậu": "Âm QN" },
 "Đại hàn": { "Thân": "Dương QN" } },
 "Quý": { "Vũ thủy": { "Tị": "Dương QN" },
 "Xuân phân": { "Thìn": "Dương QN" },
 "Cốc vũ": { "Mão": "Dương QN" },
 "Tiểu mãn": { "Dần": "Âm QN" },
 "Đại Thử": { "Dần": "Âm QN" },
 "Xử thử": { "Sửu": "Âm QN" },
 "Thu phân": { "Tý": "Âm QN" },
 "Sương giáng": { "Hợi": "Âm QN" },
 "Tiểu tuyết": { "Thân": "Dương QN", "Tuất": "Âm QN" },
 "Đông chí": { "Mùi": "Dương QN", "Dậu": "Âm QN" },
 "Đại hàn": { "Ngọ": "Dương QN" } } };


// *** DỮ LIỆU MỚI: KỴ CƯỚI HỎI ***
const THIEN_DA_DATA = { 1: new Set(["Dần", "Sửu", "Tuất"]), 2: new Set(["Dần", "Sửu", "Tuất"]), 3: new Set(["Dần", "Sửu", "Tuất"]), 4: new Set(["Tị", "Thìn", "Hợi"]), 5: new Set(["Tị", "Thìn", "Hợi"]), 6: new Set(["Tị", "Thìn", "Hợi"]), 7: new Set(["Ngọ", "Mão", "Tý"]), 8: new Set(["Ngọ", "Mão", "Tý"]), 9: new Set(["Ngọ", "Mão", "Tý"]), 10: new Set(["Mùi", "Thìn", "Dậu"]), 11: new Set(["Mùi", "Thìn", "Dậu"]), 12: new Set(["Mùi", "Thìn", "Dậu"]) };
const THIEN_LOI_DATA = { 1: "Tý", 7: "Tý", 4: "Ngọ", 10: "Ngọ", 5: "Thân", 11: "Thân", 6: "Tuất", 12: "Tuất" };
const THIEN_MA_DATA = { 1: new Set(["Mùi", "Tuất", "Hợi"]), 2: new Set(["Mùi", "Tuất", "Hợi"]), 3: new Set(["Mùi", "Tuất", "Hợi"]), 4: new Set(["Thìn", "Tị", "Tý"]), 5: new Set(["Thìn", "Tị", "Tý"]), 6: new Set(["Thìn", "Tị", "Tý"]), 7: new Set(["Thân", "Dậu", "Sửu"]), 8: new Set(["Thân", "Dậu", "Sửu"]), 9: new Set(["Thân", "Dậu", "Sửu"]), 10: new Set(["Dậu", "Mão", "Ngọ"]), 11: new Set(["Dậu", "Mão", "Ngọ"]), 12: new Set(["Dậu", "Mão", "Ngọ"]) };
const TAM_CUONG_DAYS = new Set([8, 18, 28]);


// --- DỮ LIỆU RÚT GỌN & ĐỒNG BỘ ---
const TRUC_NAMES = ["Kiến", "Trừ", "Mãn", "Bình", "Định", "Chấp", "Phá", "Nguy", "Thành", "Thâu", "Khai", "Bế"];
const TRUC_INFO = {
  "Kiến": {
    name: "Trực Kiến (Khởi đầu)",
    rating: "Tốt (Tiểu Cát đến Trung Cát)",
    nghi: "Xuất hành, nhậm chức, cầu quan lộc, thăm hỏi, nộp đơn từ, nhập học, mưu sự nghiệp, tế tự.",
    ky: "Động thổ, phá thổ, an táng, sửa mộ (vì ngày Kiến là ngày “tụ khí” của tháng, vượng quá thì hóa hư).",
    ngoaitru: "Trùng ngày Nguyệt Kiến (ngày Địa chi giống tháng) thì càng mạnh cho quan lộc, nhưng càng kỵ động thổ & chôn cất."
  },
  "Trừ": {
    name: "Trực Trừ (Tẩy uế)",
    rating: "Tốt (Trung Cát)",
    nghi: "Tắm gội, dọn nhà, chữa bệnh, cắt tóc, nhổ răng, phẫu thuật, trừ tà, xả xui, bắt trộm, ly hôn.",
    ky: "Cưới hỏi, nhậm chức lâu dài, ký hợp đồng lớn, xuất hành xa (dễ chia ly, bãi miễn).",
    ngoaitru: "Nếu gặp Thiên Đức, Nguyệt Đức, Thiên Ân thì có thể cưới hỏi (các sách đều cho phép)."
  },
  "Mãn": {
    name: "Trực Mãn (Đầy đủ)",
    rating: "Rất Tốt (Đại Cát)",
    nghi: "Khai trương, mở kho xuất hàng, thu tiền, cầu tài lộc, cưới hỏi, động thổ, dựng nhà, cúng tế, nhận người.",
    ky: "An táng, chôn cất (sợ mộ đầy nước, mục nát), kiện tụng (dây dưa), uống thuốc lâu ngày (bệnh ứ tắc).",
    ngoaitru: "Không nên cho vay tiền ngày này (khó đòi lại)."
  },
  "Bình": {
    name: "Trực Bình (Bình hòa)",
    rating: "Tốt (Tiểu Cát đến Trung Cát)",
    nghi: "Định việc, ký kết hợp đồng bình đẳng, tu sửa nhà cửa, dựng cột, làm đường, di chuyển, hòa giải, nhập trạch nhẹ.",
    ky: "Đào giếng, đào mương, trổ cửa thông (phá vỡ sự bình), kiện tụng (hòa thì không thắng).",
    ngoaitru: "Gặp Chu Tước, Bạch Hổ thì kỵ tranh cãi, cưới xin."
  },
  "Định": {
    name: "Trực Định (Yên định)",
    rating: "Rất Tốt (Đại Cát)",
    nghi: "Cưới hỏi, động thổ, đổ mái, nhập trạch, nhậm chức lâu dài, ký hợp đồng lớn, kết nghĩa anh em, chăn nuôi.",
    ky: "Xuất hành xa, thưa kiện, cầu y (việc gì cũng “định” không chuyển động).",
    ngoaitru: "Đặc biệt kỵ đi thuyền, vượt suối ngày Định (dễ bị “đóng băng” giữa đường)."
  },
  "Chấp": {
    name: "Trực Chấp (Nắm giữ)",
    rating: "Xấu (Tiểu Hung – bán cát bán hung)",
    nghi: "Tu sửa nhà cũ, xây tường, đắp đê, lấp hố, đòi nợ, bắt kẻ trộm, tích trữ hàng hóa.",
    ky: "Khai trương, khởi sự mới, xuất hành, dời nhà, mở kho xuất tiền.",
    ngoaitru: "Gặp Giải Thần thì hóa giải được tính bảo thủ, có thể làm việc mới."
  },
  "Phá": {
    name: "Trực Phá (Phá bỏ)",
    rating: "Rất Xấu (Đại Hung – chính là Nguyệt Phá)",
    nghi: "Phá dỡ nhà cũ, đập tường, lấp ao, trị bệnh kinh nguyệt, ly hôn, trừng trị tội nhân.",
    ky: "Tuyệt đối kỵ cưới hỏi, động thổ, khai trương, ký kết, xuất hành, mua bán tài sản lớn.",
    ngoaitru: "Không có ngoại lệ tốt – ngày này chỉ dùng để phá, không dùng để xây."
  },
  "Nguy": {
    name: "Trực Nguy (Nguy hiểm)",
    rating: "Xấu (Đại Hung)",
    nghi: "Cầu phúc, lễ thần, bái Phật, làm việc thiện, giải oan, an giường (theo một số sách).",
    ky: "Leo núi cao, đi thuyền xa, xuất hành đường dài, xây dựng cao tầng, mọi việc mạo hiểm.",
    ngoaitru: "Gặp sao Thất (Trong 28 tú) thì hóa giải được hung tính, có thể khởi công (Đổng Công cho phép)."
  },
  "Thành": {
    name: "Trực Thành (Thành công)",
    rating: "Rất Tốt (Đại Cát – ngày Thiên Hỷ)",
    nghi: "Mọi việc lớn: khai trương, cưới hỏi, nhập trạch, động thổ, xuất hành, ký kết, cầu tài, thi cử, nhậm chức.",
    ky: "Kiện tụng, tranh chấp (cả hai bên đều mạnh, khó phân thắng thua).",
    ngoaitru: "Gặp Tam Nương, Nguyệt Kỵ, Sát Chủ thì dù Thành cũng không dùng (hung khắc cát)."
  },
  "Thu": {
    name: "Trực Thu (Thu vào)",
    rating: "Tốt (Trung Cát)",
    nghi: "Thu tiền, đòi nợ, thu hoạch mùa màng, mua đất đai, mua súc vật, xây kho chứa, tích trữ.",
    ky: "Khởi công việc mới, xuất tiền lớn, an táng, xuất hành xa, chữa bệnh.",
    ngoaitru: "Khí thế co lại, không thích hợp cho việc mở mang."
  },
  "Khai": {
    name: "Trực Khai (Mở ra)",
    rating: "Rất Tốt (Đại Cát – ngày sinh khí mạnh)",
    nghi: "Động thổ, khai trương, cưới hỏi, nhập trạch, xuất hành, cầu tài, thi cử, mở cửa hàng, nhuộm vải.",
    ky: "An táng, chôn cất (mở ra thì không đóng được cửa mả).",
    ngoaitru: "Gặp Thọ Tử, Sát Chủ, Nguyệt Kỵ thì mất tác dụng tốt, trở thành ngày xấu."
  },
  "Bế": {
    name: "Trực Bế (Đóng lại)",
    rating: "Xấu (Tiểu Hung) nhưng đặc biệt tốt cho tang lễ",
    nghi: "An táng, chôn cất (đóng cửa mả vĩnh viễn), xây tường rào, đắp đê, lấp hang hốc, đặt biển hiệu.",
    ky: "Khai trương, động thổ, cưới hỏi, xuất hành, chữa bệnh (đặc biệt bệnh mắt), châm cứu.",
    ngoaitru: "Ngày này là ngày tốt nhất trong 12 trực để làm tang lễ."
  }
};

const BAT_TU_NAMES = ["Giác", "Cang", "Đê", "Phòng", "Tâm", "Vĩ", "Cơ", "Đẩu", "Ngưu", "Nữ", "Hư", "Nguy", "Thất", "Bích", "Khuê", "Lâu", "Vị", "Mão", "Tất", "Chủy", "Sâm", "Tỉnh", "Quỷ", "Liễu", "Tinh", "Trương", "Dực", "Chẩn"];
const BAT_TU_EPOCH = { jdn: 2451545, index: 16 };
const BAT_TU_INFO = {
    "Giác": {
        name: "Sao Giác (Giác Mộc Giao) - Con Giao Long",
        rating: "Tốt (Kiết)",
        nghi: "Tạo tác mọi việc đều đặng vinh xương, tấn lợi. Hôn nhân cưới gã sanh con quý. Công danh khoa cử cao thăng, đỗ đạt.",
        ky: "Chôn cất hoạn nạn 3 năm. Sửa chữa hay xây đắp mộ phần ắt có người chết. Sanh con nhằm ngày có Sao Giác khó nuôi, nên lấy tên Sao mà đặt tên cho nó mới an toàn. Dùng tên sao của năm hay của tháng cũng được.",
        ngoaitru: "Sao Giác trúng ngày Dần là Đăng Viên được ngôi cao cả, mọi sự tốt đẹp. Sao Giác trúng ngày Ngọ là Phục Đoạn Sát: rất Kỵ chôn cất, xuất hành, thừa kế, chia lãnh gia tài, khởi công lò nhuộm lò gốm. NHƯNG Nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại. Sao Giác trúng ngày Sóc là Diệt Một Nhật: Đại Kỵ đi thuyền, và cũng chẳng nên làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, thừa kế."
    },
    "Cang": {
        name: "Sao Cang (Can Kim Long) - Con Rồng",
        rating: "Xấu (Hung)",
        nghi: "Cắt may áo màn (sẽ có lộc ăn).",
        ky: "Chôn cất bị Trùng tang. Cưới gã e phòng không giá lạnh. Tranh đấu kiện tụng lâm bại. Khởi dựng nhà cửa chết con đầu. 10 hoặc 100 ngày sau thì gặp họa, rồi lần lần tiêu hết ruộng đất, nếu làm quan bị cách chức. Sao Cang thuộc Thất Sát Tinh, sanh con nhằm ngày này ắt khó nuôi, nên lấy tên của Sao mà đặt cho nó thì yên lành.",
        ngoaitru: "Sao Cang ở nhằm ngày Rằm là Diệt Một Nhật: Cử làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, thừa kế sự nghiệp, thứ nhất đi thuyền chẳng khỏi nguy hại ( vì Diệt Một có nghĩa là chìm mất ). Sao Cang tại Hợi, Mẹo, Mùi trăm việc đều tốt. Thứ nhất tại Mùi."
    },
    "Đê": {
        name: "Sao Đê (Đê Thổ Lạc) - Con Lạc Đà",
        rating: "Xấu (Hung)",
        nghi: "Sao Đê Đại Hung, không có việc chi hạp với nó.",
        ky: "Khởi công xây dựng, chôn cất, cưới gã, xuất hành kỵ nhất là đường thủy, sanh con chẳng phải điềm lành nên làm Âm Đức cho nó. Đó chỉ là các việc Đại Kỵ, các việc khác vẫn kiêng cử.",
        ngoaitru: "Tại Thân, Tý, Thìn trăm việc đều tốt, nhưng Thìn là tốt hơn hết vì Sao Đê Đăng Viên tại Thìn."
    },
    "Phòng": {
        name: "Sao Phòng (Phòng Nhựt Thố) - Con Thỏ",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác mọi việc đều tốt, thứ nhất là xây dựng nhà, chôn cất, cưới gã, xuất hành, đi thuyền, mưu sự, chặt cỏ phá đất, cắt áo.",
        ky: "Sao Phòng là Đại Kiết Tinh, không kỵ việc chi cả.",
        ngoaitru: "Tại Đinh Sửu và Tân Sửu đều tốt, tại Dậu càng tốt hơn, vì Sao Phòng Đăng Viên tại Dậu. Trong 6 ngày Kỷ Tị, Đinh Tị, Kỷ Dậu, Quý Dậu, Đinh Sửu, Tân Sửu thì Sao Phòng vẫn tốt với các việc khác, ngoại trừ chôn cất là rất kỵ. Sao Phòng nhằm ngày Tị là Phục Đoạn Sát: chẳng nên chôn cất, xuất hành, các vụ thừa kế, chia lãnh gia tài, khởi công làm lò nhuộm lò gốm. NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại."
    },
    "Tâm": {
        name: "Sao Tâm (Tâm Nguyệt Hồ) - Con Chồn Cáo",
        rating: "Xấu (Hung)",
        nghi: "Tạo tác việc chi cũng không hạp với Hung tú này.",
        ky: "Khởi công tạo tác việc chi cũng không khỏi hại, thứ nhất là xây cất, cưới gã, chôn cất, đóng giường, lót giường, tranh tụng.",
        ngoaitru: "Ngày Dần Sao Tâm Đăng Viên, có thể dùng các việc nhỏ."
    },
    "Vĩ": {
        name: "Sao Vĩ (Vĩ Hoả Hổ) - Con Cọp",
        rating: "Tốt (Kiết)",
        nghi: "Mọi việc đều tốt, tốt nhất là các vụ khởi tạo, chôn cất, cưới gã, xây cất, trổ cửa, đào ao giếng, khai mương rạch, các vụ thủy lợi, khai trương, chặt cỏ phá đất.",
        ky: "Đóng giường, lót giường, đi thuyền.",
        ngoaitru: "Tại Hợi, Mẹo, Mùi Kỵ chôn cất. Tại Mùi là vị trí Hãm Địa của Sao Vỹ. Tại Kỷ Mẹo rất Hung, còn các ngày Mẹo khác có thể tạm dùng được."
    },
    "Cơ": {
        name: "Sao Cơ (Cơ Thuỷ Báo) - Con Beo",
        rating: "Tốt (Kiết)",
        nghi: "Khởi tạo trăm việc đều tốt, tốt nhất là chôn cất, tu bổ mồ mã, trổ cửa, khai trương, xuất hành, các vụ thủy lợi ( như tháo nước, đào kinh, khai thông mương rảnh...).",
        ky: "Đóng giường, lót giường, đi thuyền.",
        ngoaitru: "Tại Thân, Tý, Thìn trăm việc kỵ, duy tại Tý có thể tạm dùng. Ngày Thìn Sao Cơ Đăng Viên lẽ ra rất tốt nhưng lại phạm Phục Đoạn. Phạm Phục Đoạn thì kỵ chôn cất, xuất hành, các vụ thừa kế, chia lãnh gia tài, khởi công làm lò nhuộm lò gốm ; NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại."
    },
    "Đẩu": {
        name: "Sao Đẩu (Đẩu Mộc Giải) - Con Cua",
        rating: "Tốt (Kiết)",
        nghi: "Khởi tạo trăm việc đều tốt, tốt nhất là xây đắp hay sửa chữa phần mộ, trổ cửa, tháo nước, các vụ thủy lợi, chặt cỏ phá đất, may cắt áo mão, kinh doanh, giao dịch, mưu cầu công danh.",
        ky: "Rất kỵ đi thuyền. Con mới sanh đặt tên nó là Đẩu, Giải, Trại hoặc lấy tên Sao của năm hay tháng hiện tại mà đặt tên cho nó dễ nuôi.",
        ngoaitru: "Tại Tị mất sức. Tại Dậu tốt. Ngày Sửu Đăng Viên rất tốt nhưng lại phạm Phục Đoạn. Phạm Phục Đoạn thì kỵ chôn cất, xuất hành, thừa kế, chia lãnh gia tài, khởi công làm lò nhuộm lò gốm ; NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại."
    },
    "Ngưu": {
        name: "Sao Ngưu (Ngưu Kim Ngưu) - Con Trâu",
        rating: "Xấu (Hung)",
        nghi: "Đi thuyền, cắt may áo mão.",
        ky: "Khởi công tạo tác việc chi cũng hung hại. Nhất là xây cất nhà, dựng trại, cưới gã, trổ cửa, làm thủy lợi, nuôi tằm, gieo cấy, khai khẩn, khai trương, xuất hành đường bộ. Sao Ngưu là 1 trong Thất sát Tinh, sanh con khó nuôi, nên lấy tên Sao của năm, tháng hay ngày mà đặt tên cho trẻ và làm việc Âm Đức ngay trong tháng sanh nó mới mong nuôi khôn lớn được.",
        ngoaitru: "Ngày Ngọ Đăng Viên rất tốt. Ngày Tuất yên lành. Ngày Dần là Tuyệt Nhật, chớ động tác việc chi, riêng ngày Nhâm Dần dùng được. Trúng ngày 14 ÂL là Diệt Một Sát, cử: làm rượu, lập lò nhuộm lò gốm, vào làm hành chánh, thừa kế sự nghiệp, kỵ nhất là đi thuyền chẳng khỏi rủi ro."
    },
    "Nữ": {
        name: "Sao Nữ (Nữ Thổ Bức) - Con Dơi",
        rating: "Xấu (Hung)",
        nghi: "Kết màn, may áo.",
        ky: "Khởi công tạo tác trăm việc đều có hại, hung hại nhất là trổ cửa, khơi đường tháo nước, chôn cất, đầu đơn kiện cáo.",
        ngoaitru: "Tại Hợi Mẹo Mùi đều gọi là đường cùng. Ngày Quý Hợi cùng cực đúng mức vì là ngày chót của 60 Hoa giáp. Ngày Hợi tuy Sao Nữ Đăng Viên song cũng chẳng nên dùng. Ngày Mẹo là Phục Đoạn Sát, rất kỵ chôn cất, xuất hành, thừa kế sự nghiệp, chia lãnh gia tài, khởi công làm lò nhuộm lò gốm ; NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại."
    },
    "Hư": {
        name: "Sao Hư (Hư Nhựt Thử) - Con Chuột",
        rating: "Xấu (Hung)",
        nghi: "Hư có nghĩa là hư hoại, không có việc chi hợp với Sao Hư.",
        ky: "Khởi công tạo tác trăm việc đều không may, thứ nhất là xây cất nhà cửa, cưới gã, khai trương, trổ cửa, tháo nước, đào kinh rạch.",
        ngoaitru: "Gặp Thân, Tý, Thìn đều tốt, tại Thìn Đắc Địa tốt hơn hết. Hạp với 6 ngày Giáp Tý, Canh Tý, Mậu Thân, Canh Thân, Bính Thìn, Mậu Thìn có thể động sự. Trừ ngày Mậu Thìn ra, còn 5 ngày kia kỵ chôn cất. Gặp ngày Tý thì Sao Hư Đăng Viên rất tốt, nhưng lại phạm Phục Đoạn Sát: Kỵ chôn cất, xuất hành, thừa kế, chia lãnh gia tài sự nghiệp, khởi công làm lò nhuộm lò gốm, NHƯNg nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại. Gặp Huyền Nhật là những ngày 7, 8, 22, 23 ÂL thì Sao Hư phạm Diệt Một: Cử làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, thừa kế, thứ nhất là đi thuyền ắt chẳng khỏi rủi ro."
    },
    "Nguy": {
        name: "Sao Nguy (Nguy Nguyệt Yến) - Con Chim Én",
        rating: "Xấu (Hung)",
        nghi: "Chôn cất rất tốt, lót giường bình yên.",
        ky: "Dựng nhà, trổ cửa, gác đòn đông, tháo nước, đào mương rạch, đi thuyền.",
        ngoaitru: "Tại Tị, Dậu, Sửu trăm việc đều tốt, tại Dậu tốt nhất. Ngày Sửu Sao Nguy Đăng Viên: tạo tác sự việc được quý hiển."
    },
    "Thất": {
        name: "Sao Thất (Thất Hoả Trư) - Con Heo",
        rating: "Xấu (Hung)",
        nghi: "Khởi công trăm việc đều tốt. Tốt nhất là xây cất nhà cửa, cưới gã, chôn cất, trổ cửa, tháo nước, các việc thủy lợi, đi thuyền, chặt cỏ phá đất.",
        ky: "Sao thất Đại Kiết không có việc chi phải cử.",
        ngoaitru: "Tại Dần, Ngọ, Tuất nói chung đều tốt, ngày Ngọ Đăng viên rất hiển đạt. Ba ngày Bính Dần, Nhâm Dần, Giáp Ngọ rất nên xây dựng và chôn cất, song những ngày Dần khác không tốt. Vì sao Thất gặp ngày Dần là phạm Phục Đoạn Sát (kiêng cữ như trên)."
    },
    "Bích": {
        name: "Sao Bích (Bích Thuỷ Du) - Con Rái Cá",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác việc chi cũng tốt. Tốt nhất là xây cất nhà, cưới gã, chôn cất, trổ cửa, dựng cửa, tháo nước, các vụ thuỷ lợi, chặt cỏ phá đất, cắt áo thêu áo, khai trương, xuất hành, làm việc thiện ắt Thiện quả tới mau hơn.",
        ky: "Sao Bích toàn kiết, không có việc chi phải kiêng cử.",
        ngoaitru: "Tại Hợi Mẹo Mùi trăm việc kỵ, thứ nhất trong Mùa Đông. Riêng ngày Hợi Sao Bích Đăng Viên nhưng phạm Phục Đọan Sát ( Kiêng cữ như trên )."
    },
    "Khuê": {
        name: "Sao Khuê (Khuê Mộc Lang) - Con Chó Sói",
        rating: "Xấu (Hung)",
        nghi: "Tạo dựng nhà phòng, nhập học, ra đi cầu công danh, cắt áo.",
        ky: "Chôn cất, khai trương, trổ cửa dựng cửa, khai thông đường nước, đào ao móc giếng, thưa kiện, đóng giường lót giường. Sao Khuê là 1 trong Thất Sát Tinh, nếu đẻ con nhằm ngày này thì nên lấy tên Sao Khuê hay lấy tên Sao của năm tháng mà đặt cho trẻ dễ nuôi.",
        ngoaitru: "Sao Khuê Hãm Địa tại Thân: Văn Khoa thất bại. Tại Ngọ là chỗ Tuyệt gặp Sanh, mưu sự đắc lợi, thứ nhất gặp Canh Ngọ. Tại Thìn tốt vừa vừa. Ngày Thân Sao Khuê Đăng Viên: Tiến thân danh."
    },
    "Lâu": {
        name: "Sao Lâu (Lâu Kim Cẩu) - Con Chó",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công mọi việc đều tốt. Tốt nhất là dựng cột, cất lầu, làm dàn gác, cưới gã, trổ cửa dựng cửa, tháo nước hay các vụ thủy lợi, cắt áo.",
        ky: "Đóng giường, lót giường, đi đường thủy.",
        ngoaitru: "Tại Ngày Dậu Đăng Viên : Tạo tác đại lợi. Tại Tị gọi là Nhập Trù rất tốt. Tại Sửu tốt vừa vừa. Gặp ngày cuối tháng thì Sao Lâu phạm Diệt Một: rất kỵ đi thuyền, cữ làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, thừa kế sự nghiệp."
    },
    "Vị": {
        name: "Sao Vị (Vị Thổ Trĩ) - Con Chim Trĩ",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác việc chi cũng lợi. Tốt nhất là xây cất, cưới gã, chôn cất, chặt cỏ phá đất, gieo trồng, lấy giống.",
        ky: "Đi thuyền.",
        ngoaitru: "Sao Vị mất chí khí tại Dần, thứ nhất tại Mậu Dần, rất là Hung, chẳng nên cưới gã, xây cất nhà cửa. Tại Tuất Sao Vị Đăng Viên nên mưu cầu công danh, nhưng cũng phạm Phục Đoạn ( kiêng cữ như các mục trên )."
    },
    "Mão": {
        name: "Sao Mão (Mão Nhựt Kê) - Con Gà",
        rating: "Tốt (Kiết)",
        nghi: "Xây dựng, tạo tác.",
        ky: "Chôn Cất ( ĐẠI KỴ ), cưới gã, trổ cửa dựng cửa, khai ngòi phóng thủy, khai trương, xuất hành, đóng giường lót giường. Các việc khác cũng không hay.",
        ngoaitru: "Tại Mùi mất chí khí. Tại Ất Mẹo và Đinh Mẹo tốt, Ngày Mẹo Đăng Viên cưới gã tốt, nhưng ngày Quý Mẹo tạo tác mất tiền của. Hạp với 8 ngày: Ất Mẹo, Đinh Mẹo, Tân Mẹo, Ất Mùi, Đinh Mùi, Tân Mùi, Ất Hợi, Tân Hợi."
    },
    "Tất": {
        name: "Sao Tất (Tất Nguyệt Ô) - Con Quạ",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác việc chi cũng tốt. Tốt nhất là chôn cất, cưới gã, trổ cửa dựng cửa, đào kinh, tháo nước, khai mương, móc giếng, chặt cỏ phá đất. Những việc khác cũng tốt như làm ruộng, nuôi tằm, khai trương, xuất hành, nhập học.",
        ky: "Đi thuyền.",
        ngoaitru: "Tại Thân, Tý, Thìn đều tốt. Tại Thân hiệu là Nguyệt Quải Khôn Sơn, trăng treo đầu núi Tây Nam, rất là tốt. Lại thên Sao tất Đăng Viên ở ngày Thân, cưới gã và chôn cất là 2 điều ĐẠI KIẾT."
    },
    "Chủy": {
        name: "Sao Chủy (Chuỷ Hoả Hầu) - Con Khỉ",
        rating: "Xấu (Hung)",
        nghi: "Không có sự việc chi hợp với Sao Chủy.",
        ky: "Khởi công tạo tác việc chi cũng không tốt. KỴ NHẤT là chôn cất và các vụ thuộc về chết chôn như sửa đắp mồ mả, làm sanh phần (làm mồ mã để sẵn), đóng thọ đường (đóng hòm để sẵn).",
        ngoaitru: "Tại tị bị đoạt khí, Hung càng thêm hung. Tại dậu rất tốt, vì Sao Chủy Đăng Viên ở Dậu, khởi động thăng tiến. Nhưng cũng phạm Phục Đoạn Sát. Tại Sửu là Đắc Địa, ắt nên. Rất hợp với ngày Đinh sửu và Tân Sửu, tạo tác Đại Lợi, chôn cất Phú Quý song toàn."
    },
    "Sâm": {
        name: "Sao Sâm (Sâm Thuỷ Viên) - Con Vượn",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác nhiều việc tốt như : xây cất nhà, dựng cửa trổ cửa, nhập học, đi thuyền, làm thủy lợi, tháo nước đào mương.",
        ky: "Cưới gã, chôn cất, đóng giường lót giường, kết bạn.",
        ngoaitru: "Ngày Tuất Sao sâm Đăng Viên, nên phó nhậm, cầu công danh hiển hách."
    },
    "Tỉnh": {
        name: "Sao Tĩnh (Tĩnh Mộc Cang) - Con Chim Cú",
        rating: "Tốt (Kiết)",
        nghi: "Tạo tác nhiều việc tốt như xây cất, trổ cửa dựng cửa, mở thông đường nước, đào mương móc giếng, nhậm chức, nhập học, đi thuyền.",
        ky: "Chôn cất, tu bổ phần mộ, làm sanh phần, đóng thọ đường.",
        ngoaitru: "Tại Hợi, Mẹo, Mùi trăm việc tốt. Tại Mùi là Nhập Miếu, khởi động vinh quang."
    },
    "Quỷ": {
        name: "Sao Quỷ (Quỷ Kim Dương) - Con Dê",
        rating: "Xấu (Hung)",
        nghi: "Chôn cất, chặt cỏ phá đất, cắt áo.",
        ky: "Khởi tạo việc chi cũng hại. Hại nhất là xây cất nhà, cưới gã, trổ cửa dựng cửa, tháo nước, đào ao giếng, động đất, xây tường, dựng cột.",
        ngoaitru: "Ngày Tý Đăng Viên thừa kế tước phong tốt, phó nhiệm may mắn. Ngày Thân là Phục Đoạn Sát kỵ chôn cất, xuất hành, thừa kế, chia lãnh gia tài, khởi công lập lò gốm lò nhuộm; NHƯNG nên dứt vú trẻ em, xây tường, lấp hang lỗ, làm cầu tiêu, kết dứt điều hung hại. Nhằm ngày 16 ÂL là ngày Diệt Một kỵ làm rượu, lập lò gốm lò nhuộm, vào làm hành chánh, kỵ nhất đi thuyền."
    },
    "Liễu": {
        name: "Sao Liễu (Liễu Thổ Chướng) - Con Gấu Ngựa",
        rating: "Xấu (Hung)",
        nghi: "Không có việc chi hạp với Sao Liễu.",
        ky: "Khởi công tạo tác việc chi cũng hung hại. Hung hại nhất là chôn cất, xây đắp, trổ cửa dựng cửa, tháo nước, đào ao lũy, làm thủy lợi.",
        ngoaitru: "Tại Ngọ trăm việc tốt. Tại Tị Đăng Viên: thừa kế và lên quan lãnh chức là 2 điều tốt nhất. Tại Dần, Tuất rất kỵ xây cất và chôn cất : Rất suy vi."
    },
    "Tinh": {
        name: "Sao Tinh (Tinh Nhựt Mã) - Con Ngựa",
        rating: "Xấu (Hung)",
        nghi: "Xây dựng phòng mới.",
        ky: "Chôn cất, cưới gã, mở thông đường nước. Sao Tinh là 1 trong Thất Sát Tinh, nếu sanh con nhằm ngày này nên lấy tên Sao đặt tên cho trẻ để dễ nuôi, có thể lấy tên sao của năm, hay sao của tháng cũng được.",
        ngoaitru: "Tại Dần Ngọ Tuất đều tốt, tại Ngọ là Nhập Miếu, tạo tác được tôn trọng. Tại Thân là Đăng Giá ( lên xe ): xây cất tốt mà chôn cất nguy. Hạp với 7 ngày: Giáp Dần, Nhâm Dần, Giáp Ngọ, Bính Ngọ, Mậu Ngọ, Bính Tuất, Canh Tuất."
    },
    "Trương": {
        name: "Sao Trương (Trương Nguyệt Lộc) - Con Nai",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác trăm việc tốt, tốt nhất là xây cất nhà, che mái dựng hiên, trổ cửa dựng cửa, cưới gã, chôn cất, làm ruộng, nuôi tằm, đặt táng kê gác, chặt cỏ phá đất, cắt áo, làm thuỷ lợi.",
        ky: "Sửa hoặc làm thuyền chèo, đẩy thuyền mới xuống nước.",
        ngoaitru: "Tại Hợi, Mẹo, Mùi đều tốt. Tại Mùi Đăng viên rất tốt nhưng phạm Phục Đoạn."
    },
    "Dực": {
        name: "Sao Dực (Dực Hoả Xà) - Con Rắn",
        rating: "Xấu (Hung)",
        nghi: "Cắt áo sẽ đước tiền tài.",
        ky: "Chôn cất, cưới gã, xây cất nhà, đặt táng kê gác, gác đòn dông, trổ cửa gắn cửa, các vụ thủy lợi.",
        ngoaitru: "Tại Thân, Tý, Thìn mọi việc tốt. Tại Thìn Vượng Địa tốt hơn hết. Tại Tý Đăng Viên nên thừa kế sự nghiệp, lên quan lãnh chức."
    },
    "Chẩn": {
        name: "Sao Chẩn (Chẩn Thuỷ Dẫn) - Con Trùng",
        rating: "Tốt (Kiết)",
        nghi: "Khởi công tạo tác mọi việc tốt lành, tốt nhất là xây cất lầu gác, chôn cất, cưới gã. Các việc khác cũng tốt như dựng phòng, cất trại, xuất hành, chặt cỏ phá đất.",
        ky: "Đi thuyền.",
        ngoaitru: "Tại Tị Dậu Sửu đều tốt. Tại Sửu Vượng Địa, tạo tác thịnh vượng. Tại Tị Đăng Viên là ngôi tôn đại, mưu động ắt thành danh."
    }
};

const DONG_CONG_DATA = {
    "Giáp Tý": {
        "KHAI": { "rating": "XẤU", "text": "Ngày Giáp Tý là kim tự chết, ngày ngũ hành âm kị" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "Giáp Tý là kim tự tử, ngũ hành vô khí, Hai ngày Giáp Tý, Nhâm Tý là thấy ngay tiêu sách (xơ xác cô đơn), tổn phá." },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "Giáp Tý cũng có Hỏa tinh, nhưng là Bắc phương Hắc sát chi khí" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "Giáp Tý là Thiên xá, không phải là Chuyển Sát, dùng cái đó không hại" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" }
    },
    "Bính Tý": {
        "KHAI": { "rating": "TỐT", "text": "duy thủy thổ sinh người, dùng cái đó rất tốt, trong có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân, tàng tài trữ, liên châu, chúng tinh che, chiếu. Trong vòng 60 ngày, 120 ngày được rất nhiều của, quý nhân tiếp dẫn, giữ chức lộc, mưu việc thì nhiều may mắn, vượng lục súc, thêm tài sản, cũng nên an táng." },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "TỐT", "text": "Bính Tý, Mậu Tý, khởi tạo, hôn nhân, hưng công, động thổ, xuất hành, khai trương, di đồ thì sẽ tiến nhân khẩu, thêm con cháu, vượng điền, tàm (tằm), tăng tài sản, làm lớn thì phát lớn, làm nhỏ thì phát nhỏ" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Bính Tý, Canh Tý lợi cho khởi tạo, hưng công, động thổ, làm kho chứa, nhập trạch, di đồ, khai trương, xuất hành" },
        "ĐỊNH": { "rating": "TỐT", "text": "Bính Tý là lúc nước sạch sẽ, lại gặp vượng địa, trực Hoàng la, Tử đàn tinh, che, chiếu, nên tu tạo, an táng, gặp gỡ người Thân, khai trương, xuất hành, nhập trạch, hưng công, động thổ, rất tốt" },
        "BÌNH": { "rating": "TỐT", "text": "Bính Tý là khi nước trong sạch (khiết tinh). Canh Tý là hỏa tinh dựa vào Thiên đức, Nguyệt đức, và Mậu Tý nữa là ba ngày lợi cho khởi tạo, giá thú, nhập trạch, xuất hành, động thổ, dùng ngày đó rất tốt" },
        "MÃN": { "rating": "TỐT", "text": "Bính Tý là lúc nước trong sạch, kiêm có Thiên đức, Nguyệt đức, Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Tầng tiêu Liên châu (chuỗi nhọc trên tầng không), Lộc mã, là mọi sao tốt che, chiếu, nên hôn nhân, giá thú, khai trương, xuất hành, nhập trạch, hưng công, động thổ, đặt móng, buộc giàn, an táng, thêm nhà cửa, lợi con cháu, vượng điền sản, tiến lục súc, tăng hoành tài, trong vòng 60 ngày, 120 ngày sẽ thấy nghiệm" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" }
    },
    "Mậu Tý": {
        "KHAI": { "rating": "TỐT", "text": "duy thủy thổ sinh người, dùng cái đó rất tốt, trong có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân, tàng tài trữ, liên châu, chúng tinh che, chiếu. Trong vòng 60 ngày, 120 ngày được rất nhiều của, quý nhân tiếp dẫn, giữ chức lộc, mưu việc thì nhiều may mắn, vượng lục súc, thêm tài sản, cũng nên an táng." },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "TỐT", "text": "Bính Tý, Mậu Tý, khởi tạo, hôn nhân, hưng công, động thổ, xuất hành, khai trương, di đồ thì sẽ tiến nhân khẩu, thêm con cháu, vượng điền, tàm (tằm), tăng tài sản, làm lớn thì phát lớn, làm nhỏ thì phát nhỏ" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "Mậu Tý là tốt vừa" },
        "ĐỊNH": { "rating": "TỐT", "text": "" },
        "BÌNH": { "rating": "TỐT", "text": "Bính Tý là khi nước trong sạch (khiết tinh). Canh Tý là hỏa tinh dựa vào Thiên đức, Nguyệt đức, và Mậu Tý nữa là ba ngày lợi cho khởi tạo, giá thú, nhập trạch, xuất hành, động thổ, dùng ngày đó rất tốt" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" }
    },
    "Canh Tý": {
        "KHAI": { "rating": "TỐT", "text": "duy thủy thổ sinh người, dùng cái đó rất tốt, trong có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân, tàng tài trữ, liên châu, chúng tinh che, chiếu. Trong vòng 60 ngày, 120 ngày được rất nhiều của, quý nhân tiếp dẫn, giữ chức lộc, mưu việc thì nhiều may mắn, vượng lục súc, thêm tài sản, cũng nên an táng." },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "TỐT", "text": "Canh Tý là Nguyệt đức" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Bính Tý, Canh Tý lợi cho khởi tạo, hưng công, động thổ, làm kho chứa, nhập trạch, di đồ, khai trương, xuất hành" },
        "ĐỊNH": { "rating": "TỐT", "text": "" },
        "BÌNH": { "rating": "TỐT", "text": "Bính Tý là khi nước trong sạch (khiết tinh). Canh Tý là hỏa tinh dựa vào Thiên đức, Nguyệt đức, và Mậu Tý nữa là ba ngày lợi cho khởi tạo, giá thú, nhập trạch, xuất hành, động thổ, dùng ngày đó rất tốt" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" }
    },
    "Nhâm Tý": {
        "KHAI": { "rating": "XẤU", "text": "Nhâm Tý là mộc đả bảo bình chung (gỗ đánh vào bình quí cuối cùng), là phương Bắc, nơi tắm gội (mộc dục), không nên khởi tạo, hôn nhân, nhập trạch, khai trương" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "Nhâm Tý là mộc đả bảo bình, nơi mà phương Bắc tắm gội, phúc lực mỏng, lại là Sát tứ phế, dùng cái đó tổn nhân khẩu, chủ lãnh thoái, rất xấu" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "Nhâm Tý là lúc thảo mộc điêu linh (tàn hại), ngũ hành không có khí, không thể dùng" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" }
    },
    "Ất Sửu": {
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "BÌNH", "text": "Tân Sửu, Quý Sửu, Ất Sửu, Đinh Sửu là tốt vừa" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "TỐT", "text": "Ất Sửu là quê hương kim mộ, nên tụ họp với cha mẹ, khởi tạo, xuất hành, khai trương, động thổ, phạt mộc, khai sơn, có cát tinh che, chiếu, chủ quý nhân tiếp dẫn, mưu vọng toại ý" },
        "KIẾN": { "rating": "BÌNH", "text": "Ất Sửu, Kỷ Sửu, nên khai sơn, phạt cỏ, hưng công, động thổ, giá thú, khai trương, xuất hành, nhập trạch, là ngày tốt vừa" }
    },
    "Đinh Sửu": {
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "BÌNH", "text": "Tân Sửu, Quý Sửu, Ất Sửu, Đinh Sửu là tốt vừa" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" }
    },
    "Kỷ Sửu": {
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "" },
        "KIẾN": { "rating": "BÌNH", "text": "Ất Sửu, Kỷ Sửu, nên khai sơn, phạt cỏ, hưng công, động thổ, giá thú, khai trương, xuất hành, nhập trạch, là ngày tốt vừa" }
    },
    "Tân Sửu": {
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "BÌNH", "text": "Tân Sửu, Quý Sửu, Ất Sửu, Đinh Sửu là tốt vừa" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" }
    },
    "Quý Sửu": {
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "BÌNH", "text": "Tân Sửu, Quý Sửu, Ất Sửu, Đinh Sửu là tốt vừa" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" }
    },
    "Bính Dần": {
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Hoàng sa, thiên hỉ. Bính Dần là Thiên đức, Nguyệt đức" },
        "NGUY": { "rating": "BÌNH", "text": "Các ngày Dần còn lại tốt vừa" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Bính Dần là Thiên đức, Nguyệt đức. Canh Dần, Mậu Dần có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, mọi sao tốt che, chiếu, nên khởi tạo, giá thú, xuất hành, nhập trạch, khai trương, nhất thiết mọi việc, chủ về tiến của, sinh quý tử, hưng gia đạo, vượng lục súc, rất tốt" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "BÌNH", "text": "" },
        "TRỪ": { "rating": "TỐT", "text": "Canh Dần là Hỏa tinh, Thiên đức, Nguyệt đức. Giáp Dần, Bính Dần, Nhâm Dần, đều có Hỏa tinh, và Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Bảo liễu (xe Ngọc quý), Khố châu phúc lộc, Văn Xương, Lộc mã quan ích là những sao tốt chiếu lâm, nên khởi tạo, hôn nhân, an táng, nhập trạch, khai trương, xuất hành, trăm việc thuận lợi, dùng ngày đó gia môn phát đạt, động thổ thấy tiến tài sản, tên là \"Đăng hổ bảng\"" }
    },
    "Mậu Dần": {
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "BÌNH", "text": "Mậu Dần là Thiên xá, dùng ngày đó lại tốt" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Canh Dần, Mậu Dần, Giáp Dần có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân khố lâu, Ngọc đường bảo tàng, là những cát tinh cùng chiếu, hưng công, động thổ, định tảng, buộc giàn, nhập trạch, khai trương, trong vòng 60 ngày, 120 ngày sẽ thêm của, tăng, nhà cửa từ đó giầu thịnh, đường đời thấy an khang, rất tốt" },
        "NGUY": { "rating": "BÌNH", "text": "Các ngày Dần còn lại tốt vừa" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Bính Dần là Thiên đức, Nguyệt đức. Canh Dần, Mậu Dần có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, mọi sao tốt che, chiếu, nên khởi tạo, giá thú, xuất hành, nhập trạch, khai trương, nhất thiết mọi việc, chủ về tiến của, sinh quý tử, hưng gia đạo, vượng lục súc, rất tốt" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "TỐT", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "Mậu Dần cũng có Hỏa tinh nhưng là tốt vừa, ngày đó có thể dùng" }
    },
    "Canh Dần": {
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Canh Dần, Mậu Dần, Giáp Dần có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân khố lâu, Ngọc đường bảo tàng, là những cát tinh cùng chiếu, hưng công, động thổ, định tảng, buộc giàn, nhập trạch, khai trương, trong vòng 60 ngày, 120 ngày sẽ thêm của, tăng, nhà cửa từ đó giầu thịnh, đường đời thấy an khang, rất tốt" },
        "NGUY": { "rating": "BÌNH", "text": "Các ngày Dần còn lại tốt vừa" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Canh Dần là Thiên đức, Nguyệt đức, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân bảo tàng, Điền đường khố, Châu tụ, Lộc đới mã loan, và Cung Diệu chúng cát tinh chiếu lâm, nên khởi tạo, hôn nhân, động thổ, di cư, khai trương, xuất hành, vượng điền sản, tiến hoành tài, tăng lục súc, thêm nhân khẩu, và con cháu cải đổi nhà, sân, gia đạo hưng thịnh" },
        "ĐỊNH": { "rating": "TỐT", "text": "Bính Dần là Thiên đức, Nguyệt đức. Canh Dần, Mậu Dần có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, mọi sao tốt che, chiếu, nên khởi tạo, giá thú, xuất hành, nhập trạch, khai trương, nhất thiết mọi việc, chủ về tiến của, sinh quý tử, hưng gia đạo, vượng lục súc, rất tốt" },
        "BÌNH": { "rating": "BÌNH", "text": "" },
        "MÃN": { "rating": "BÌNH", "text": "" },
        "TRỪ": { "rating": "TỐT", "text": "Canh Dần là Hỏa tinh, Thiên đức, Nguyệt đức. Giáp Dần, Bính Dần, Nhâm Dần, đều có Hỏa tinh, và Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Bảo liễu (xe Ngọc quý), Khố châu phúc lộc, Văn Xương, Lộc mã quan ích là những sao tốt chiếu lâm, nên khởi tạo, hôn nhân, an táng, nhập trạch, khai trương, xuất hành, trăm việc thuận lợi, dùng ngày đó gia môn phát đạt, động thổ thấy tiến tài sản, tên là \"Đăng hổ bảng\"" }
    },
    "Nhâm Dần": {
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "BÌNH", "text": "Nhâm Dần có Thiên đức, Nguyệt đức, chỉ nên mai táng và ghép ván làm sinh cơ, dùng cái đó thêm con cháu, tiến điền địa, thăng quan chức, tốt trên hết" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "Nhâm Dần của tháng tuy có sao tốt chiếu ở trong giữa, chỉ có Sát tinh tương khắc mà thành tốt vừa" },
        "NGUY": { "rating": "BÌNH", "text": "Các ngày Dần còn lại tốt vừa" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "BÌNH", "text": "" },
        "MÃN": { "rating": "TỐT", "text": "" },
        "TRỪ": { "rating": "TỐT", "text": "Canh Dần là Hỏa tinh, Thiên đức, Nguyệt đức. Giáp Dần, Bính Dần, Nhâm Dần, đều có Hỏa tinh, và Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Bảo liễu (xe Ngọc quý), Khố châu phúc lộc, Văn Xương, Lộc mã quan ích là những sao tốt chiếu lâm, nên khởi tạo, hôn nhân, an táng, nhập trạch, khai trương, xuất hành, trăm việc thuận lợi, dùng ngày đó gia môn phát đạt, động thổ thấy tiến tài sản, tên là \"Đăng hổ bảng\"" }
    },
    "Giáp Dần": {
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Canh Dần, Mậu Dần, Giáp Dần có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân khố lâu, Ngọc đường bảo tàng, là những cát tinh cùng chiếu, hưng công, động thổ, định tảng, buộc giàn, nhập trạch, khai trương, trong vòng 60 ngày, 120 ngày sẽ thêm của, tăng, nhà cửa từ đó giầu thịnh, đường đời thấy an khang, rất tốt" },
        "NGUY": { "rating": "TỐT", "text": "Giáp Dần Thiên đức, Nguyệt đức, Hoàng la, Tử đàn, Kim ngân khố lâu, Lộc bảo lâu, ích đế ngự tinh, che, chiếu, nhưng không lợi cho đi xa, định, tạo, nhập trạch, hôn nhân, cớ là Quỷ thần hung trạch chi ngưng, nếu khai sơn, mai táng, mưu trù trăm việc, trong vòng 60 ngày, 120 ngày sinh quý tử, gia nghiệp hưng vượng, có quý nhân tiếp dẫn, tiến sản nghiệp, rất tốt" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "TỐT", "text": "Giáp Dần là tốt trên hết" },
        "MÃN": { "rating": "BÌNH", "text": "" },
        "TRỪ": { "rating": "TỐT", "text": "Canh Dần là Hỏa tinh, Thiên đức, Nguyệt đức. Giáp Dần, Bính Dần, Nhâm Dần, đều có Hỏa tinh, và Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Bảo liễu (xe Ngọc quý), Khố châu phúc lộc, Văn Xương, Lộc mã quan ích là những sao tốt chiếu lâm, nên khởi tạo, hôn nhân, an táng, nhập trạch, khai trương, xuất hành, trăm việc thuận lợi, dùng ngày đó gia môn phát đạt, động thổ thấy tiến tài sản, tên là \"Đăng hổ bảng\"" }
    },
    "Đinh Mão": {
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "BÌNH", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "Các ngày Mão còn lại tốt vừa" },
        "NGUY": { "rating": "TỐT", "text": "Quý Mão, Đinh Mão, có Thiên đức, Hoàng la, Tử đàn, Kim ngân khố lâu, Ngọc đường tụ báu tinh, che, chiếu, nên khởi tạo, hôn nhân, giá thú, hưng công, động thổ, đặt móng, buộc giàn, khai trương, xuất hành, nhập trạch, thượng quan, làm kho chứa, chuồng trại trâu dê, chủ về gia nghiệp xương thịnh, nhân khẩu hưng vượng, sinh quý tử, tiến hoành tài, giàu sang lúa gạo" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" }
    },
    "Kỷ Mão": {
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "BÌNH", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "Các ngày Mão còn lại tốt vừa" },
        "NGUY": { "rating": "BÌNH", "text": "Các ngày Mão còn lại (Kỷ Mão, Tân Mão) là tốt vừa" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Tân Mão, Kỷ Mão có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, mọi sao tốt che, chiếu, nên giá thú, khai trương, xuất hành, nhập trạch, động thổ, sửa mới, khởi tạo, kho chứa, chủ về tiến của cải, tăng nhân khẩu, hưng gia đạo, vượng lục súc, rất tốt" },
        "ĐỊNH": { "rating": "TỐT", "text": "Ất Mão là Thiên đức. Tân Mão, Kỷ Mão nên động thổ, hưng công, định tảng (đặt móng), đặt nóc (thượng lương), giá thú, nhập trạch, xuất hành, khai trương, dùng các ngày đó tốt, có cát diệu chiếu lâm" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" }
    },
    "Tân Mão": {
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "TỐT", "text": "Tân Mão là Thiên đức" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Ất Mão, Tân Mão có Hoàng la, Tử đàn, Loan dữ (xe kiệu) bảo cái, Lộc âm, mã vãng, và Quỳnh Ngọc Kim bảo, Thiên đế tụ bảo, mọi thứ sao tốt chiếu lâm, lợi cho nhập trạch, khai trương, xuất hành, hôn nhân, chủ về thêm con cháu, vượng điền sản, tiến hoành tài, tăng cư ốc (nhà ở), sinh quý tử, rất tốt" },
        "NGUY": { "rating": "BÌNH", "text": "Các ngày Mão còn lại (Kỷ Mão, Tân Mão) là tốt vừa" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Tân Mão, Kỷ Mão có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, mọi sao tốt che, chiếu, nên giá thú, khai trương, xuất hành, nhập trạch, động thổ, sửa mới, khởi tạo, kho chứa, chủ về tiến của cải, tăng nhân khẩu, hưng gia đạo, vượng lục súc, rất tốt" },
        "ĐỊNH": { "rating": "TỐT", "text": "Ất Mão là Thiên đức. Tân Mão, Kỷ Mão nên động thổ, hưng công, định tảng (đặt móng), đặt nóc (thượng lương), giá thú, nhập trạch, xuất hành, khai trương, dùng các ngày đó tốt, có cát diệu chiếu lâm" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" }
    },
    "Quý Mão": {
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "TỐT", "text": "Quý Mão, Ất Mão có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng tinh che, chiếu, xuất hành, hôn giá, tạo tác, khai trương, nhập trạch, mọi việc đều rất tốt, chủ về mưu việc được hanh thông, có quý nhân tiếp dẫn, tiến tài lộc" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "Các ngày Mão còn lại tốt vừa" },
        "NGUY": { "rating": "TỐT", "text": "Quý Mão, Đinh Mão, có Thiên đức, Hoàng la, Tử đàn, Kim ngân khố lâu, Ngọc đường tụ báu tinh, che, chiếu, nên khởi tạo, hôn nhân, giá thú, hưng công, động thổ, đặt móng, buộc giàn, khai trương, xuất hành, nhập trạch, thượng quan, làm kho chứa, chuồng trại trâu dê, chủ về gia nghiệp xương thịnh, nhân khẩu hưng vượng, sinh quý tử, tiến hoành tài, giàu sang lúa gạo" },
        "PHÁ": { "rating": "BÌNH", "text": "Quý Mão, Ất Mão, dùng vào việc thì tốt vừa" },
        "CHẤP": { "rating": "BÌNH", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" }
    },
    "Ất Mão": {
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "TỐT", "text": "Quý Mão, Ất Mão có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng tinh che, chiếu, xuất hành, hôn giá, tạo tác, khai trương, nhập trạch, mọi việc đều rất tốt, chủ về mưu việc được hanh thông, có quý nhân tiếp dẫn, tiến tài lộc" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Ất Mão, Tân Mão có Hoàng la, Tử đàn, Loan dữ (xe kiệu) bảo cái, Lộc âm, mã vãng, và Quỳnh Ngọc Kim bảo, Thiên đế tụ bảo, mọi thứ sao tốt chiếu lâm, lợi cho nhập trạch, khai trương, xuất hành, hôn nhân, chủ về thêm con cháu, vượng điền sản, tiến hoành tài, tăng cư ốc (nhà ở), sinh quý tử, rất tốt" },
        "NGUY": { "rating": "XẤU", "text": "Ất Mão là chính tứ phế, xấu" },
        "PHÁ": { "rating": "BÌNH", "text": "Quý Mão, Ất Mão, dùng vào việc thì tốt vừa" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Ất Mão là Thiên đức. Tân Mão, Kỷ Mão nên động thổ, hưng công, định tảng (đặt móng), đặt nóc (thượng lương), giá thú, nhập trạch, xuất hành, khai trương, dùng các ngày đó tốt, có cát diệu chiếu lâm" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" }
    },
    "Mậu Thìn": {
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "Mậu Thìn, Giáp Thìn là Sát tập trung cung, rất xấu" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "Mậu Thìn là Sát nhập trung cung, rất xấu" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" }
    },
    "Canh Thìn": {
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "TỐT", "text": "Canh Thìn, Nhâm Thìn, có Hoàng la, Tử đàn, là những sao tốt che, chiếu, dùng ngày đó thì điền sản và lục súc hưng vượng, sinh quý tử, trăm việc rất tốt" },
        "THÂU": { "rating": "XẤU", "text": "Canh Thìn làm Đằng sà (rắn biết bay), Chu tước" },
        "THÀNH": { "rating": "BÌNH", "text": "Nhâm Thìn là Nguyệt đức, Canh Thìn, Bính Thìn là ba ngày táng, tốt vừa, không nên dùng vào việc lớn" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "BÌNH", "text": "Canh Thìn là Thiên đức, Nguyệt đức, nên làm nhỏ cũng tốt vừa" }
    },
    "Nhâm Thìn": {
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "TỐT", "text": "Canh Thìn, Nhâm Thìn, có Hoàng la, Tử đàn, là những sao tốt che, chiếu, dùng ngày đó thì điền sản và lục súc hưng vượng, sinh quý tử, trăm việc rất tốt" },
        "THÂU": { "rating": "BÌNH", "text": "Giáp Thìn có Thiên đức, với Bính Thìn và Nhâm Thìn là ba ngày tốt vừa, lợi thâu mới sửa sang, chủ về thêm điền sản, vượng lục súc, cũng nên an táng, mưu trù" },
        "THÀNH": { "rating": "BÌNH", "text": "Nhâm Thìn là Nguyệt đức, Canh Thìn, Bính Thìn là ba ngày táng, tốt vừa, không nên dùng vào việc lớn" },
        "NGUY": { "rating": "TỐT", "text": "Nhâm Thìn là lúc nước trong sạch. Bính Thìn nên phá đất, hưng công, khai trương, xuất hành, nhập trạch, hôn nhân, trăm việc thuận lợi, rất tốt" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "BÌNH", "text": "Nhâm Thìn nên mai táng, cưới vợ, gặp cha mẹ, hưng công, động thổ, xuất hành, nhập trạch là tốt vừa" }
    },
    "Giáp Thìn": {
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "Mậu Thìn, Giáp Thìn là Sát tập trung cung, rất xấu" },
        "THÂU": { "rating": "BÌNH", "text": "Giáp Thìn có Thiên đức, với Bính Thìn và Nhâm Thìn là ba ngày tốt vừa, lợi thâu mới sửa sang, chủ về thêm điền sản, vượng lục súc, cũng nên an táng, mưu trù" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "Giáp Thìn là Thiên đức, Nguyệt đức, chỉ có thể sửa trộm, nếu khởi tạo, hưng công, giá thú, nhập trạch thì không lợi" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" }
    },
    "Bính Thìn": {
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "TỐT", "text": "Bính Thìn có Nguyệt đức" },
        "THÂU": { "rating": "BÌNH", "text": "Giáp Thìn có Thiên đức, với Bính Thìn và Nhâm Thìn là ba ngày tốt vừa, lợi thâu mới sửa sang, chủ về thêm điền sản, vượng lục súc, cũng nên an táng, mưu trù" },
        "THÀNH": { "rating": "BÌNH", "text": "Nhâm Thìn là Nguyệt đức, Canh Thìn, Bính Thìn là ba ngày táng, tốt vừa, không nên dùng vào việc lớn" },
        "NGUY": { "rating": "TỐT", "text": "Nhâm Thìn là lúc nước trong sạch. Bính Thìn nên phá đất, hưng công, khai trương, xuất hành, nhập trạch, hôn nhân, trăm việc thuận lợi, rất tốt" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "Bính Thìn có thể mở núi, phạt cỏ, an táng là tốt vừa" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" }
    },
    "Kỷ Tị": {
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "Kỷ Tị tạo tác, nhập trạch, cũng tốt. Nếu mai táng thì phạm trùng tang bất lợi dụng" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Ất Tị, Kỷ Tị, có Tử đàn, Đới lộc, Dịch mã, tập tụ ở Khúc đường, mọi sao che, chiếu, nên hôn nhân, nhập trạch, hưng công, động thổ, khai trương, xuất hành, khởi tạo kho chứa, chuồng dê ngựa, đều rất tốt, trăm việc thuận lợi" },
        "NGUY": { "rating": "BÌNH", "text": "chỉ nên làm việc nhỏ thì có thể dùng, không lợi cho hôn nhân, chuyển chỗ ở, khai trương, xuất hành, phạm cái đó xấu, bại" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Ất Tị, Quý Tị, Kỷ Tị, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng là những sao che, chiếu, nên an táng, đặt cửa, hưng công, động thổ, giá thú, nhập trạch, xuất hành, khai trương, mưu trù làm mọi việc dùng ngày đó thêm nhân khẩu, vượng gia đạo, sinh quý tử, tăng điền địa, rất tốt" },
        "ĐỊNH": { "rating": "XẤU", "text": "" }
    },
    "Tân Tị": {
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "Tân Tị tuy có hỏa tinh, ngược lại có Xương quỷ (quỷ cuồng vọng), bại vong, lại là ngày thập ác phạt, không nên dùng" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "TỐT", "text": "Ất Tị, Tân Tị có Hoàng la, Tử đàn, che, chiếu, hưng công, tạo tác, động thổ, tu tạo đường trì, thương khố (làm hoặc sửa đường, ao, kho chứa), chuồng trại trâu, dê, hôn nhân, khai trương, xuất hành, nhiều ích lợi, nhà cửa, con cháu Xương (vượng) thịnh, điền sản bội thu, nhân khẩu an khang, rất tốt" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "tốt vừa" },
        "NGUY": { "rating": "BÌNH", "text": "chỉ nên làm việc nhỏ thì có thể dùng, không lợi cho hôn nhân, chuyển chỗ ở, khai trương, xuất hành, phạm cái đó xấu, bại" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" }
    },
    "Quý Tị": {
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "Quý Tị, Thiên thượng Không vong, lại phạm thổ quỷ cũng không nên dùng" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "BÌNH", "text": "Chỉ nên Ất Tị, Quý Tị thì hưng công, động thổ, nhập trạch, khai trương, là tốt vừa" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "tốt vừa" },
        "NGUY": { "rating": "BÌNH", "text": "chỉ nên làm việc nhỏ thì có thể dùng, không lợi cho hôn nhân, chuyển chỗ ở, khai trương, xuất hành, phạm cái đó xấu, bại" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Ất Tị, Quý Tị, Kỷ Tị, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng là những sao che, chiếu, nên an táng, đặt cửa, hưng công, động thổ, giá thú, nhập trạch, xuất hành, khai trương, mưu trù làm mọi việc dùng ngày đó thêm nhân khẩu, vượng gia đạo, sinh quý tử, tăng điền địa, rất tốt" },
        "ĐỊNH": { "rating": "XẤU", "text": "" }
    },
    "Ất Tị": {
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "Ất Tị có 10 thứ ác xấu" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "TỐT", "text": "Ất Tị, Tân Tị có Hoàng la, Tử đàn, che, chiếu, hưng công, tạo tác, động thổ, tu tạo đường trì, thương khố (làm hoặc sửa đường, ao, kho chứa), chuồng trại trâu, dê, hôn nhân, khai trương, xuất hành, nhiều ích lợi, nhà cửa, con cháu Xương (vượng) thịnh, điền sản bội thu, nhân khẩu an khang, rất tốt" },
        "KHAI": { "rating": "BÌNH", "text": "Chỉ nên Ất Tị, Quý Tị thì hưng công, động thổ, nhập trạch, khai trương, là tốt vừa" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Ất Tị, Kỷ Tị, có Tử đàn, Đới lộc, Dịch mã, tập tụ ở Khúc đường, mọi sao che, chiếu, nên hôn nhân, nhập trạch, hưng công, động thổ, khai trương, xuất hành, khởi tạo kho chứa, chuồng dê ngựa, đều rất tốt, trăm việc thuận lợi" },
        "NGUY": { "rating": "TỐT", "text": "Ất Tị nên phạt cỏ, an táng, hưng công, tạo tác, hôn thú, khai trương, nạp thái (nộp lễ vật xin cưới), di cư, xuất hành, nhập trạch, chủ về thêm con cháu, gia đạo hưng thịnh, phát tài, rất tốt" },
        "PHÁ": { "rating": "BÌNH", "text": "Ất Tị có Thiên đức, mưu trù việc nho nhỏ thì có thể dùng, là tốt vừa" },
        "CHẤP": { "rating": "TỐT", "text": "Ất Tị, Quý Tị, Kỷ Tị, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng là những sao che, chiếu, nên an táng, đặt cửa, hưng công, động thổ, giá thú, nhập trạch, xuất hành, khai trương, mưu trù làm mọi việc dùng ngày đó thêm nhân khẩu, vượng gia đạo, sinh quý tử, tăng điền địa, rất tốt" },
        "ĐỊNH": { "rating": "XẤU", "text": "" }
    },
    "Đinh Tị": {
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "TỐT", "text": "Đinh Tị nên tu tạo, nhập trạch, di cư, động thổ, làm đồ dùng, hôn nhân, thì rất tốt" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "tốt vừa" },
        "NGUY": { "rating": "BÌNH", "text": "chỉ nên làm việc nhỏ thì có thể dùng, không lợi cho hôn nhân, chuyển chỗ ở, khai trương, xuất hành, phạm cái đó xấu, bại" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" }
    },
    "Canh Ngọ": {
        "ĐỊNH": { "rating": "RẤT TỐT", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "TỐT", "text": "Canh Ngọ là Nguyệt đức" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "tốt vừa, đều có thể dùng" },
        "NGUY": { "rating": "BÌNH", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Canh Ngọ là Thiên đức, Nguyệt đức, như Canh Ngọ làm Canh sơn Giáp hướng có thể thâu vào nạp âm, huống hồ ngày đó có dùng giờ Canh Thìn, giờ đó gặp tam hợp chiếu Thân, Canh diện Canh lộc, cư Thân, Thìn mã trực Nhâm Thân đó sinh thành lộc mã nhật, sẽ là mã gặp lộc tinh, Thánh nhân nam diện tinh, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân bảo lâu, là những sao tốt che, chiếu, chủ về thêm con cháu, vượng gia môn, tiến điền sản, đạt lộc vị" }
    },
    "Nhâm Ngọ": {
        "ĐỊNH": { "rating": "RẤT TỐT", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "TỐT", "text": "Giáp Ngọ, Nhâm Ngọ có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, các tinh che, chiếu, nên tu tạo, hôn nhân, khai trương, xuất hành, nhập trạch, trong vòng 60 ngày, 120 ngày, tăng điền địa, tiến nhân khẩu, sinh quý tử, rất vượng" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "TỐT", "text": "Nhâm Ngọ, Nguyệt đức, Bính Ngọ, Mậu Ngọ, là ba ngày lợi về gặp cha mẹ (Thân), giá thú tu tạo, mai táng, khai trương, xuất hành, nhập trạch, động thổ, mọi việc đó trong vòng 60 ngày - 120 ngày tài tụ tập phúc dẫn về, quý nhân tiếp dẫn, điền sản hưng vượng, người Thân thuộc (quyến nhân) an khang" },
        "THÂU": { "rating": "BÌNH", "text": "Nhâm Ngọ là Hỏa tinh, dùng vào việc là tốt vừa" },
        "THÀNH": { "rating": "BÌNH", "text": "tốt vừa, đều có thể dùng" },
        "NGUY": { "rating": "BÌNH", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "tốt vừa" }
    },
    "Giáp Ngọ": {
        "ĐỊNH": { "rating": "RẤT TỐT", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "TỐT", "text": "Giáp Ngọ, Nhâm Ngọ có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, các tinh che, chiếu, nên tu tạo, hôn nhân, khai trương, xuất hành, nhập trạch, trong vòng 60 ngày, 120 ngày, tăng điền địa, tiến nhân khẩu, sinh quý tử, rất vượng" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "BÌNH", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "tốt vừa, đều có thể dùng" },
        "NGUY": { "rating": "TỐT", "text": "Giáp Ngọ là Nguyệt đức, có Hoàng la, Tử đàn, Kim ngân khố lâu, mọi sao tốt che, chiếu, giá thú, khai trương, khởi tạo, động thổ, xuất hành, nhập trạch, an táng, rất tốt" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "tốt vừa" }
    },
    "Bính Ngọ": {
        "ĐỊNH": { "rating": "RẤT TỐT", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "Bính Ngọ, Mậu Ngọ là thiên địa chuyển sát, dùng cái đó xấu" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "TỐT", "text": "Nhâm Ngọ, Nguyệt đức, Bính Ngọ, Mậu Ngọ, là ba ngày lợi về gặp cha mẹ (Thân), giá thú tu tạo, mai táng, khai trương, xuất hành, nhập trạch, động thổ, mọi việc đó trong vòng 60 ngày - 120 ngày tài tụ tập phúc dẫn về, quý nhân tiếp dẫn, điền sản hưng vượng, người Thân thuộc (quyến nhân) an khang" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Bính Ngọ là Thiên đức, Nguyệt đức, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân khố lâu là các sao che, chiếu, nên khởi tạo, giá thú, nhập trạch, xuất hành, thương mại, khai trương, động thổ, an táng, tốt cả, nhất thiết phát tài, giàu sang, thêm đinh (đàn ông), người hầu (nô tỳ) tự đến, mưu vọng thì thắng, luôn luôn" },
        "NGUY": { "rating": "XẤU", "text": "Bính Ngọ là chính tứ phế, xấu" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" }
    },
    "Mậu Ngọ": {
        "ĐỊNH": { "rating": "RẤT TỐT", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "Bính Ngọ, Mậu Ngọ là thiên địa chuyển sát, dùng cái đó xấu" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "TỐT", "text": "Nhâm Ngọ, Nguyệt đức, Bính Ngọ, Mậu Ngọ, là ba ngày lợi về gặp cha mẹ (Thân), giá thú tu tạo, mai táng, khai trương, xuất hành, nhập trạch, động thổ, mọi việc đó trong vòng 60 ngày - 120 ngày tài tụ tập phúc dẫn về, quý nhân tiếp dẫn, điền sản hưng vượng, người Thân thuộc (quyến nhân) an khang" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "tốt vừa, đều có thể dùng" },
        "NGUY": { "rating": "BÌNH", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "tốt vừa" }
    },
    "Tân Mùi": {
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "BÌNH", "text": "Ngày Tân Mùi có Thiên đức, Nguyệt đức" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "BÌNH", "text": "Tân Mùi, Đinh Mùi dùng vào việc nhỏ, cũng tốt vừa" },
        "KHAI": { "rating": "BÌNH", "text": "Đinh Mùi, Kỷ Mùi, Tân Mùi, Quý Mùi đều hệ tốt vừa, ngày đó chỉ nên phạt cỏ, mở núi (khai sơn), nhổ cây, an táng" },
        "THÂU": { "rating": "BÌNH", "text": "Tân Mùi, Quý Mùi là đặt móng, buộc giàn, là tốt vừa, nhưng không lợi cho khởi tạo, hôn nhân, xuất hành, nhập trạch, an táng, khai trương, thương khố (kho chứa), tổn, gặp ôn dịch" },
        "THÀNH": { "rating": "", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" }
    },
    "Quý Mùi": {
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Quý Mùi là thủy nhập Thái châu, do quý thủy gặp trường sinh tướng vượng việc đi (thương ?), trong đó có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng tinh, che, chiếu, lợi người sống lâu, thêm con cháu, tiến ruộng đất, rất tốt." },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "BÌNH", "text": "Quý Mùi là Hỏa tinh, Thiên đức. Kỷ Mùi là Hỏa tinh, nên tu tạo nhập trạch, đặt móng, buộc giàn, xuất hành, khai trương, là tốt vừa" },
        "KHAI": { "rating": "BÌNH", "text": "Đinh Mùi, Kỷ Mùi, Tân Mùi, Quý Mùi đều hệ tốt vừa, ngày đó chỉ nên phạt cỏ, mở núi (khai sơn), nhổ cây, an táng" },
        "THÂU": { "rating": "BÌNH", "text": "Tân Mùi, Quý Mùi là đặt móng, buộc giàn, là tốt vừa, nhưng không lợi cho khởi tạo, hôn nhân, xuất hành, nhập trạch, an táng, khai trương, thương khố (kho chứa), tổn, gặp ôn dịch" },
        "THÀNH": { "rating": "", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "TỐT", "text": "Đinh Mùi là \"Thủy cư cự mẫn\" (trong nước có con cá bể to tên là mẫn). Quý Mùi là \"Thủy nhập Tần châu nội\", \"Văn Xương quý hiển tinh\", động thổ, hưng công, xuất hành, nhập trạch, cưới vợ, khai trương, trăm việc rất tốt" }
    },
    "Ất Mùi": {
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" }
    },
    "Đinh Mùi": {
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "BÌNH", "text": "Tân Mùi, Đinh Mùi dùng vào việc nhỏ, cũng tốt vừa" },
        "KHAI": { "rating": "BÌNH", "text": "Đinh Mùi, Kỷ Mùi, Tân Mùi, Quý Mùi đều hệ tốt vừa, ngày đó chỉ nên phạt cỏ, mở núi (khai sơn), nhổ cây, an táng" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "", "text": "" },
        "NGUY": { "rating": "TỐT", "text": "Đinh Mùi là khi nước đại hải trong sạch, dùng cái đó trăm việc tốt hết" },
        "PHÁ": { "rating": "TỐT", "text": "Đinh Mùi là \"Thủy cư cự mẫn\" (trong nước có con cá bể to tên là mẫn). Quý Mùi là \"Thủy nhập Tần châu nội\", \"Văn Xương quý hiển tinh\", động thổ, hưng công, xuất hành, nhập trạch, cưới vợ, khai trương, trăm việc rất tốt" }
    },
    "Kỷ Mùi": {
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "BÌNH", "text": "Kỷ Mùi có Hỏa tinh, đều là tốt vừa, nên định tảng, tạo giàn, mai táng, nhưng hai việc hôn nhân, khởi tạo là không chịu được. Lại theo tu tạo lịch nói là ngày Bạch hổ nhập trung cung, dùng cái đó không thể là lợi, cần tra lại năm, tháng, ngày, nếu như có cát tinh, và mệnh cung cùng hợp phương thì được, nếu có dính với Nguyệt yếm, Thiên tặc, phạm những cái đó chủ về xấu, lãnh thoái." },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "BÌNH", "text": "Quý Mùi là Hỏa tinh, Thiên đức. Kỷ Mùi là Hỏa tinh, nên tu tạo nhập trạch, đặt móng, buộc giàn, xuất hành, khai trương, là tốt vừa" },
        "KHAI": { "rating": "BÌNH", "text": "Đinh Mùi, Kỷ Mùi, Tân Mùi, Quý Mùi đều hệ tốt vừa, ngày đó chỉ nên phạt cỏ, mở núi (khai sơn), nhổ cây, an táng" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "", "text": "" },
        "NGUY": { "rating": "BÌNH", "text": "Kỷ Mùi mai táng là tốt vừa" },
        "PHÁ": { "rating": "XẤU", "text": "" }
    },
    "Nhâm Thân": {
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Nhâm Thân có Thiên đức, Nguyệt đức, Hoàng la, Tử đàn, Thiên tinh, Địa tinh, Kim ngân khố lâu tinh, che, chiếu, là ngày thập toàn rất tốt, rất lợi" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "BÌNH", "text": "Thiên phú, Thiên hỉ" },
        "TRỪ": { "rating": "BÌNH", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "BÌNH", "text": "Giáp Thân, Nhâm Thân là tốt vừa" },
        "KHAI": { "rating": "BÌNH", "text": "" },
        "THÂU": { "rating": "", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Nhâm Thân là Thiên đức, Nguyệt đức. Giáp Thân, Mậu Thân là lúc ngũ hành không có khí, trực Hoàng la, Tử đàn, Kim ngân Bảo tàng khố lâu, là mọi sao tốt che, chiếu, nhất thiết làm là trăm phúc cùng đến (biền trăm), mọi việc thuận theo, sinh quý tử, vượng tài lộc" },
        "NGUY": { "rating": "BÌNH", "text": "" }
    },
    "Giáp Thân": {
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Giáp Thân, Bính Thân nên phát chặt cây cỏ, phá đất, định tảng, buộc giàn, an táng rất tốt, trong 2-3 năm thêm con, cháu, tiến tài lộc" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "BÌNH", "text": "Giáp Thân, Bính Thân, Mậu Thân, nên an táng, khởi tạo, hôn nhân, nhập trạch, khai trương xuất hành, thì tốt vừa, không nên động thổ" },
        "TRỪ": { "rating": "TỐT", "text": "Giáp Thân có Thiên đức, Nguyệt đức, Hoàng la, Tử đàn tinh che, chiếu, lợi cho việc dựng cột, khởi tạo, an táng, động thổ, khai sơn, phạt cỏ, xuất hành, khai trương, trăm việc đều tốt" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "BÌNH", "text": "Giáp Thân, Nhâm Thân là tốt vừa" },
        "KHAI": { "rating": "BÌNH", "text": "Mậu Thân là Thiên xá. Giáp Thân là khi nước trong sạch, có Hoàng la, Tử đàn, Tụ lộc đới mã, là những sao che, chiếu, nên an táng, làm sinh cơ. Nhưng ngày Tây trầm ngũ hành không có khí, huống hồ là đúng đêm mùa thu, khí hậu đó không nên khởi tạo, hôn nhân, nhập trạch, khai trương. Duy an táng thì rất tốt, thêm con cháu, nhà cửa phát đạt" },
        "THÂU": { "rating": "", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Nhâm Thân là Thiên đức, Nguyệt đức. Giáp Thân, Mậu Thân là lúc ngũ hành không có khí, trực Hoàng la, Tử đàn, Kim ngân Bảo tàng khố lâu, là mọi sao tốt che, chiếu, nhất thiết làm là trăm phúc cùng đến (biền trăm), mọi việc thuận theo, sinh quý tử, vượng tài lộc" },
        "NGUY": { "rating": "BÌNH", "text": "" }
    },
    "Bính Thân": {
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Giáp Thân, Bính Thân nên phát chặt cây cỏ, phá đất, định tảng, buộc giàn, an táng rất tốt, trong 2-3 năm thêm con, cháu, tiến tài lộc" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "BÌNH", "text": "Giáp Thân, Bính Thân, Mậu Thân, nên an táng, khởi tạo, hôn nhân, nhập trạch, khai trương xuất hành, thì tốt vừa, không nên động thổ" },
        "TRỪ": { "rating": "XẤU", "text": "Bính Thân là một ngày ngũ hành không có khí, không thể dùng" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "TỐT", "text": "Mậu Thân là Thiên xá. Canh Thân, Bính Thân là Thiên đức, Nguyệt đức, nên xuất hành, sửa mới, động thổ, hưng công, đặt móng, buộc giàn, hôn nhân, nhập trạch, an táng, khai trương, làm kho chứa, chuồng trâu, dê, lợn, lợi con cháu, vượng điền sản, tiến hoành tài, nhà cửa phát đạt, tốt nhất (thượng cát)" },
        "KHAI": { "rating": "BÌNH", "text": "" },
        "THÂU": { "rating": "", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "BÌNH", "text": "" }
    },
    "Mậu Thân": {
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "Mậu Thân, Thiên cang, Không vong, Xương quỷ, bại vong, xấu" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "BÌNH", "text": "Giáp Thân, Bính Thân, Mậu Thân, nên an táng, khởi tạo, hôn nhân, nhập trạch, khai trương xuất hành, thì tốt vừa, không nên động thổ" },
        "TRỪ": { "rating": "BÌNH", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "TỐT", "text": "Mậu Thân là Thiên xá. Canh Thân, Bính Thân là Thiên đức, Nguyệt đức, nên xuất hành, sửa mới, động thổ, hưng công, đặt móng, buộc giàn, hôn nhân, nhập trạch, an táng, khai trương, làm kho chứa, chuồng trâu, dê, lợn, lợi con cháu, vượng điền sản, tiến hoành tài, nhà cửa phát đạt, tốt nhất (thượng cát)" },
        "KHAI": { "rating": "BÌNH", "text": "Mậu Thân là Thiên xá. Giáp Thân là khi nước trong sạch, có Hoàng la, Tử đàn, Tụ lộc đới mã, là những sao che, chiếu, nên an táng, làm sinh cơ. Nhưng ngày Tây trầm ngũ hành không có khí, huống hồ là đúng đêm mùa thu, khí hậu đó không nên khởi tạo, hôn nhân, nhập trạch, khai trương. Duy an táng thì rất tốt, thêm con cháu, nhà cửa phát đạt" },
        "THÂU": { "rating": "", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Nhâm Thân là Thiên đức, Nguyệt đức. Giáp Thân, Mậu Thân là lúc ngũ hành không có khí, trực Hoàng la, Tử đàn, Kim ngân Bảo tàng khố lâu, là mọi sao tốt che, chiếu, nhất thiết làm là trăm phúc cùng đến (biền trăm), mọi việc thuận theo, sinh quý tử, vượng tài lộc" },
        "NGUY": { "rating": "BÌNH", "text": "" }
    },
    "Canh Thân": {
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "Canh Thân là Xuân chính tứ phế, trăm việc phải tránh, kiêng" },
        "ĐỊNH": { "rating": "XẤU", "text": "Canh Thân tháng giêng, tháng tư, bỏ, cũng xấu. Ngày Thân lại thuộc Vãng vong, xuất hành, xuất quân, phó nhậm (nhận việc đi trước) không lấy ngày này" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "Canh Thân chỉ nên an táng, không nên tu tạo, nhập trạch, là ngày tây trầm, ngũ hành không có khí, không thể dùng, tuy là ngày táng, nhưng nguyệt lệnh không lợi." },
        "TRỪ": { "rating": "XẤU", "text": "Ngày Canh Thân dùng phải thận trọng" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "TỐT", "text": "Mậu Thân là Thiên xá. Canh Thân, Bính Thân là Thiên đức, Nguyệt đức, nên xuất hành, sửa mới, động thổ, hưng công, đặt móng, buộc giàn, hôn nhân, nhập trạch, an táng, khai trương, làm kho chứa, chuồng trâu, dê, lợn, lợi con cháu, vượng điền sản, tiến hoành tài, nhà cửa phát đạt, tốt nhất (thượng cát)" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "", "text": "" },
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "BÌNH", "text": "" }
    },
    "Quý Dậu": {
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Quý Dậu an táng thì rất tốt" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Ất Dậu, Quý Dậu là khi kim vượng. Ất Dậu là lúc nước trong sạch, có Hoàng la, Tử đàn, Kim ngân khố lâu, Tụ lộc đới mã, là những tinh che, chiếu, lợi cho việc cưới vợ, khởi tạo, khai trương, nhập trạch, an táng, là ngày tốt chọn vẹn, chủ về con cháu hưng vượng, trăm việc vừa lòng (xứng tâm)" }
    },
    "Ất Dậu": {
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "TỐT", "text": "Ất Dậu nên tu tạo, nhập trạch, hôn nhân, khai trương, xuất hành" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "Ất Dậu không có sao xấu, khai sơn, phạt cỏ, an táng, hưng công, định tảng, buộc giàn, sửa mới, tạo tác, xuất hành, khai trương, nhập trạch, di cư là tốt vừa" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "Ất Dậu, Quý Dậu là khi kim vượng. Ất Dậu là lúc nước trong sạch, có Hoàng la, Tử đàn, Kim ngân khố lâu, Tụ lộc đới mã, là những tinh che, chiếu, lợi cho việc cưới vợ, khởi tạo, khai trương, nhập trạch, an táng, là ngày tốt chọn vẹn, chủ về con cháu hưng vượng, trăm việc vừa lòng (xứng tâm)" }
    },
    "Đinh Dậu": {
        "NGUY": { "rating": "TỐT", "text": "Duy có ngày Đinh Dậu có Thiên đức, Phúc tinh che, chiếu, nên an táng, hoàn phúc nguyện, xuất hành, khai trương, vào việc quan gặp quý, tốt, chỉ không nên các việc khởi tạo, hôn nhân, giá thú, vẫn cái đó vào ngày đó" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "BÌNH", "text": "Đinh Dậu an táng thì tốt vừa" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "Đinh Dậu cũng thuộc kim vượng, chỉ có mai táng là tốt nhất, những việc còn lại là tốt vừa" }
    },
    "Kỷ Dậu": {
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "" }
    },
    "Tân Dậu": {
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "BÌNH", "text": "Tân Dậu là Kim loan (nhạc ngựa bằng vàng), tốt vừa" }
    },
    "Giáp Tuất": {
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Giáp Tuất, Canh Tuất, Mậu Tuất, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân bảo tàng, Điền bồi tầng, Châu tụ thâm, Giá mã quy, Thánh du thuận, các tinh che, chiếu, rất tốt. Nếu khởi tạo, hưng công, động thổ, nhập trạch, khai trương, hôn nhân, mai táng, mọi việc thì được gia quan, tiến tài, sinh quý tử, thêm hoành tài" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "Ngày Canh Tuất là Thiên đức, Nguyệt đức. Mậu Tuất, Giáp Tuất nên hưng công, động thổ, nhập trạch, khai trương, hôn nhân, mọi việc dùng ngày đó là tốt vừa" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "BÌNH", "text": "Giáp Tuất tám phương đều trắng, ở 24 hướng mọi thần đều chầu trời Nguyên nữ, ngày đó trộm sửa có thể dùng" }
    },
    "Bính Tuất": {
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "Bính Tuất, Nhâm Tuất là hai ngày Sát nhập trung cung, tuy có cát tinh chiếu giải, nhưng cuối cùng thì khó được ích" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "TỐT", "text": "Bính Tuất là Thiên đức, Nguyệt đức, rất tốt" },
        "BẾ": { "rating": "", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" }
    },
    "Mậu Tuất": {
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Giáp Tuất, Canh Tuất, Mậu Tuất, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân bảo tàng, Điền bồi tầng, Châu tụ thâm, Giá mã quy, Thánh du thuận, các tinh che, chiếu, rất tốt. Nếu khởi tạo, hưng công, động thổ, nhập trạch, khai trương, hôn nhân, mai táng, mọi việc thì được gia quan, tiến tài, sinh quý tử, thêm hoành tài" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "Ngày Canh Tuất là Thiên đức, Nguyệt đức. Mậu Tuất, Giáp Tuất nên hưng công, động thổ, nhập trạch, khai trương, hôn nhân, mọi việc dùng ngày đó là tốt vừa" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" }
    },
    "Canh Tuất": {
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Giáp Tuất, Canh Tuất, Mậu Tuất, có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Kim ngân bảo tàng, Điền bồi tầng, Châu tụ thâm, Giá mã quy, Thánh du thuận, các tinh che, chiếu, rất tốt. Nếu khởi tạo, hưng công, động thổ, nhập trạch, khai trương, hôn nhân, mai táng, mọi việc thì được gia quan, tiến tài, sinh quý tử, thêm hoành tài" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "BÌNH", "text": "Ngày Canh Tuất là Thiên đức, Nguyệt đức. Mậu Tuất, Giáp Tuất nên hưng công, động thổ, nhập trạch, khai trương, hôn nhân, mọi việc dùng ngày đó là tốt vừa" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "TỐT", "text": "Canh Tuất có Thiên đức, Nguyệt đức, tám vị Kim tinh, có \"Nam tử chi hoan\" (cái hang của con trai), trước hết bị khẩu thiệt mà sau đó thì rất tốt" }
    },
    "Nhâm Tuất": {
        "THÀNH": { "rating": "XẤU", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "Bính Tuất, Nhâm Tuất là hai ngày Sát nhập trung cung, tuy có cát tinh chiếu giải, nhưng cuối cùng thì khó được ích" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" },
        "THÂU": { "rating": "XẤU", "text": "" }
    },
    "Ất Hợi": {
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "" },
        "NGUY": { "rating": "BÌNH", "text": "Ất Hợi dùng cũng tốt vừa" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Ất Hợi có Văn Xương trực nhật, nên xuất hành, nhập trạch, hôn nhân, nhập học, tu tạo, động thổ, tham quan (đi gặp quan), thấy quý, chiêu tài lộc (thu hút được tài lộc), sinh quý tử làm việc lớn thì phát lớn, làm việc nhỏ thì phát nhỏ. Lại nói Văn Xương Ất Hợi tại Ngọ, Văn Xương là Thái dương ở cung Ngọ, là ngôi của Thái dương, cho nên Có Văn Xương tinh trực nhật là đã rất tốt" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "TỐT", "text": "Ất Hợi là Văn Xương quý hiển tinh. Đinh Hợi, Kỷ Hợi có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Hoa thái, Thao trì, Lộc mã, là những tinh che, chiếu, lợi cho khởi tạo, hưng công, động thổ, buộc giàn, nhập trạch, hôn nhân, giá thú, khai trương, xuất hành, doanh (mưu trù), là mọi việc làm lớn thì phát lớn, làm nhỏ thì phát nhỏ, trong vòng 60 ngày, 120 ngày, chậm là đủ vòng năm lại thấy tài thành, nhà sinh con quý, vượng điền sản và lục súc" },
        "TRỪ": { "rating": "TỐT", "text": "Ất Hợi, Đinh Hợi, nên khởi tạo, khai trương, giá thú, nhập trạch, xuất hành, động thổ, mọi việc rất tốt, con cháu hưng vượng, giàu sang mãi mãi" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "TỐT", "text": "Ất Hợi, Kỷ Hợi là những sao Văn Xương, Quý hiển, Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Bài châu (thẻ bằng Ngọc), Thiên đăng, Tụ lộc Đới mã, Kim ngân khố lâu, Bảo tàng là những sao tốt che, chiếu, nên khởi tạo, mưu trù là trăm việc đều tốt, tám phương, 24 hướng đều lợi dụng cái đó, gia đạo phong dinh (nhiều thừa), sinh quý tử, tiến tài lộc, vượng lục súc" },
        "KHAI": { "rating": "TỐT", "text": "Ất Hợi có Văn Xương tinh. Kỷ Hợi có Hỏa tinh, có Văn Xương hiển quý tinh, nên đặt móng, buộc giàn, hôn nhân, khai trương, nhập trạch, xuất hành, trù mưu làm mọi việc, đều tốt trọn vẹn" }
    },
    "Đinh Hợi": {
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Đinh Hợi có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, các tinh che, chiếu" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "TỐT", "text": "Ất Hợi là Văn Xương quý hiển tinh. Đinh Hợi, Kỷ Hợi có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Hoa thái, Thao trì, Lộc mã, là những tinh che, chiếu, lợi cho khởi tạo, hưng công, động thổ, buộc giàn, nhập trạch, hôn nhân, giá thú, khai trương, xuất hành, doanh (mưu trù), là mọi việc làm lớn thì phát lớn, làm nhỏ thì phát nhỏ, trong vòng 60 ngày, 120 ngày, chậm là đủ vòng năm lại thấy tài thành, nhà sinh con quý, vượng điền sản và lục súc" },
        "TRỪ": { "rating": "TỐT", "text": "Ất Hợi, Đinh Hợi, nên khởi tạo, khai trương, giá thú, nhập trạch, xuất hành, động thổ, mọi việc rất tốt, con cháu hưng vượng, giàu sang mãi mãi" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "BÌNH", "text": "tốt vừa" },
        "KHAI": { "rating": "BÌNH", "text": "" }
    },
    "Kỷ Hợi": {
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "" },
        "NGUY": { "rating": "BÌNH", "text": "Kỷ Hợi có Hỏa tinh, có Văn Xương tinh, che, chiếu, học nên rất tốt, các việc còn lại tốt vừa" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "TỐT", "text": "Kỷ Hợi là Hỏa tinh" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "TỐT", "text": "Ất Hợi là Văn Xương quý hiển tinh. Đinh Hợi, Kỷ Hợi có Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Hoa thái, Thao trì, Lộc mã, là những tinh che, chiếu, lợi cho khởi tạo, hưng công, động thổ, buộc giàn, nhập trạch, hôn nhân, giá thú, khai trương, xuất hành, doanh (mưu trù), là mọi việc làm lớn thì phát lớn, làm nhỏ thì phát nhỏ, trong vòng 60 ngày, 120 ngày, chậm là đủ vòng năm lại thấy tài thành, nhà sinh con quý, vượng điền sản và lục súc" },
        "TRỪ": { "rating": "BÌNH", "text": "Kỷ Hợi là Hỏa tinh, chỉ có khởi tạo, hôn thú là tốt" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "TỐT", "text": "Ất Hợi, Kỷ Hợi là những sao Văn Xương, Quý hiển, Hoàng la, Tử đàn, Thiên hoàng, Địa hoàng, Bài châu (thẻ bằng Ngọc), Thiên đăng, Tụ lộc Đới mã, Kim ngân khố lâu, Bảo tàng là những sao tốt che, chiếu, nên khởi tạo, mưu trù là trăm việc đều tốt, tám phương, 24 hướng đều lợi dụng cái đó, gia đạo phong dinh (nhiều thừa), sinh quý tử, tiến tài lộc, vượng lục súc" },
        "KHAI": { "rating": "TỐT", "text": "Ất Hợi có Văn Xương tinh. Kỷ Hợi có Hỏa tinh, có Văn Xương hiển quý tinh, nên đặt móng, buộc giàn, hôn nhân, khai trương, nhập trạch, xuất hành, trù mưu làm mọi việc, đều tốt trọn vẹn" }
    },
    "Tân Hợi": {
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "Tân Hợi là phụ nhân chi kim, âm khí của kim thịnh. Quý Hợi là ngày cuối cùng của lục giáp, ngày ấy ngũ hành không có khí, hai ngày đó không nên dùng" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" }
    },
    "Quý Hợi": {
        "THÂU": { "rating": "XẤU", "text": "" },
        "THÀNH": { "rating": "TỐT", "text": "" },
        "NGUY": { "rating": "XẤU", "text": "" },
        "PHÁ": { "rating": "XẤU", "text": "" },
        "CHẤP": { "rating": "XẤU", "text": "" },
        "ĐỊNH": { "rating": "XẤU", "text": "Tân Hợi là phụ nhân chi kim, âm khí của kim thịnh. Quý Hợi là ngày cuối cùng của lục giáp, ngày ấy ngũ hành không có khí, hai ngày đó không nên dùng" },
        "BÌNH": { "rating": "XẤU", "text": "" },
        "MÃN": { "rating": "XẤU", "text": "" },
        "TRỪ": { "rating": "XẤU", "text": "" },
        "KIẾN": { "rating": "XẤU", "text": "" },
        "BẾ": { "rating": "XẤU", "text": "" },
        "KHAI": { "rating": "XẤU", "text": "" }
    }
};

// --- CÁC HÀM TÍNH TOÁN CỐT LÕI ---
function INT(d) { return Math.floor(d); }
function getJulianDayNumber(dd, mm, yy) { const a = INT((14 - mm) / 12), y = yy + 4800 - a, m = mm + 12 * a - 3; let jd = dd + INT((153 * m + 2) / 5) + 365 * y + INT(y / 4) - INT(y / 100) + INT(y / 400) - 32045; if (jd < 2299161) { jd = dd + INT((153 * m + 2) / 5) + 365 * y + INT(y / 4) - 32083; } return jd; }
function jdnToGregorian(jdn) { let j = jdn + 32044; let g = INT(j / 146097); let dg = j % 146097; let c = INT((INT(dg / 36524) + 1) * 3 / 4); let dc = dg - c * 36524; let b = INT(dc / 1461); let db = dc % 1461; let a = INT((INT(db / 365) + 1) * 3 / 4); let da = db - a * 365; let y = g * 400 + c * 100 + b * 4 + a; let m = INT((da * 5 + 308) / 153) - 2; let d = da - INT((m + 4) * 153 / 5) + 122; let year = y - 4800 + INT((m + 2) / 12); let month = (m + 2) % 12 + 1; let day = d + 1; return { year, month, day }; }
function getNewMoonDay(k) { const T = k / 1236.85, T2 = T * T, T3 = T2 * T, dr = PI / 180; let Jd1 = 2415020.75933 + 29.53058868 * k + 0.0001178 * T2 - 0.000000155 * T3 + 0.00033 * Math.sin((166.56 + 132.87 * T - 0.009173 * T2) * dr); const M = 359.2242 + 29.10535608 * k - 0.0000333 * T2 - 0.00000347 * T3; const Mpr = 306.0253 + 385.81691806 * k + 0.0107306 * T2 + 0.00001236 * T3; const F = 21.2964 + 390.67050646 * k - 0.0016528 * T2 - 0.00000239 * T3; let C1 = (0.1734 - 0.000393 * T) * Math.sin(M * dr) + 0.0021 * Math.sin(2 * dr * M) - 0.4068 * Math.sin(Mpr * dr) + 0.0161 * Math.sin(dr * 2 * Mpr) - 0.0004 * Math.sin(dr * 3 * Mpr) + 0.0104 * Math.sin(dr * 2 * F) - 0.0051 * Math.sin(dr * (M + Mpr)) - 0.0074 * Math.sin(dr * (M - Mpr)) + 0.0004 * Math.sin(dr * (2 * F + M)) - 0.0004 * Math.sin(dr * (2 * F - M)) - 0.0006 * Math.sin(dr * (2 * F + Mpr)) + 0.0010 * Math.sin(dr * (2 * F - Mpr)) + 0.0005 * Math.sin(dr * (2 * Mpr + M)); let deltat = (T < -11) ? (0.001 + 0.000839 * T + 0.0002261 * T2 - 0.00000845 * T3 - 0.000000081 * T * T3) : (-0.000278 + 0.000265 * T + 0.000262 * T2); return INT(Jd1 + C1 - deltat + 0.5 + TIME_ZONE / 24); }
function getSunLongitude(jdn) { const T = (jdn - 2451545.5 - TIME_ZONE / 24) / 36525, T2 = T * T, dr = PI / 180; const M = 357.52910 + 35999.05030 * T - 0.0001559 * T2 - 0.00000048 * T * T2; const L0 = 280.46645 + 36000.76983 * T + 0.0003032 * T2; const DL = (1.914600 - 0.004817 * T - 0.000014 * T2) * Math.sin(dr * M) + (0.019993 - 0.000101 * T) * Math.sin(dr * 2 * M) + 0.000290 * Math.sin(dr * 3 * M); let L = L0 + DL; while (L < 0) L += 360; while (L >= 360) L -= 360; return L; }
function getTietKhi(jdn) { return TIET_KHI[INT(getSunLongitude(jdn) / 15) % 24]; }
function getLunarMonth11(yy) { let nm = getNewMoonDay(INT((getJulianDayNumber(31, 12, yy) - 2415021) / 29.530588853)); const sunLong = INT(getSunLongitude(nm) / 30); if (sunLong >= 9) { nm = getNewMoonDay(INT((getJulianDayNumber(31, 12, yy) - 2415021) / 29.530588853) - 1); } return nm; }
function getLeapMonthOffset(a11) { const k = INT((a11 - 2415021.076998695) / 29.530588853 + 0.5); let last = 0, i = 1, arc; do { last = INT(getSunLongitude(getNewMoonDay(k + i)) / 30); i++; arc = INT(getSunLongitude(getNewMoonDay(k + i)) / 30); } while (arc != last && i < 14); return i - 1; }
function convertSolarToLunar(solarDay, solarMonth, solarYear, hour) { let jdToUse = getJulianDayNumber(solarDay, solarMonth, solarYear); if (hour >= 23) { jdToUse += 1; } const k = INT((jdToUse - 2415021.076998695) / 29.530588853); let monthStart = getNewMoonDay(k + 1); if (monthStart > jdToUse) { monthStart = getNewMoonDay(k); } let a11 = getLunarMonth11(solarYear), b11 = a11, lunarYear, lunarMonth; if (a11 >= monthStart) { lunarYear = solarYear; a11 = getLunarMonth11(solarYear - 1); } else { lunarYear = solarYear + 1; b11 = getLunarMonth11(solarYear + 1); } const lunarDay = jdToUse - monthStart + 1; const diff = INT((monthStart - a11) / 29); let lunarLeap = 0; lunarMonth = diff + 11; if (b11 - a11 > 365) { const leapMonthDiff = getLeapMonthOffset(a11); if (diff >= leapMonthDiff) { lunarMonth = diff + 10; if (diff == leapMonthDiff) { lunarLeap = 1; } } } if (lunarMonth > 12) { lunarMonth -= 12; } if (lunarMonth >= 11 && diff < 4) { lunarYear -= 1; } return [lunarYear, lunarMonth, lunarDay, lunarLeap]; }
function getDateInfo(jdn) { const { year, month, day } = jdnToGregorian(jdn); const [lunarYear, lunarMonth, lunarDay, lunarLeap] = convertSolarToLunar(day, month, year, 12); const tietKhi = getTietKhi(jdn); const canNgay = (jdn + 9) % 10; const chiNgay = (jdn + 1) % 12; return { jdn: jdn, solarDay: day, solarMonth: month, solarYear: year, lunarDay: lunarDay, lunarMonth: lunarMonth, lunarYear: lunarYear, lunarLeap: lunarLeap, dayCanChi: THIEN_CAN[canNgay] + " " + DIA_CHI[chiNgay], monthCanChi: THIEN_CAN[(lunarYear * 12 + lunarMonth + 3) % 10] + " " + DIA_CHI[(lunarMonth + 1) % 12], yearCanChi: THIEN_CAN[(lunarYear + 6) % 10] + " " + DIA_CHI[(lunarYear + 8) % 12], tietKhi: tietKhi }; }
function getHourCanChi(dayCan, hour) { const canNgayIndex = THIEN_CAN.indexOf(dayCan); let canGioTyDauIndex; switch (canNgayIndex % 5) { case 0: canGioTyDauIndex = 0; break; case 1: canGioTyDauIndex = 2; break; case 2: canGioTyDauIndex = 4; break; case 3: canGioTyDauIndex = 6; break; case 4: canGioTyDauIndex = 8; break; } const chiGioIndex = CHI_TO_INDEX[HOUR_TO_CHI[hour]]; const canGioIndex = (canGioTyDauIndex + chiGioIndex) % 10; return THIEN_CAN[canGioIndex] + " " + DIA_CHI[chiGioIndex]; }
function getLunarNewYearJDN(lunarYear) { const a11 = getLunarMonth11(lunarYear - 1); const k = INT((a11 - 2415021.076998695) / 29.530588853 + 0.5); return getNewMoonDay(k + 2); }
function calculateBatMon(lunarMonth, lunarDay, hourIndex_0_based) { const mapping = ["Hưu", "Sinh", "Thương", "Đỗ", "Cảnh", "Tử", "Kinh", "Khai"]; return mapping[(lunarMonth + lunarDay + (hourIndex_0_based + 1)) % 8]; }
function calculateLucNham(lunarYear, lunarMonth, lunarDay, hourIndex_0_based) { const yearCanChi = THIEN_CAN[(lunarYear + 6) % 10] + " " + DIA_CHI[(lunarYear + 8) % 12]; const yearIndex_1_based = CHI_TO_INDEX[yearCanChi.split(" ")[1]] + 1; const mapping = ["Tiểu Cát", "Vô Vong", "Đại An", "Lưu Niên", "Tốc Hỷ", "Xích Khẩu"]; return mapping[(yearIndex_1_based + lunarMonth + lunarDay + (hourIndex_0_based + 1) - 2) % 6]; }
function getLacVietQueName(batMon, lucNham) { return `${batMon} - ${lucNham}`; }
function findGuaNumber(structure) { for (let guaNum in guaStructures) { if (JSON.stringify(guaStructures[guaNum]) === JSON.stringify(structure)) { return parseInt(guaNum); } } return 8; }
function calculateMaiHoa(hour, lunarDay, lunarMonth, lunarYear) { const hourIndex_1_based = CHI_TO_INDEX[HOUR_TO_CHI[hour]] + 1; const yearCanChi = THIEN_CAN[(lunarYear + 6) % 10] + " " + DIA_CHI[(lunarYear + 8) % 12]; const yearIndex_1_based = CHI_TO_INDEX[yearCanChi.split(" ")[1]] + 1; let upperGua = (lunarDay + lunarMonth + yearIndex_1_based) % 8 || 8; let lowerGua = (hourIndex_1_based + lunarDay + lunarMonth + yearIndex_1_based) % 8 || 8; let movingLine = (hourIndex_1_based + lunarDay + lunarMonth + yearIndex_1_based) % 6 || 6; const mainGuaName = gua64Names[`${upperGua}_${lowerGua}`] || "N/A"; const mainStructure = [...(guaStructures[lowerGua] || []), ...(guaStructures[upperGua] || [])]; const changedStructure = [...mainStructure]; if (movingLine >= 1 && movingLine <= 6) { changedStructure[movingLine - 1] = 1 - changedStructure[movingLine - 1]; } const innerChangedGua = findGuaNumber(changedStructure.slice(0, 3)); const outerChangedGua = findGuaNumber(changedStructure.slice(3, 6)); const changedGuaName = gua64Names[`${outerChangedGua}_${innerChangedGua}`] || "N/A"; return { mainGuaName, changedGuaName, movingLine }; }
function getHoangDao(dayChi, hourChi) { const startHourChi = HOANG_DAO_START_HOUR[dayChi]; const startIndex = DIA_CHI.indexOf(startHourChi); const currentIndex = DIA_CHI.indexOf(hourChi); let godIndex = (currentIndex - startIndex); if (godIndex < 0) godIndex += 12; return VONG_HOANG_DAO[godIndex % 12]; }
function getCanChiNguHanhRelation(dayCanChi) { const [can, chi] = dayCanChi.split(" "); const hanhCan = NGU_HANH_CAN[can]; const hanhChi = NGU_HANH_CHI[chi]; if (!hanhCan || !hanhChi) return { text: "N/A", class: "" }; if (hanhCan === hanhChi || NGU_HANH_RELATION[hanhChi].sinh === hanhCan || NGU_HANH_RELATION[hanhCan].sinh === hanhChi) { return { text: "Tốt", class: "text-good" }; } if (NGU_HANH_RELATION[hanhChi].khac === hanhCan || NGU_HANH_RELATION[hanhCan].khac === hanhChi) { return { text: "Xấu", class: "text-bad" }; } return { text: "Bình", class: "" }; }

// --- CÁC HÀM TÍNH TOÁN VÀ HIỂN THỊ ---

function calculateEquationOfTime(jdn) {
    const n = jdn - 2451545.0;
    const L = (280.46061837 + 0.98564736629 * n) % 360;
    const g = (357.52911 + 0.98560028 * n) % 360;
    const L_rad = L * PI / 180;
    const g_rad = g * PI / 180;
    const lambda = L + 1.914602 * Math.sin(g_rad) + 0.019993 * Math.sin(2 * g_rad) + 0.000289 * Math.sin(3 * g_rad);
    const obliq = (23.439291 - 0.00000036 * n) * PI / 180;
    const alpha = Math.atan2(Math.cos(obliq) * Math.sin(lambda * PI / 180), Math.cos(lambda * PI / 180));
    let eot_minutes = 4 * ((L * PI / 180 - alpha) * 180 / PI);
    if (eot_minutes > 20) eot_minutes -= 1440;
    if (eot_minutes < -20) eot_minutes += 1440;
    return eot_minutes;
}

function getSolarNoon(jdn, longitude) {
    const eotMinutes = calculateEquationOfTime(jdn);
    const solarNoonDecimalHours = 12 - (longitude / 15) - (eotMinutes / 60) + TIME_ZONE;
    const hours = Math.floor(solarNoonDecimalHours);
    const minutes = Math.round((solarNoonDecimalHours - hours) * 60);
    const date = new Date();
    date.setHours(hours, minutes);
    return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
}

async function getLongitude(locationName) {
    if (!locationName) return null;
    try {
        const geoResponse = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(locationName)}&format=json&limit=1`);
        const geoData = await geoResponse.json();
        if (!geoData || geoData.length === 0) {
            console.error('Không tìm thấy địa điểm:', locationName);
            return null;
        }
        return parseFloat(geoData[0].lon);
    } catch (error) {
        console.error('Lỗi API địa điểm:', error);
        return null;
    }
}

function getSaoTotInfo(lunarMonth, dayCan, dayChi, dayCanChi) {
    const foundStars = [];
    const monthIndex = lunarMonth - 1;

    DU_LIEU_SAO.forEach(sao => {
        let isMatch = false;
        switch (sao.loai) {
            case "mapping_thang":
                const mapValue = sao.map[monthIndex];
                if (mapValue) {
                    const values = mapValue.split(',');
                    for (const val of values) {
                        if (THIEN_CAN.includes(val) && val === dayCan) { isMatch = true; break; }
                        if (DIA_CHI.includes(val) && val === dayChi) { isMatch = true; break; }
                        if (val.includes(' ') && val === dayCanChi) { isMatch = true; break; }
                    }
                }
                break;
            case "co_dinh":
                if (sao.ngay.includes(dayCanChi)) isMatch = true;
                break;
            case "nhom_thang":
                let nhom;
                if ([1, 4, 7, 10].includes(lunarMonth)) nhom = "nhom_1_4_7_10";
                else if ([2, 5, 8, 11].includes(lunarMonth)) nhom = "nhom_2_5_8_11";
                else if ([3, 6, 9, 12].includes(lunarMonth)) nhom = "nhom_3_6_9_12";
                if (nhom && sao.duLieu[nhom] && sao.duLieu[nhom].includes(dayCanChi)) isMatch = true;
                break;
        }
        if (isMatch) foundStars.push(`<div><strong>${sao.ten}:</strong> ${sao.yNghia}</div>`);
    });

    return foundStars.length > 0 ? `<div class="detail-cell-content">${foundStars.join('')}</div>` : '<div class="detail-cell-content"><span>Không có</span></div>';
}

function getSaoXauInfo(lunarMonth, lunarDay, dayCan, dayChi, dayCanChi) {
    const foundStars = [];
    const monthIndex = lunarMonth - 1;

    DU_LIEU_SAO_XAU.forEach(sao => {
        let isMatch = false;
        switch (sao.loai) {
            case "mapping_thang":
                const mapValue = sao.map[monthIndex];
                if (mapValue) {
                    const values = mapValue.split(',');
                    for (const val of values) {
                        if (THIEN_CAN.includes(val) && val === dayCan) { isMatch = true; break; }
                        if (DIA_CHI.includes(val) && val === dayChi) { isMatch = true; break; }
                        if (val.includes(' ') && val === dayCanChi) { isMatch = true; break; }
                    }
                }
                break;
            case "ngay_theo_thang":
                if (sao.map[monthIndex] && sao.map[monthIndex].includes(lunarDay)) isMatch = true;
                break;
            case "co_dinh":
                if (sao.ngay.includes(dayCanChi)) isMatch = true;
                break;
            case "nhom_thang":
                let nhom;
                if ([1, 4, 7, 10].includes(lunarMonth)) nhom = "nhom_1_4_7_10";
                else if ([2, 5, 8, 11].includes(lunarMonth)) nhom = "nhom_2_5_8_11";
                else if ([3, 6, 9, 12].includes(lunarMonth)) nhom = "nhom_3_6_9_12";
                if (nhom && sao.duLieu[nhom] && sao.duLieu[nhom].includes(dayCanChi)) isMatch = true;
                break;
        }
        if (isMatch) foundStars.push(`<div><strong>${sao.ten}:</strong> ${sao.yNghia}</div>`);
    });

    return foundStars.length > 0 ? `<div class="detail-cell-content">${foundStars.join('')}</div>` : '<div class="detail-cell-content"><span>Không có</span></div>';
}


function getNgayHoangDao(thangTietKhi, ngayChi) { if (!thangTietKhi || thangTietKhi === 'N/A') return `<div class="detail-cell-content"><strong class="text-bad">Lỗi HĐ (Tháng)</strong></div>`; const thangChi = TIET_KHI_MONTH_CHI[thangTietKhi]; if (!thangChi) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi HĐ (Chi Tháng)</strong></div>`; const saoName = NGAY_HOANG_DAO_LOOKUP[thangChi]?.[ngayChi]; if (!saoName) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi HĐ (Lookup)</strong></div>`; const saoDetail = NGAY_HOANG_DAO_DATA[saoName]; if (!saoDetail) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi HĐ (Data)</strong></div>`; const isHoangDao = saoDetail.type === "Hoàng Đạo"; const ratingClass = isHoangDao ? "text-good" : "text-bad"; let html = `<div class="detail-cell-content"><strong class="${ratingClass}">${saoName} (${saoDetail.type})</strong><br>`; if (saoDetail.nghi) html += `<span>• <strong>Nghi:</strong> ${saoDetail.nghi}</span><br>`; if (saoDetail.ky) html += `<span>• <strong>Kỵ:</strong> ${saoDetail.ky}</span>`; html += `</div>`; return html; }
function get12Truc(thangTietKhi, dayChi) { if (!thangTietKhi || thangTietKhi === 'N/A') return `<div class="detail-cell-content"><strong class="text-bad">Lỗi Trực (Tháng)</strong></div>`; const thangChi = TIET_KHI_MONTH_CHI[thangTietKhi]; if (!thangChi) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi Trực (Chi Tháng)</strong></div>`; const thangIndex = CHI_TO_INDEX[thangChi]; const ngayIndex = CHI_TO_INDEX[dayChi]; if (thangIndex === undefined || ngayIndex === undefined) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi Trực (Index)</strong></div>`; const offset = (ngayIndex - thangIndex + 12) % 12; const trucName = TRUC_NAMES[offset]; const trucDetail = TRUC_INFO[trucName]; if (!trucDetail) return `<div class="detail-cell-content"><strong>${trucName}</strong><br><span class="text-bad">(Thiếu dữ liệu)</span></div>`; let ratingClass = trucDetail.rating.includes("Tốt") ? "text-good" : (trucDetail.rating.includes("Xấu") ? "text-bad" : ""); return `<div class="detail-cell-content">` + `<strong class="${ratingClass}">${trucDetail.name}</strong><br>` + `<strong class="${ratingClass}">(${trucDetail.rating})</strong><br>` + `<span>• <strong>Nghi:</strong> ${trucDetail.nghi}</span><br>` + `<span>• <strong>Kỵ:</strong> ${trucDetail.ky}</span><br>` + `<span>• <strong>Ngoại trừ:</strong> ${trucDetail.ngoaitru}</span>` + `</div>`; }
function get28Batu(jdn) { const diff = jdn - BAT_TU_EPOCH.jdn; const index = (diff + BAT_TU_EPOCH.index + 28000) % 28; const batuName = BAT_TU_NAMES[index]; const batuDetail = BAT_TU_INFO[batuName]; if (!batuDetail) return `<div class="detail-cell-content"><strong>${batuName}</strong><br><span class="text-bad">(Thiếu dữ liệu)</span></div>`; let ratingClass = batuDetail.rating.includes("Tốt") ? "text-good" : (batuDetail.rating.includes("Xấu") ? "text-bad" : ""); return `<div class="detail-cell-content">` + `<strong class="${ratingClass}">${batuDetail.name}</strong><br>` + `<strong class="${ratingClass}">(${batuDetail.rating})</strong><br>` + `<span>• <strong>Nghi:</strong> ${batuDetail.nghi}</span><br>` + `<span>• <strong>Kỵ:</strong> ${batuDetail.ky}</span><br>` + `<span>• <strong>Ngoại trừ:</strong> ${batuDetail.ngoaitru}</span>` + `</div>`; }
function get12TrucName(thangTietKhi, dayChi) { const thangChi = TIET_KHI_MONTH_CHI[thangTietKhi]; if (!thangChi) return null; const thangIndex = CHI_TO_INDEX[thangChi]; const ngayIndex = CHI_TO_INDEX[dayChi]; if (thangIndex === undefined || ngayIndex === undefined) return null; const offset = (ngayIndex - thangIndex + 12) % 12; return TRUC_NAMES[offset]; }
function getDongCong(dayCanChi, trucName) { if (!trucName) return `<div class="detail-cell-content"><strong class="text-bad">Lỗi ĐC (Trực)</strong></div>`; const trucNameInUpperCase = trucName.toUpperCase(); const dongCongDetail = DONG_CONG_DATA[dayCanChi]?.[trucNameInUpperCase]; if (!dongCongDetail) return `<div class="detail-cell-content"><span>N/A</span></div>`; const ratingClass = dongCongDetail.rating.includes("TỐT") ? "text-good" : (dongCongDetail.rating.includes("XẤU") ? "text-bad" : ""); let html = `<div class="detail-cell-content"><strong class="${ratingClass}">${dongCongDetail.rating}</strong>`; if (dongCongDetail.text) html += `<br><span>${dongCongDetail.text}</span>`; html += `</div>`; return html; }
function getCanChiXungInfo(dayCanChi, birthYearCanChi) { const xungList = CAN_CHI_XUNG_DATA[dayCanChi] || []; if (xungList.length === 0) return ''; return xungList.map(xung => { if (xung === birthYearCanChi) { return `<span class="text-bad">${xung}</span>`; } return xung; }).join('<br>'); }
function getCoreNguHanh(napAmString) { if (!napAmString || napAmString === 'N/A') return null; if (napAmString.endsWith('Kim')) return 'Kim'; if (napAmString.endsWith('Mộc')) return 'Mộc'; if (napAmString.endsWith('Thủy')) return 'Thủy'; if (napAmString.endsWith('Hỏa')) return 'Hỏa'; if (napAmString.endsWith('Thổ')) return 'Thổ'; return null; }
function getNguHanhNgayChuInfo(dayCanChi, birthYearCanChi) { const napAmNgay = LAC_THU_NAP_AM_MAP[dayCanChi]; const napAmChu = LAC_THU_NAP_AM_MAP[birthYearCanChi]; const hanhNgay = getCoreNguHanh(napAmNgay); const hanhChu = getCoreNguHanh(napAmChu); if (!hanhNgay || !hanhChu) { return { text: "N/A", class: "" }; } const displayText = `${hanhNgay} - ${hanhChu}`; if (hanhNgay === hanhChu || NGU_HANH_RELATION[hanhNgay].sinh === hanhChu || NGU_HANH_RELATION[hanhChu].sinh === hanhNgay) { return { text: `Tốt - ${displayText}`, class: "text-good" }; } if (NGU_HANH_RELATION[hanhNgay].khac === hanhChu || NGU_HANH_RELATION[hanhChu].khac === hanhNgay) { return { text: `Xấu - ${displayText}`, class: "text-bad" }; } return { text: displayText, class: "" }; }
function getNguHanhChiNgayChuInfo(dayChi, birthYearChi) { const hanhNgay = NGU_HANH_CHI[dayChi]; const hanhChu = NGU_HANH_CHI[birthYearChi]; if (!hanhNgay || !hanhChu) { return { text: "N/A", class: "" }; } const displayText = `${hanhNgay} - ${hanhChu}`; if (hanhNgay === hanhChu || NGU_HANH_RELATION[hanhNgay].sinh === hanhChu || NGU_HANH_RELATION[hanhChu].sinh === hanhNgay) { return { text: `Tốt - ${displayText}`, class: "text-good" }; } if (NGU_HANH_RELATION[hanhNgay].khac === hanhChu || NGU_HANH_RELATION[hanhChu].khac === hanhNgay) { return { text: `Xấu - ${displayText}`, class: "text-bad" }; } return { text: displayText, class: "" }; }
function getKttsSatChuThoTuInfo(yearCan, dayCanChi, lunarMonth) { const results = []; const dayChi = dayCanChi.split(" ")[1]; if (KIM_THAN_THAT_SAT_DATA[yearCan]?.includes(dayChi)) { results.push("KTTS"); } if (SAT_CHU_DUONG_DATA[lunarMonth] === dayChi) { results.push("Sát chủ dương"); } if (SAT_CHU_AM_DATA[lunarMonth] === dayChi) { results.push("Sát chủ âm"); } if (SAT_CHU_MUA_DATA[dayChi]?.includes(lunarMonth)) { results.push("Sát chủ mùa"); } if (SAT_CHU_THANG_DATA[dayChi]?.includes(lunarMonth)) { results.push("Sát chủ tháng"); } if (THO_TU_DATA[lunarMonth] === dayCanChi) { results.push("Thọ tử"); } if (results.length > 0) { return { text: results.join('<br>'), class: 'text-bad' }; } else { return { text: 'No', class: '' }; } }
function getTamDaiKietTinhInfo(lunarMonth, dayCanChi) { const results = []; const category = SAO_THANG_CATEGORY[lunarMonth]; if (!category) return { text: '', class: '' }; for (const star in TAM_DAI_KIET_TINH_DATA) { if (TAM_DAI_KIET_TINH_DATA[star][category]?.has(dayCanChi)) { results.push(star); } } if (results.length > 0) { return { text: results.join('<br>'), class: 'text-good' }; } else { return { text: '', class: '' }; } }
function getKyCuoiHoiInfo(lunarMonth, lunarDay, dayChi) {
    const results = [];
    if (THIEN_DA_DATA[lunarMonth]?.has(dayChi)) { results.push("Thiên đả"); }
    if (THIEN_LOI_DATA[lunarMonth] === dayChi) { results.push("Thiên lôi"); }
    if (THIEN_MA_DATA[lunarMonth]?.has(dayChi)) { results.push("Thiên ma"); }
    if (TAM_CUONG_DAYS.has(lunarDay)) { results.push("Tam cường"); }
    if (results.length > 0) { return { text: results.join('<br>'), class: 'text-bad' }; } 
    else { return { text: 'No', class: '' }; }
}
function getGioXauTotInfo(lunarMonth, dayChi, dayCan, tietKhi, hourChi) {
    const isSatChu = GIO_SAT_CHU[lunarMonth] === hourChi;
    const isThoTu = GIO_THO_TU[dayChi] === hourChi;
    const isThienCau = (GIO_THIEN_CAU[lunarMonth] && GIO_THIEN_CAU[lunarMonth][dayChi] === hourChi);
    const quyNhan = (QUY_NHAN_DATA[dayCan]?.[tietKhi]?.[hourChi] || '').trim();

    return {
        satChu: { text: isSatChu ? 'Yes' : 'No', class: isSatChu ? 'text-bad-no-bold' : 'text-good-no-bold' },
        thoTu: { text: isThoTu ? 'Yes' : 'No', class: isThoTu ? 'text-bad-no-bold' : 'text-good-no-bold' },
        thienCau: { text: isThienCau ? 'Yes' : 'No', class: isThienCau ? 'text-bad-no-bold' : 'text-good-no-bold' },
        quyNhan: { text: quyNhan, class: (quyNhan === 'Dương QN' || quyNhan === 'Âm QN') ? 'text-good' : '' }
    };
}

// --- CÁC HÀM GIAO DIỆN VÀ SỰ KIỆN ---
function getYearInfo(year) { if (!year || isNaN(year)) return { canChi: 'N/A', lacThuNapAm: 'N/A', lucThapNapAm: 'N/A' }; const canChi = THIEN_CAN[(year + 6) % 10] + " " + DIA_CHI[(year + 8) % 12]; const lacThuNapAm = LAC_THU_NAP_AM_MAP[canChi] || "N/A"; const lucThapNapAm = LUC_THAP_NAP_AM_MAP[canChi] || "N/A"; return { canChi, lacThuNapAm, lucThapNapAm }; }
function updateYearDisplay() { const birthYear = document.getElementById('birth-year').value; const viewYear = document.getElementById('view-year').value; const birthInfo = getYearInfo(parseInt(birthYear)); document.getElementById('birth-year-info').innerHTML = `<span class="lac-thu-nap-am">${birthInfo.canChi} - ${birthInfo.lacThuNapAm}</span><br><span class="luc-thap-nap-am">${birthInfo.canChi} - ${birthInfo.lucThapNapAm}</span>`; const viewInfo = getYearInfo(parseInt(viewYear)); document.getElementById('view-year-info').innerHTML = `<span class="lac-thu-nap-am">${viewInfo.canChi} - ${viewInfo.lacThuNapAm}</span><br><span class="luc-thap-nap-am">${viewInfo.canChi} - ${viewInfo.lucThapNapAm}</span>`; }
function getTietKhiMonth(tietKhi) { return TIET_KHI_MONTH_MAP[tietKhi] || 'N/A'; }
function updateXungHighlighting() { const birthYear = document.getElementById('birth-year').value; const birthInfo = getYearInfo(parseInt(birthYear)); const birthYearCanChi = birthInfo.canChi; const birthYearChi = birthInfo.canChi.split(" ")[1]; const rows = document.querySelectorAll('#table-body tr'); rows.forEach(row => { const dayCanChiCell = row.querySelector('td[data-col-idx="6"]'); const xungCell = row.querySelector('td[data-col-idx="27"]'); const nhNgayChuCell = row.querySelector('td[data-col-idx="28"]'); const nhChiNgayChuCell = row.querySelector('td[data-col-idx="29"]'); if (dayCanChiCell && xungCell) { const dayCanChi = dayCanChiCell.textContent; xungCell.innerHTML = getCanChiXungInfo(dayCanChi, birthYearCanChi); } if (dayCanChiCell && nhNgayChuCell) { const dayCanChi = dayCanChiCell.textContent; const info = getNguHanhNgayChuInfo(dayCanChi, birthYearCanChi); nhNgayChuCell.innerHTML = `<span class="${info.class}">${info.text}</span>`; } if (dayCanChiCell && nhChiNgayChuCell) { const dayChi = dayCanChiCell.textContent.split(" ")[1]; const info = getNguHanhChiNgayChuInfo(dayChi, birthYearChi); nhChiNgayChuCell.innerHTML = `<span class="${info.class}">${info.text}</span>`; } }); }

async function generateYearTable() {
    const lunarYearToView = parseInt(document.getElementById('view-year').value);
    if (!lunarYearToView || isNaN(lunarYearToView)) { alert("Vui lòng nhập năm xem (âm lịch) hợp lệ."); return; }
    
    const birthYear = document.getElementById('birth-year').value;
    const birthInfo = getYearInfo(parseInt(birthYear));
    const birthYearCanChi = birthInfo.canChi;
    const birthYearChi = birthInfo.canChi.split(" ")[1];

    const loadingOverlay = document.getElementById('loading-overlay');
    loadingOverlay.style.display = 'flex';
    
    const locationName = document.getElementById('location-check').value;
    const longitude = await getLongitude(locationName);

    await new Promise(resolve => setTimeout(resolve, 50));

    const startLunarYearJDN = getLunarNewYearJDN(lunarYearToView);
    const endLunarYearJDN = getLunarNewYearJDN(lunarYearToView + 1) - 1;
    const finalStartDateJDN = startLunarYearJDN - 15;
    const finalEndDateJDN = endLunarYearJDN + 15;

    const tableBody = document.getElementById('table-body');
    let tableHtml = '';
    let stt = 1;

    for (let jdn = finalStartDateJDN; jdn <= finalEndDateJDN; jdn++, stt++) {
        const dayInfo = getDateInfo(jdn);
        
        let nguyetTanTuLyTuTuyetStr = "";
        const nextJdnInfo = getDateInfo(jdn + 1);
        if (dayInfo.tietKhi !== nextJdnInfo.tietKhi) {
            if (TU_LY_TERMS.has(nextJdnInfo.tietKhi)) { nguyetTanTuLyTuTuyetStr = "Tứ ly"; } 
            else if (TU_TUYET_TERMS.has(nextJdnInfo.tietKhi)) { nguyetTanTuLyTuTuyetStr = "Tứ tuyệt"; }
        }
        if (nguyetTanTuLyTuTuyetStr === "" && nextJdnInfo.lunarDay === 1) { nguyetTanTuLyTuTuyetStr = "Nguyệt tận"; }
        const finalNguyetTanStr = nguyetTanTuLyTuTuyetStr || "No";
        const nguyetTanClass = nguyetTanTuLyTuTuyetStr ? 'text-bad' : '';
        
        const dayCan = dayInfo.dayCanChi.split(" ")[0];
        const dayChi = dayInfo.dayCanChi.split(" ")[1];
        const monthCan = dayInfo.monthCanChi.split(" ")[0];

        const canChiXungHtml = getCanChiXungInfo(dayInfo.dayCanChi, birthYearCanChi);
        
        const isKyDongTho = [1, 3, 7].includes(dayInfo.lunarMonth) || monthCan === 'Mậu' || monthCan === 'Kỷ' || dayCan === 'Mậu' || dayCan === 'Kỷ';
        const kyDongThoStr = isKyDongTho ? 'Yes' : 'No';
        const kyDongThoClass = isKyDongTho ? 'text-bad' : '';

        const taiThan = TAI_THAN_DIRECTION[dayCan] || 'N/A';
        const hyThan = HY_THAN_DIRECTION[dayCan] || 'N/A';
        const hacThan = HAC_THAN_DIRECTION[dayInfo.dayCanChi] || 'N/A';
        const huongThanHtml = `Tài thần: ${taiThan}<br>Hỷ thần: ${hyThan}<br><span class="text-bad">Hạc thần: ${hacThan}</span>`;
        
        const nhNgayChuInfo = getNguHanhNgayChuInfo(dayInfo.dayCanChi, birthYearCanChi);
        const nhChiNgayChuInfo = getNguHanhChiNgayChuInfo(dayChi, birthYearChi);
        
        const yearCan = dayInfo.yearCanChi.split(" ")[0];
        const tietKhiMonth = getTietKhiMonth(dayInfo.tietKhi);
        
        const kttsInfo = getKttsSatChuThoTuInfo(yearCan, dayInfo.dayCanChi, dayInfo.lunarMonth);
        const tamDaiInfo = getTamDaiKietTinhInfo(dayInfo.lunarMonth, dayInfo.dayCanChi);
        const kyCuoiHoiInfo = getKyCuoiHoiInfo(dayInfo.lunarMonth, dayInfo.lunarDay, dayChi);

        const isTamNuong = [3, 7, 13, 18, 22, 27].includes(dayInfo.lunarDay) ? "Yes" : "No";
        const isDaiNguyetKy = [5, 14, 23].includes(dayInfo.lunarDay) ? "Yes" : "No";
        const dayOfWeek = NGAY_TRONG_TUAN[(jdn + 1) % 7];
        const canChiRelation = getCanChiNguHanhRelation(dayInfo.dayCanChi);
        const ngayHDInfo = getNgayHoangDao(tietKhiMonth, dayChi);
        const trucInfo = get12Truc(tietKhiMonth, dayChi);
        const batuInfo = get28Batu(jdn);
        const trucName = get12TrucName(tietKhiMonth, dayChi);
        const dongCongInfo = getDongCong(dayInfo.dayCanChi, trucName);
        const saoTotInfo = getSaoTotInfo(dayInfo.lunarMonth, dayCan, dayChi, dayInfo.dayCanChi);
        const saoXauInfo = getSaoXauInfo(dayInfo.lunarMonth, dayInfo.lunarDay, dayCan, dayChi, dayInfo.dayCanChi);
        
        const solarNoonStr = longitude !== null ? getSolarNoon(jdn, longitude) : "N/A";

        tableHtml += `<tr>
            <td data-col-idx="0">${stt}</td>
            <td data-col-idx="1">${String(dayInfo.solarDay).padStart(2, '0')}/${String(dayInfo.solarMonth).padStart(2, '0')}/${dayInfo.solarYear}</td>
            <td data-col-idx="2">${dayInfo.lunarDay}/${dayInfo.lunarMonth}${dayInfo.lunarLeap ? ' (nhuận)' : ''}/${dayInfo.lunarYear}</td>
            <td data-col-idx="3">${dayInfo.lunarDay}</td>
            <td data-col-idx="4">${dayInfo.lunarMonth}${dayInfo.lunarLeap ? ' (N)' : ''}</td>
            <td data-col-idx="5">${dayInfo.lunarYear}</td>
            <td data-col-idx="6">${dayInfo.dayCanChi}</td>
            <td data-col-idx="7">${dayInfo.monthCanChi}</td>
            <td data-col-idx="8">${dayInfo.yearCanChi}</td>
            <td data-col-idx="9">${dayInfo.tietKhi}</td>
            <td data-col-idx="10">${tietKhiMonth}</td>
            <td data-col-idx="11" style="color: red;">${solarNoonStr}</td>
            <td data-col-idx="12" class="${isTamNuong === 'Yes' ? 'text-bad' : ''}">${isTamNuong}</td>
            <td data-col-idx="13" class="${isDaiNguyetKy === 'Yes' ? 'text-bad' : ''}">${isDaiNguyetKy}</td>
            <td data-col-idx="14"><span class="${canChiRelation.class}">${canChiRelation.text}</span></td>
            <td data-col-idx="15" class="detail-cell">${ngayHDInfo}</td>
            <td data-col-idx="16" class="detail-cell">${trucInfo}</td>
            <td data-col-idx="17" class="detail-cell">${dongCongInfo}</td>
            <td data-col-idx="18" class="detail-cell">${batuInfo}</td>
            <td data-col-idx="19" class="detail-cell">${saoTotInfo}</td>
            <td data-col-idx="20" class="detail-cell">${saoXauInfo}</td>
            <td data-col-idx="21" class="${nguyetTanClass}">${finalNguyetTanStr}</td>
            <td data-col-idx="22" class="${kttsInfo.class}">${kttsInfo.text}</td>
            <td data-col-idx="23" class="${tamDaiInfo.class}">${tamDaiInfo.text}</td>
            <td data-col-idx="24" class="${kyDongThoClass}">${kyDongThoStr}</td>
            <td data-col-idx="25" class="${kyCuoiHoiInfo.class}">${kyCuoiHoiInfo.text}</td>
            <td data-col-idx="26">${dayOfWeek}</td>
            <td data-col-idx="27" class="xung-cell">${canChiXungHtml}</td>
            <td data-col-idx="28"><span class="${nhNgayChuInfo.class}">${nhNgayChuInfo.text}</span></td>
            <td data-col-idx="29"><span class="${nhChiNgayChuInfo.class}">${nhChiNgayChuInfo.text}</span></td>
            <td data-col-idx="30" class="huong-than-cell">${huongThanHtml}</td>
        `;

        const hours = [23, 1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21];
        for (let j = 0; j < hours.length; j++) {
            const hour = hours[j];
            const hourCanChiText = getHourCanChi(dayCan, hour);
            const hourChi = hourCanChiText.split(" ")[1];
            
            const lvdtQue = getLacVietQueName(calculateBatMon(dayInfo.lunarMonth, dayInfo.lunarDay, j), calculateLucNham(dayInfo.lunarYear, dayInfo.lunarMonth, dayInfo.lunarDay, j));
            const isLvdtGood = GOOD_LVDT_QUE.has(lvdtQue);
            const maiHoa = calculateMaiHoa(hour, dayInfo.lunarDay, dayInfo.lunarMonth, dayInfo.lunarYear);
            const maiHoaKey = `${maiHoa.mainGuaName}_${maiHoa.changedGuaName}`;
            const isMaiHoaGood = GOOD_MAIHOA_QUE.has(maiHoaKey);
            const hoangDao = getHoangDao(dayChi, hourChi);
            const isHoangDaoGood = hoangDao.type === "Hoàng Đạo";
            
            const gioXauTot = getGioXauTotInfo(dayInfo.lunarMonth, dayChi, dayCan, dayInfo.tietKhi, hourChi);

            const lvdtHtml = `<span class="${isLvdtGood ? 'good-result' : ''}">1. LVĐT: ${lvdtQue}</span>`;
            const maiHoaHtml = `<span class="${isMaiHoaGood ? 'good-result' : ''}">2. Mai Hoa: ${maiHoa.mainGuaName} - ${maiHoa.changedGuaName} - HĐ: ${maiHoa.movingLine}</span>`;
            const hoangDaoHtml = `<span class="${isHoangDaoGood ? 'good-result' : ''}">3. Hoàng Đạo: ${hoangDao.name} (${hoangDao.type})</span>`;
            const satChuHtml = `<span class="${gioXauTot.satChu.class}">4. Sát Chủ: ${gioXauTot.satChu.text}</span>`;
            const thoTuHtml = `<span class="${gioXauTot.thoTu.class}">5. Thọ Tử: ${gioXauTot.thoTu.text}</span>`;
            const thienCauHtml = `<span class="${gioXauTot.thienCau.class}">6. Thiên Cẩu Hạ Thực: ${gioXauTot.thienCau.text}</span>`;
            const quyNhanHtml = `<span class="${gioXauTot.quyNhan.class}">7. Thiên Ất Quý Nhân: ${gioXauTot.quyNhan.text || 'N/A'}</span>`;
            const xungTuoiRawHtml = getCanChiXungInfo(hourCanChiText, birthYearCanChi);
            const xungTuoiDisplayHtml = xungTuoiRawHtml ? xungTuoiRawHtml.replace(/<br>/g, ', ') : 'Không';
            const xungTuoiHtml = `<span>8. Xung tuổi: ${xungTuoiDisplayHtml}</span>`;

            
            tableHtml += `<td class="hour-cell" data-col-idx="${31+j}">${hourCanChiText}\n${lvdtHtml}\n${maiHoaHtml}\n${hoangDaoHtml}\n${satChuHtml}\n${thoTuHtml}\n${thienCauHtml}\n${quyNhanHtml}\n${xungTuoiHtml}</td>`;
        }
        tableHtml += `</tr>`;
    }
    tableBody.innerHTML = tableHtml;
    
    document.querySelectorAll('.detail-cell').forEach(cell => { if (cell) { cell.dataset.originalHtml = cell.innerHTML; } });
    loadingOverlay.style.display = 'none';
    applyEventHighlighting(); 
    updateXungHighlighting();
}

function applyEventHighlighting() {
    const eventInput = document.getElementById('event-check');
    if (!eventInput) return;
    const searchTerms = eventInput.value.toLowerCase().split(',').map(t => t.trim()).filter(t => t);
    const detailCells = document.querySelectorAll('.detail-cell');

    detailCells.forEach(cell => {
        if (cell.dataset.originalHtml) {
            cell.innerHTML = cell.dataset.originalHtml;
        }

        if (searchTerms.length === 0) return;

        let content = cell.innerHTML;
        const colIdx = parseInt(cell.getAttribute('data-col-idx'));

        searchTerms.forEach(term => {
            if (!term) return;
            const regex = new RegExp(term, 'gi');

            if (colIdx === 19) { // Cột SAO TỐT
                content = content.replace(regex, `<span class="highlight-good">$&</span>`);
            } else if (colIdx === 20) { // Cột SAO XẤU
                content = content.replace(regex, `<span class="highlight-bad">$&</span>`);
            } else {
                // Logic cũ cho các cột có cấu trúc Nghi:/Kỵ:
                content = content.replace(/(<span>• <strong>Nghi:<\/strong>.*?)(<\/span>)/gi, (match, p1, p2) => {
                    return p1.replace(regex, `<span class="highlight-good">$&</span>`) + p2;
                });
                content = content.replace(/(<span>• <strong>Kỵ:<\/strong>.*?)(<\/span>)/gi, (match, p1, p2) => {
                    return p1.replace(regex, `<span class="highlight-bad">$&</span>`) + p2;
                });
            }
        });
        cell.innerHTML = content;
    });
}

function setupColumnToggles() { const toggleContainer = document.getElementById('column-toggle-controls'); toggleContainer.innerHTML = '<span>Ẩn/Hiện Cột:</span>'; const headers = document.querySelectorAll('#main-table thead [data-col-idx]'); headers.forEach(th => { const index = th.getAttribute('data-col-idx'); const headerText = th.textContent.trim(); if (!headerText || th.hasAttribute('colspan')) return; const checkboxId = `toggle-col-${index}`; const label = document.createElement('label'); label.innerHTML = `<input type="checkbox" id="${checkboxId}" data-col-index="${index}" checked> ${headerText}`; toggleContainer.appendChild(label); document.getElementById(checkboxId).addEventListener('change', applyColumnVisibility); }); }
function applyColumnVisibility() { const dynamicStyles = document.getElementById('dynamic-column-styles'); let cssRules = ''; const checkboxes = document.querySelectorAll('#column-toggle-controls input[type="checkbox"]'); checkboxes.forEach(cb => { if (!cb.checked) { const colIndex = cb.getAttribute('data-col-index'); cssRules += `[data-col-idx="${colIndex}"] { display: none; }\n`; } }); dynamicStyles.innerHTML = cssRules; let ngayVisibleCount = 0; let gioVisibleCount = 0; const allHeadersInSecondRow = document.querySelectorAll('#main-table thead tr:nth-child(2) th[data-col-idx]'); allHeadersInSecondRow.forEach(th => { const colIndex = th.getAttribute('data-col-idx'); const correspondingCheckbox = document.getElementById(`toggle-col-${colIndex}`); if (correspondingCheckbox && correspondingCheckbox.checked) { if (th.classList.contains('header-ngay')) { ngayVisibleCount++; } else if (th.classList.contains('header-gio')) { gioVisibleCount++; } } }); const ngayGroupHeader = document.querySelector('#main-table thead .header-ngay[colspan]'); const gioGroupHeader = document.querySelector('#main-table thead .header-gio[colspan]'); if (ngayGroupHeader) { ngayGroupHeader.setAttribute('colspan', ngayVisibleCount > 0 ? ngayVisibleCount : 1); ngayGroupHeader.style.display = ngayVisibleCount > 0 ? '' : 'none'; } if (gioGroupHeader) { gioGroupHeader.setAttribute('colspan', gioVisibleCount > 0 ? gioVisibleCount : 1); gioGroupHeader.style.display = gioVisibleCount > 0 ? '' : 'none'; } }
function createFilterInputs() { const filterRow = document.getElementById('filter-row'); filterRow.innerHTML = ''; const totalCols = 43; for (let i = 0; i < totalCols; i++) { const th = document.createElement('th'); th.setAttribute('data-col-idx', i); th.innerHTML = `<input type="text" class="filter-input" data-column-filter="${i}" placeholder="Lọc...">`; filterRow.appendChild(th); } document.querySelectorAll('#filter-row input.filter-input').forEach(input => { input.addEventListener('keyup', applyFilters); }); applyColumnVisibility(); }
function applyFilters() { const filters = Array.from(document.querySelectorAll('#filter-row input.filter-input')).map(input => ({ columnIndex: parseInt(input.dataset.columnFilter), conditions: input.value.toLowerCase().split(',').map(c => c.trim()).filter(c => c) })).filter(f => f.conditions.length > 0); const rows = document.querySelectorAll('#table-body tr'); rows.forEach(row => { let isVisible = true; for (const filter of filters) { const cell = row.querySelector(`[data-col-idx="${filter.columnIndex}"]`); const cellText = cell ? cell.textContent.toLowerCase() : ''; const matchFound = filter.conditions.some(condition => cellText.includes(condition)); if (!matchFound) { isVisible = false; break; } } row.style.display = isVisible ? '' : 'none'; }); }

// --- HÀM HỖ TRỢ MỚI ---
function debounce(func, delay) { let timeout; return function(...args) { clearTimeout(timeout); timeout = setTimeout(() => func.apply(this, args), delay); }; }

// --- KHỞI TẠO TRANG ---
window.onload = async () => {
    try {
        document.getElementById('view-year').value = new Date().getFullYear();
        updateYearDisplay();
        setupColumnToggles();
        createFilterInputs(); 

        // Event Listeners
        const fullRebuild = async () => { await generateYearTable(); applyFilters(); };
        
        document.getElementById('birth-year').addEventListener('change', () => { 
            updateYearDisplay(); 
            updateXungHighlighting(); 
        });

        // **FIXED**: Added updateYearDisplay() to the 'change' event for 'view-year'
        document.getElementById('view-year').addEventListener('change', () => {
            updateYearDisplay();
            fullRebuild();
        });

        document.getElementById('location-check').addEventListener('change', fullRebuild);
        document.getElementById('event-check').addEventListener('keyup', debounce(applyEventHighlighting, 300));
        document.getElementById('table-body').addEventListener('click', (e) => { const cell = e.target.closest('.hour-cell, .detail-cell, .xung-cell, .huong-than-cell'); if (cell) { cell.classList.toggle('manual-highlight'); } });
        
        document.getElementById('btn-notes').addEventListener('click', () => {
            const notes = document.getElementById('notes-container');
            notes.style.display = notes.style.display === 'block' ? 'none' : 'block';
        });

        document.getElementById('btn-print-view').addEventListener('click', () => {
            document.body.classList.remove('print-mode-khach');
            const oldStyle = document.getElementById('print-style-khach');
            if (oldStyle) oldStyle.innerHTML = '';
            window.print();
        });

        document.getElementById('btn-print-khach').addEventListener('click', () => {
            const styleId = 'print-style-khach';
            let style = document.getElementById(styleId);
            if (!style) {
                style = document.createElement('style');
                style.id = styleId;
                document.head.appendChild(style);
            }
            style.innerHTML = '@page { size: A4 landscape; margin: 1cm; }';
            
            document.body.classList.add('print-mode-khach');
            
            const afterPrintHandler = () => {
                document.body.classList.remove('print-mode-khach');
                if (style) style.innerHTML = ''; 
                window.removeEventListener('afterprint', afterPrintHandler);
            };
            window.addEventListener('afterprint', afterPrintHandler);
            
            window.print();
        });

        await generateYearTable();
    } catch (error) {
        console.error("Đã xảy ra lỗi nghiêm trọng khi khởi tạo trang:", error);
        alert("Đã có lỗi xảy ra. Vui lòng kiểm tra Console (F12) để biết thêm chi tiết.");
        const loadingOverlay = document.getElementById('loading-overlay');
        if(loadingOverlay) {
            loadingOverlay.innerHTML = '<span>Đã xảy ra lỗi! Vui lòng tải lại trang.</span>';
            loadingOverlay.style.display = 'flex';
        }
    }
};
</script>
</body>
</html>

